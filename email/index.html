<!doctype html>
<html>
<head>
  <meta charset='utf-8' />
  <title>  | Documentation</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro:400,500,700' rel='stylesheet' type='text/css'>
  <link href='assets/bass.css' type='text/css' rel='stylesheet' />
  <link href='assets/style.css' type='text/css' rel='stylesheet' />
  <link href='assets/github.css' type='text/css' rel='stylesheet' />
</head>
<body class='documentation'>
  <div class='container'>
    <div class='clearfix md-mxn2'>
      <div class='fixed md-show fix-3 overflow-auto max-height-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'></h3>
          <div class='mb1'><code></code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block field'
            type='text' />
          <div id='toc'>
              <a
                href='#cards'
                class='block bold'>
                cards
              </a>
                <a
                  href='#cards._animatingDeadDomNodes'
                  class='regular block'>
                  ._animatingDeadDomNodes
                </a>
                <a
                  href='#cards._cardsNode'
                  class='regular block'>
                  ._cardsNode
                </a>
                <a
                  href='#cards._containerNode'
                  class='regular block'>
                  ._containerNode
                </a>
                <a
                  href='#cards._eatingEventsUntilNextCard'
                  class='regular block'>
                  ._eatingEventsUntilNextCard
                </a>
                <a
                  href='#cards._emitStartupEvents'
                  class='regular block'>
                  ._emitStartupEvents
                </a>
                <a
                  href='#cards._onCardVisible'
                  class='regular block'>
                  ._onCardVisible
                </a>
                <a
                  href='#cards._onMaybeIntercept'
                  class='regular block'>
                  ._onMaybeIntercept
                </a>
                <a
                  href='#cards._popupActive'
                  class='regular block'>
                  ._popupActive
                </a>
                <a
                  href='#cards._rootNode'
                  class='regular block'>
                  ._rootNode
                </a>
                <a
                  href='#cards._startupEventsEmitted'
                  class='regular block'>
                  ._startupEventsEmitted
                </a>
                <a
                  href='#cards._transitionCount'
                  class='regular block'>
                  ._transitionCount
                </a>
                <a
                  href='#cards._zIndex'
                  class='regular block'>
                  ._zIndex
                </a>
                <a
                  href='#cards.assertNoCards'
                  class='regular block'>
                  .assertNoCards
                </a>
                <a
                  href='#cards.eatEventsUntilNextCard'
                  class='regular block'>
                  .eatEventsUntilNextCard
                </a>
                <a
                  href='#cards.init'
                  class='regular block'>
                  .init
                </a>
                <a
                  href='#cards.pushCard'
                  class='regular block'>
                  .pushCard
                </a>
                <a
                  href='#cards.pushOrTellCard'
                  class='regular block'>
                  .pushOrTellCard
                </a>
                <a
                  href='#cards.removeAllCards'
                  class='regular block'>
                  .removeAllCards
                </a>
                <a
                  href='#cards.removeCardAndSuccessors'
                  class='regular block'>
                  .removeCardAndSuccessors
                </a>
                <a
                  href='#cards.setStatusColor'
                  class='regular block'>
                  .setStatusColor
                </a>
                <a
                  href='#cards.stopEatingEvents'
                  class='regular block'>
                  .stopEatingEvents
                </a>
              <a
                href='#_bindPrefs'
                class='block bold'>
                _bindPrefs
              </a>
              <a
                href='#FontSizeUtils'
                class='block bold'>
                FontSizeUtils
              </a>
                <a
                  href='#FontSizeUtils._cachedContexts'
                  class='regular block'>
                  ._cachedContexts
                </a>
                <a
                  href='#FontSizeUtils._getCachedContext'
                  class='regular block'>
                  ._getCachedContext
                </a>
                <a
                  href='#FontSizeUtils._getTextChangeObserver'
                  class='regular block'>
                  ._getTextChangeObserver
                </a>
                <a
                  href='#FontSizeUtils._handleTextChanges'
                  class='regular block'>
                  ._handleTextChanges
                </a>
                <a
                  href='#FontSizeUtils._observeHeaderChanges'
                  class='regular block'>
                  ._observeHeaderChanges
                </a>
                <a
                  href='#FontSizeUtils._overflowCountCache'
                  class='regular block'>
                  ._overflowCountCache
                </a>
                <a
                  href='#FontSizeUtils._reformatHeaderText'
                  class='regular block'>
                  ._reformatHeaderText
                </a>
                <a
                  href='#FontSizeUtils._registerHeadersInSubtree'
                  class='regular block'>
                  ._registerHeadersInSubtree
                </a>
                <a
                  href='#FontSizeUtils._textChangeObserver'
                  class='regular block'>
                  ._textChangeObserver
                </a>
                <a
                  href='#FontSizeUtils.autoResizeElement'
                  class='regular block'>
                  .autoResizeElement
                </a>
                <a
                  href='#FontSizeUtils.centerTextToScreen'
                  class='regular block'>
                  .centerTextToScreen
                </a>
                <a
                  href='#FontSizeUtils.getAllowedSizes'
                  class='regular block'>
                  .getAllowedSizes
                </a>
                <a
                  href='#FontSizeUtils.getContentWidth'
                  class='regular block'>
                  .getContentWidth
                </a>
                <a
                  href='#FontSizeUtils.getFontWidth'
                  class='regular block'>
                  .getFontWidth
                </a>
                <a
                  href='#FontSizeUtils.getMaxFontSizeInfo'
                  class='regular block'>
                  .getMaxFontSizeInfo
                </a>
                <a
                  href='#FontSizeUtils.getOverflowCount'
                  class='regular block'>
                  .getOverflowCount
                </a>
                <a
                  href='#FontSizeUtils.getStyleProperties'
                  class='regular block'>
                  .getStyleProperties
                </a>
                <a
                  href='#FontSizeUtils.getWindowWidth'
                  class='regular block'>
                  .getWindowWidth
                </a>
                <a
                  href='#FontSizeUtils.init'
                  class='regular block'>
                  .init
                </a>
                <a
                  href='#FontSizeUtils.resetCache'
                  class='regular block'>
                  .resetCache
                </a>
                <a
                  href='#FontSizeUtils.resetCentering'
                  class='regular block'>
                  .resetCentering
                </a>
              <a
                href='#_cacheDom'
                class='block bold'>
                _cacheDom
              </a>
              <a
                href='#_cacheDomTimeoutId'
                class='block bold'>
                _cacheDomTimeoutId
              </a>
              <a
                href='#_cacheListLimit'
                class='block bold'>
                _cacheListLimit
              </a>
              <a
                href='#VScroll'
                class='block bold'>
                VScroll
              </a>
                <a
                  href='#VScroll.trimMessagesForCache'
                  class='regular block'>
                  .trimMessagesForCache
                </a>
                <a
                  href='#VScroll._calculateTotalHeight'
                  class='regular block'>
                  #_calculateTotalHeight
                </a>
                <a
                  href='#VScroll._init'
                  class='regular block'>
                  #_init
                </a>
                <a
                  href='#VScroll._nextAvailableNode'
                  class='regular block'>
                  #_nextAvailableNode
                </a>
                <a
                  href='#VScroll._recalculate'
                  class='regular block'>
                  #_recalculate
                </a>
                <a
                  href='#VScroll._render'
                  class='regular block'>
                  #_render
                </a>
                <a
                  href='#VScroll._scrollTimeoutPoll'
                  class='regular block'>
                  #_scrollTimeoutPoll
                </a>
                <a
                  href='#VScroll._startScrollStopPolling'
                  class='regular block'>
                  #_startScrollStopPolling
                </a>
                <a
                  href='#VScroll.bindData'
                  class='regular block'>
                  #bindData
                </a>
                <a
                  href='#VScroll.clearDisplay'
                  class='regular block'>
                  #clearDisplay
                </a>
                <a
                  href='#VScroll.destroy'
                  class='regular block'>
                  #destroy
                </a>
                <a
                  href='#VScroll.eventRateLimitMillis'
                  class='regular block'>
                  #eventRateLimitMillis
                </a>
                <a
                  href='#VScroll.getVisibleIndexRange'
                  class='regular block'>
                  #getVisibleIndexRange
                </a>
                <a
                  href='#VScroll.indexAtScrollPosition'
                  class='regular block'>
                  #indexAtScrollPosition
                </a>
                <a
                  href='#VScroll.itemDefaultDataClass'
                  class='regular block'>
                  #itemDefaultDataClass
                </a>
                <a
                  href='#VScroll.itemsPerScreen'
                  class='regular block'>
                  #itemsPerScreen
                </a>
                <a
                  href='#VScroll.jumpToIndex'
                  class='regular block'>
                  #jumpToIndex
                </a>
                <a
                  href='#VScroll.lastScrollTopSetTime'
                  class='regular block'>
                  #lastScrollTopSetTime
                </a>
                <a
                  href='#VScroll.nowVisible'
                  class='regular block'>
                  #nowVisible
                </a>
                <a
                  href='#VScroll.onChange'
                  class='regular block'>
                  #onChange
                </a>
                <a
                  href='#VScroll.onEvent'
                  class='regular block'>
                  #onEvent
                </a>
                <a
                  href='#VScroll.prefetchItemCount'
                  class='regular block'>
                  #prefetchItemCount
                </a>
                <a
                  href='#VScroll.prefetchScreens'
                  class='regular block'>
                  #prefetchScreens
                </a>
                <a
                  href='#VScroll.prepareData'
                  class='regular block'>
                  #prepareData
                </a>
                <a
                  href='#VScroll.prerenderItemCount'
                  class='regular block'>
                  #prerenderItemCount
                </a>
                <a
                  href='#VScroll.prerenderScreens'
                  class='regular block'>
                  #prerenderScreens
                </a>
                <a
                  href='#VScroll.recalculatePaddingItemCount'
                  class='regular block'>
                  #recalculatePaddingItemCount
                </a>
                <a
                  href='#VScroll.recalculatePaddingScreens'
                  class='regular block'>
                  #recalculatePaddingScreens
                </a>
                <a
                  href='#VScroll.renderCurrentPosition'
                  class='regular block'>
                  #renderCurrentPosition
                </a>
                <a
                  href='#VScroll.retainExtraRenderedScreens'
                  class='regular block'>
                  #retainExtraRenderedScreens
                </a>
                <a
                  href='#VScroll.setData'
                  class='regular block'>
                  #setData
                </a>
                <a
                  href='#VScroll.updateDataBind'
                  class='regular block'>
                  #updateDataBind
                </a>
              <a
                href='#Model'
                class='block bold'>
                Model
              </a>
                <a
                  href='#Model._callEmit'
                  class='regular block'>
                  #_callEmit
                </a>
                <a
                  href='#Model.account'
                  class='regular block'>
                  #account
                </a>
                <a
                  href='#Model.acctsSlice'
                  class='regular block'>
                  #acctsSlice
                </a>
                <a
                  href='#Model.changeAccount'
                  class='regular block'>
                  #changeAccount
                </a>
                <a
                  href='#Model.changeAccountFromId'
                  class='regular block'>
                  #changeAccountFromId
                </a>
                <a
                  href='#Model.changeFolder'
                  class='regular block'>
                  #changeFolder
                </a>
                <a
                  href='#Model.folder'
                  class='regular block'>
                  #folder
                </a>
                <a
                  href='#Model.foldersSlice'
                  class='regular block'>
                  #foldersSlice
                </a>
                <a
                  href='#Model.getAccount'
                  class='regular block'>
                  #getAccount
                </a>
                <a
                  href='#Model.getAccountCount'
                  class='regular block'>
                  #getAccountCount
                </a>
                <a
                  href='#Model.hasAccount'
                  class='regular block'>
                  #hasAccount
                </a>
                <a
                  href='#Model.init'
                  class='regular block'>
                  #init
                </a>
                <a
                  href='#Model.notifyFoldersSliceOnChange'
                  class='regular block'>
                  #notifyFoldersSliceOnChange
                </a>
                <a
                  href='#Model.notifyInboxMessages'
                  class='regular block'>
                  #notifyInboxMessages
                </a>
                <a
                  href='#Model.selectFirstFolderWithType'
                  class='regular block'>
                  #selectFirstFolderWithType
                </a>
                <a
                  href='#Model.selectInbox'
                  class='regular block'>
                  #selectInbox
                </a>
              <a
                href='#_clearCachedMessages'
                class='block bold'>
                _clearCachedMessages
              </a>
              <a
                href='#_considerCacheDom'
                class='block bold'>
                _considerCacheDom
              </a>
              <a
                href='#_divertToManualConfig'
                class='block bold'>
                _divertToManualConfig
              </a>
              <a
                href='#_focusEditorWithCursorAtEnd'
                class='block bold'>
                _focusEditorWithCursorAtEnd
              </a>
              <a
                href='#_isCacheableCardState'
                class='block bold'>
                _isCacheableCardState
              </a>
              <a
                href='#_onAttachmentDone'
                class='block bold'>
                _onAttachmentDone
              </a>
              <a
                href='#_onVScrollStopped'
                class='block bold'>
                _onVScrollStopped
              </a>
              <a
                href='#toaster'
                class='block bold'>
                toaster
              </a>
                <a
                  href='#toaster._previousActionClass'
                  class='regular block'>
                  ._previousActionClass
                </a>
                <a
                  href='#toaster.hide'
                  class='regular block'>
                  .hide
                </a>
                <a
                  href='#toaster.init'
                  class='regular block'>
                  .init
                </a>
                <a
                  href='#toaster.onAction'
                  class='regular block'>
                  .onAction
                </a>
                <a
                  href='#toaster.toast'
                  class='regular block'>
                  .toast
                </a>
                <a
                  href='#toaster.toastOperation'
                  class='regular block'>
                  .toastOperation
                </a>
              <a
                href='#_showFolder'
                class='block bold'>
                _showFolder
              </a>
              <a
                href='#_warnAttachmentSizeExceeded'
                class='block bold'>
                _warnAttachmentSizeExceeded
              </a>
              <a
                href='#'
                class='block bold'>
                
              </a>
              <a
                href='#'
                class='block bold'>
                
              </a>
              <a
                href='#'
                class='block bold'>
                
              </a>
              <a
                href='#'
                class='block bold'>
                
              </a>
              <a
                href='#'
                class='block bold'>
                
              </a>
              <a
                href='#'
                class='block bold'>
                
              </a>
              <a
                href='#'
                class='block bold'>
                
              </a>
              <a
                href='#'
                class='block bold'>
                
              </a>
              <a
                href='#'
                class='block bold'>
                
              </a>
              <a
                href='#'
                class='block bold'>
                
              </a>
              <a
                href='#'
                class='block bold'>
                
              </a>
              <a
                href='#'
                class='block bold'>
                
              </a>
              <a
                href='#Marquee'
                class='block bold'>
                Marquee
              </a>
                <a
                  href='#Marquee.activate'
                  class='regular block'>
                  .activate
                </a>
                <a
                  href='#Marquee.setup'
                  class='regular block'>
                  .setup
                </a>
                <a
                  href='#Marquee.timingFunction'
                  class='regular block'>
                  .timingFunction
                </a>
              <a
                href='#addAttachmentsSubjectToSizeLimits'
                class='block bold'>
                addAttachmentsSubjectToSizeLimits
              </a>
              <a
                href='#advance'
                class='block bold'>
                advance
              </a>
              <a
                href='#appDispatchedMessage'
                class='block bold'>
                appDispatchedMessage
              </a>
              <a
                href='#globalOnAppMessage'
                class='block bold'>
                globalOnAppMessage
              </a>
              <a
                href='#HTML_CACHE_VERSION'
                class='block bold'>
                HTML_CACHE_VERSION
              </a>
              <a
                href='#startupCacheEventsSent'
                class='block bold'>
                startupCacheEventsSent
              </a>
              <a
                href='#startupOnModelLoaded'
                class='block bold'>
                startupOnModelLoaded
              </a>
              <a
                href='#attachedCallback'
                class='block bold'>
                attachedCallback
              </a>
              <a
                href='#base'
                class='block bold'>
                base
              </a>
              <a
                href='#bindDataSource'
                class='block bold'>
                bindDataSource
              </a>
              <a
                href='#bindToSlice'
                class='block bold'>
                bindToSlice
              </a>
              <a
                href='#buildBodyDom'
                class='block bold'>
                buildBodyDom
              </a>
              <a
                href='#calculateTotalAttachmentsSize'
                class='block bold'>
                calculateTotalAttachmentsSize
              </a>
              <a
                href='#callHeaderFontSize'
                class='block bold'>
                callHeaderFontSize
              </a>
              <a
                href='#canReplyAll'
                class='block bold'>
                canReplyAll
              </a>
              <a
                href='#changeIfSame'
                class='block bold'>
                changeIfSame
              </a>
              <a
                href='#checkExpectingMessageSuid'
                class='block bold'>
                checkExpectingMessageSuid
              </a>
              <a
                href='#cloneAndSave'
                class='block bold'>
                cloneAndSave
              </a>
              <a
                href='#cloneAsInertNodeAvoidingCustomElementHorrors'
                class='block bold'>
                cloneAsInertNodeAvoidingCustomElementHorrors
              </a>
              <a
                href='#delayedSaveFromNode'
                class='block bold'>
                delayedSaveFromNode
              </a>
              <a
                href='#reset'
                class='block bold'>
                reset
              </a>
              <a
                href='#save'
                class='block bold'>
                save
              </a>
              <a
                href='#saveFromNode'
                class='block bold'>
                saveFromNode
              </a>
              <a
                href='#containerListen'
                class='block bold'>
                containerListen
              </a>
              <a
                href='#createAndInsertIframeForContent'
                class='block bold'>
                createAndInsertIframeForContent
              </a>
              <a
                href='#currentMessage'
                class='block bold'>
                currentMessage
              </a>
              <a
                href='#CurrentMessage'
                class='block bold'>
                CurrentMessage
              </a>
                <a
                  href='#CurrentMessage.header'
                  class='regular block'>
                  #header
                </a>
                <a
                  href='#CurrentMessage.siblings'
                  class='regular block'>
                  #siblings
                </a>
              <a
                href='#DEFAULT_STYLE_TAG'
                class='block bold'>
                DEFAULT_STYLE_TAG
              </a>
              <a
                href='#define'
                class='block bold'>
                define
              </a>
              <a
                href='#define'
                class='block bold'>
                define
              </a>
              <a
                href='#define'
                class='block bold'>
                define
              </a>
              <a
                href='#define'
                class='block bold'>
                define
              </a>
              <a
                href='#define'
                class='block bold'>
                define
              </a>
              <a
                href='#define'
                class='block bold'>
                define
              </a>
              <a
                href='#define'
                class='block bold'>
                define
              </a>
              <a
                href='#define'
                class='block bold'>
                define
              </a>
              <a
                href='#define'
                class='block bold'>
                define
              </a>
              <a
                href='#define'
                class='block bold'>
                define
              </a>
              <a
                href='#define'
                class='block bold'>
                define
              </a>
              <a
                href='#define'
                class='block bold'>
                define
              </a>
              <a
                href='#define'
                class='block bold'>
                define
              </a>
              <a
                href='#delayedNode'
                class='block bold'>
                delayedNode
              </a>
              <a
                href='#delayedSaveId'
                class='block bold'>
                delayedSaveId
              </a>
              <a
                href='#deleteBubble'
                class='block bold'>
                deleteBubble
              </a>
              <a
                href='#depsFromText'
                class='block bold'>
                depsFromText
              </a>
              <a
                href='#idsToUrls'
                class='block bold'>
                idsToUrls
              </a>
              <a
                href='#load'
                class='block bold'>
                load
              </a>
              <a
                href='#makeTemplateFn'
                class='block bold'>
                makeTemplateFn
              </a>
              <a
                href='#objToFn'
                class='block bold'>
                objToFn
              </a>
              <a
                href='#ready'
                class='block bold'>
                ready
              </a>
              <a
                href='#textToTemplate'
                class='block bold'>
                textToTemplate
              </a>
              <a
                href='#write'
                class='block bold'>
                write
              </a>
              <a
                href='#detachedCallback'
                class='block bold'>
                detachedCallback
              </a>
              <a
                href='#iframeShimsOpts'
                class='block bold'>
                iframeShimsOpts
              </a>
                <a
                  href='#iframeShimsOpts.didResizePollIntervalMS'
                  class='regular block'>
                  .didResizePollIntervalMS
                </a>
                <a
                  href='#iframeShimsOpts.initialResizePollIntervalMS'
                  class='regular block'>
                  .initialResizePollIntervalMS
                </a>
                <a
                  href='#iframeShimsOpts.initialScale'
                  class='regular block'>
                  .initialScale
                </a>
                <a
                  href='#iframeShimsOpts.noResizePollIntervalMS'
                  class='regular block'>
                  .noResizePollIntervalMS
                </a>
                <a
                  href='#iframeShimsOpts.pictureDelayPollIntervalMS'
                  class='regular block'>
                  .pictureDelayPollIntervalMS
                </a>
                <a
                  href='#iframeShimsOpts.resizeLimit'
                  class='regular block'>
                  .resizeLimit
                </a>
                <a
                  href='#iframeShimsOpts.zoomDelayMS'
                  class='regular block'>
                  .zoomDelayMS
                </a>
              <a
                href='#die'
                class='block bold'>
                die
              </a>
              <a
                href='#domEvt'
                class='block bold'>
                domEvt
              </a>
              <a
                href='#eachProp'
                class='block bold'>
                eachProp
              </a>
              <a
                href='#editBubble'
                class='block bold'>
                editBubble
              </a>
              <a
                href='#editModeChanged'
                class='block bold'>
                editModeChanged
              </a>
              <a
                href='#element'
                class='block bold'>
                element
              </a>
                <a
                  href='#element.load'
                  class='regular block'>
                  .load
                </a>
              <a
                href='#emitDomEvent'
                class='block bold'>
                emitDomEvent
              </a>
              <a
                href='#emitWhenListener'
                class='block bold'>
                emitWhenListener
              </a>
              <a
                href='#latest'
                class='block bold'>
                latest
              </a>
              <a
                href='#latestOnce'
                class='block bold'>
                latestOnce
              </a>
              <a
                href='#ensureName'
                class='block bold'>
                ensureName
              </a>
              <a
                href='#ensureNameList'
                class='block bold'>
                ensureNameList
              </a>
              <a
                href='#exec'
                class='block bold'>
                exec
              </a>
              <a
                href='#expectingMessageSuid'
                class='block bold'>
                expectingMessageSuid
              </a>
              <a
                href='#extractAddresses'
                class='block bold'>
                extractAddresses
              </a>
              <a
                href='#fetchNotificationsData'
                class='block bold'>
                fetchNotificationsData
              </a>
              <a
                href='#fileSize'
                class='block bold'>
                fileSize
              </a>
              <a
                href='#findAncestorWithClass'
                class='block bold'>
                findAncestorWithClass
              </a>
              <a
                href='#firstRenderedIndex'
                class='block bold'>
                firstRenderedIndex
              </a>
              <a
                href='#focusInputAndPositionCursorFromContainerClick'
                class='block bold'>
                focusInputAndPositionCursorFromContainerClick
              </a>
              <a
                href='#formatMatchString'
                class='block bold'>
                formatMatchString
              </a>
              <a
                href='#FormNavigation'
                class='block bold'>
                FormNavigation
              </a>
              <a
                href='#fromEditor'
                class='block bold'>
                fromEditor
              </a>
              <a
                href='#getAutocompleteItem'
                class='block bold'>
                getAutocompleteItem
              </a>
              <a
                href='#getExistingEntries'
                class='block bold'>
                getExistingEntries
              </a>
              <a
                href='#getSyncEnv'
                class='block bold'>
                getSyncEnv
              </a>
              <a
                href='#HEADER_SIZES'
                class='block bold'>
                HEADER_SIZES
              </a>
              <a
                href='#HeaderCursor'
                class='block bold'>
                HeaderCursor
              </a>
              <a
                href='#hideAccounts'
                class='block bold'>
                hideAccounts
              </a>
              <a
                href='#hideEmptyLayout'
                class='block bold'>
                hideEmptyLayout
              </a>
              <a
                href='#indexOfGeneric'
                class='block bold'>
                indexOfGeneric
              </a>
              <a
                href='#indexOfMessageById'
                class='block bold'>
                indexOfMessageById
              </a>
              <a
                href='#init'
                class='block bold'>
                init
              </a>
              <a
                href='#init'
                class='block bold'>
                init
              </a>
              <a
                href='#insertBubble'
                class='block bold'>
                insertBubble
              </a>
              <a
                href='#isValidAddress'
                class='block bold'>
                isValidAddress
              </a>
              <a
                href='#lastEntryTime'
                class='block bold'>
                lastEntryTime
              </a>
              <a
                href='#learnAbout'
                class='block bold'>
                learnAbout
              </a>
              <a
                href='#loadNextChunk'
                class='block bold'>
                loadNextChunk
              </a>
              <a
                href='#localOnModelLoaded'
                class='block bold'>
                localOnModelLoaded
              </a>
              <a
                href='#makeFullId'
                class='block bold'>
                makeFullId
              </a>
              <a
                href='#makeMap'
                class='block bold'>
                makeMap
              </a>
              <a
                href='#makePropName'
                class='block bold'>
                makePropName
              </a>
              <a
                href='#match'
                class='block bold'>
                match
              </a>
              <a
                href='#MAX_ATTACHMENT_SIZE'
                class='block bold'>
                MAX_ATTACHMENT_SIZE
              </a>
              <a
                href='#MAXIMUM_BYTES_PER_MESSAGE_DURING_SCROLL'
                class='block bold'>
                MAXIMUM_BYTES_PER_MESSAGE_DURING_SCROLL
              </a>
              <a
                href='#MAXIMUM_MS_BETWEEN_SNIPPET_REQUEST'
                class='block bold'>
                MAXIMUM_MS_BETWEEN_SNIPPET_REQUEST
              </a>
              <a
                href='#messages_complete'
                class='block bold'>
                messages_complete
              </a>
              <a
                href='#messagesSlice'
                class='block bold'>
                messagesSlice
              </a>
              <a
                href='#mimeToClass'
                class='block bold'>
                mimeToClass
              </a>
              <a
                href='#MINIMUM_ITEMS_FOR_SCROLL_CALC'
                class='block bold'>
                MINIMUM_ITEMS_FOR_SCROLL_CALC
              </a>
              <a
                href='#mix'
                class='block bold'>
                mix
              </a>
              <a
                href='#mixin'
                class='block bold'>
                mixin
              </a>
              <a
                href='#nodes'
                class='block bold'>
                nodes
              </a>
              <a
                href='#nodesDataIndices'
                class='block bold'>
                nodesDataIndices
              </a>
              <a
                href='#nodesIndex'
                class='block bold'>
                nodesIndex
              </a>
              <a
                href='#normalize'
                class='block bold'>
                normalize
              </a>
              <a
                href='#oauth2Fetch'
                class='block bold'>
                oauth2Fetch
              </a>
              <a
                href='#oldListSize'
                class='block bold'>
                oldListSize
              </a>
              <a
                href='#onAccountsSplice'
                class='block bold'>
                onAccountsSplice
              </a>
              <a
                href='#onActivityRequest'
                class='block bold'>
                onActivityRequest
              </a>
              <a
                href='#onAddressInput'
                class='block bold'>
                onAddressInput
              </a>
              <a
                href='#onAddressKeydown'
                class='block bold'>
                onAddressKeydown
              </a>
              <a
                href='#onBack'
                class='block bold'>
                onBack
              </a>
              <a
                href='#onbackgroundsendstatus'
                class='block bold'>
                onbackgroundsendstatus
              </a>
              <a
                href='#onBrowserComplete'
                class='block bold'>
                onBrowserComplete
              </a>
              <a
                href='#onCardVisible'
                class='block bold'>
                onCardVisible
              </a>
              <a
                href='#onCardVisible'
                class='block bold'>
                onCardVisible
              </a>
              <a
                href='#onClickAccount'
                class='block bold'>
                onClickAccount
              </a>
              <a
                href='#onClickMessage'
                class='block bold'>
                onClickMessage
              </a>
              <a
                href='#onCurrentCardDocumentVisibilityChange'
                class='block bold'>
                onCurrentCardDocumentVisibilityChange
              </a>
              <a
                href='#onCurrentCardDocumentVisibilityChange'
                class='block bold'>
                onCurrentCardDocumentVisibilityChange
              </a>
              <a
                href='#onCurrentMessage'
                class='block bold'>
                onCurrentMessage
              </a>
              <a
                href='#onCurrentMessage'
                class='block bold'>
                onCurrentMessage
              </a>
              <a
                href='#onDocumentEvent'
                class='block bold'>
                onDocumentEvent
              </a>
              <a
                href='#onEnvelopeClick'
                class='block bold'>
                onEnvelopeClick
              </a>
              <a
                href='#onFocus'
                class='block bold'>
                onFocus
              </a>
              <a
                href='#onFolderPickerClosing'
                class='block bold'>
                onFolderPickerClosing
              </a>
              <a
                href='#onFolderShown'
                class='block bold'>
                onFolderShown
              </a>
              <a
                href='#onInput'
                class='block bold'>
                onInput
              </a>
              <a
                href='#onLatestFolder'
                class='block bold'>
                onLatestFolder
              </a>
              <a
                href='#onMatchClick'
                class='block bold'>
                onMatchClick
              </a>
              <a
                href='#onMessagesSpliceRemove'
                class='block bold'>
                onMessagesSpliceRemove
              </a>
              <a
                href='#onNext'
                class='block bold'>
                onNext
              </a>
              <a
                href='#onPrevious'
                class='block bold'>
                onPrevious
              </a>
              <a
                href='#onReady'
                class='block bold'>
                onReady
              </a>
              <a
                href='#onResize'
                class='block bold'>
                onResize
              </a>
              <a
                href='#onSend'
                class='block bold'>
                onSend
              </a>
              <a
                href='#onUsePassword'
                class='block bold'>
                onUsePassword
              </a>
              <a
                href='#parseName'
                class='block bold'>
                parseName
              </a>
              <a
                href='#useXhr'
                class='block bold'>
                useXhr
              </a>
              <a
                href='#populateEditor'
                class='block bold'>
                populateEditor
              </a>
              <a
                href='#positionAndHide'
                class='block bold'>
                positionAndHide
              </a>
              <a
                href='#positionElements'
                class='block bold'>
                positionElements
              </a>
              <a
                href='#proceed'
                class='block bold'>
                proceed
              </a>
              <a
                href='#reallySend'
                class='block bold'>
                reallySend
              </a>
              <a
                href='#redeemCode'
                class='block bold'>
                redeemCode
              </a>
              <a
                href='#relativeDateElement'
                class='block bold'>
                relativeDateElement
              </a>
              <a
                href='#setPrettyNodeDate'
                class='block bold'>
                setPrettyNodeDate
              </a>
              <a
                href='#removeMessagesHtml'
                class='block bold'>
                removeMessagesHtml
              </a>
              <a
                href='#renderAttachments'
                class='block bold'>
                renderAttachments
              </a>
              <a
                href='#renderSendStatus'
                class='block bold'>
                renderSendStatus
              </a>
              <a
                href='#require'
                class='block bold'>
                require
              </a>
              <a
                href='#require'
                class='block bold'>
                require
              </a>
              <a
                href='#require'
                class='block bold'>
                require
              </a>
              <a
                href='#requirejs'
                class='block bold'>
                requirejs
              </a>
              <a
                href='#resetNodeForCache'
                class='block bold'>
                resetNodeForCache
              </a>
              <a
                href='#showNewEmailCount'
                class='block bold'>
                showNewEmailCount
              </a>
              <a
                href='#retrieve'
                class='block bold'>
                retrieve
              </a>
              <a
                href='#runQuery'
                class='block bold'>
                runQuery
              </a>
              <a
                href='#runThrottledQuery'
                class='block bold'>
                runThrottledQuery
              </a>
              <a
                href='#setCurrentMessage'
                class='block bold'>
                setCurrentMessage
              </a>
              <a
                href='#setCurrentMessageBySuid'
                class='block bold'>
                setCurrentMessageBySuid
              </a>
              <a
                href='#setEditMode'
                class='block bold'>
                setEditMode
              </a>
              <a
                href='#setPropFromAttr'
                class='block bold'>
                setPropFromAttr
              </a>
              <a
                href='#setRefreshState'
                class='block bold'>
                setRefreshState
              </a>
              <a
                href='#setTop'
                class='block bold'>
                setTop
              </a>
              <a
                href='#show'
                class='block bold'>
                show
              </a>
              <a
                href='#showAccounts'
                class='block bold'>
                showAccounts
              </a>
              <a
                href='#showEmptyLayout'
                class='block bold'>
                showEmptyLayout
              </a>
              <a
                href='#showFolder'
                class='block bold'>
                showFolder
              </a>
              <a
                href='#showLargeMessageWarning'
                class='block bold'>
                showLargeMessageWarning
              </a>
              <a
                href='#sizeLastSync'
                class='block bold'>
                sizeLastSync
              </a>
              <a
                href='#skipEmitContentEvents'
                class='block bold'>
                skipEmitContentEvents
              </a>
              <a
                href='#skipEmitContentEvents'
                class='block bold'>
                skipEmitContentEvents
              </a>
              <a
                href='#skipEmitContentEvents'
                class='block bold'>
                skipEmitContentEvents
              </a>
              <a
                href='#sliceEvents'
                class='block bold'>
                sliceEvents
              </a>
              <a
                href='#startupData'
                class='block bold'>
                startupData
              </a>
              <a
                href='#subject'
                class='block bold'>
                subject
              </a>
              <a
                href='#templateCreatedCallback'
                class='block bold'>
                templateCreatedCallback
              </a>
              <a
                href='#toggleOutboxSyncingDisplay'
                class='block bold'>
                toggleOutboxSyncingDisplay
              </a>
              <a
                href='#toggleSelection'
                class='block bold'>
                toggleSelection
              </a>
              <a
                href='#toObject'
                class='block bold'>
                toObject
              </a>
              <a
                href='#topUniqueFromNames'
                class='block bold'>
                topUniqueFromNames
              </a>
              <a
                href='#toUrl'
                class='block bold'>
                toUrl
              </a>
              <a
                href='#trimDots'
                class='block bold'>
                trimDots
              </a>
              <a
                href='#updateAccount'
                class='block bold'>
                updateAccount
              </a>
              <a
                href='#updateAttachmentsAriaLabel'
                class='block bold'>
                updateAttachmentsAriaLabel
              </a>
              <a
                href='#updateAttachmentsSize'
                class='block bold'>
                updateAttachmentsSize
              </a>
              <a
                href='#updateDomEditControls'
                class='block bold'>
                updateDomEditControls
              </a>
              <a
                href='#updateDomMessageChecked'
                class='block bold'>
                updateDomMessageChecked
              </a>
              <a
                href='#updateDomSelectState'
                class='block bold'>
                updateDomSelectState
              </a>
              <a
                href='#updateMessageDom'
                class='block bold'>
                updateMessageDom
              </a>
              <a
                href='#validateAddresses'
                class='block bold'>
                validateAddresses
              </a>
              <a
                href='#verticalSpace'
                class='block bold'>
                verticalSpace
              </a>
              <a
                href='#visibleOffset'
                class='block bold'>
                visibleOffset
              </a>
              <a
                href='#zoomFrame'
                class='block bold'>
                zoomFrame
              </a>
          </div>
        </div>
      </div>
      <div class='fix-margin-3'>
        <div class='px2'>
<div class='py1'><section class='py2 clearfix'>
  <h2 id='cards' class='mt0'>
    cards<span class='gray'></span>
  </h2>
  <p>Fairly simple card abstraction with support for simple horizontal animated
transitions.  We are cribbing from deuxdrop&apos;s mobile UI&apos;s cards.js
implementation created jrburke.</p>

      <h4>Static members</h4>
        <div class='collapsible' id='cards._animatingDeadDomNodes'>
          <a href='#cards._animatingDeadDomNodes'>
            <code>
              ._animatingDeadDomNodes<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>The DOM nodes that should be removed from their parent when our current
transition ends.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards._animatingDeadDomNodes' class='mt0'>
                _animatingDeadDomNodes<span class='gray'></span>
              </h2>
              <p>The DOM nodes that should be removed from their parent when our current
            transition ends.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards._cardsNode'>
          <a href='#cards._cardsNode'>
            <code>
              ._cardsNode<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>The &quot;#cards&quot; node that holds the cards; it is as wide as all of the cards
it contains and has its left offset changed in order to change what card
is visible.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards._cardsNode' class='mt0'>
                _cardsNode<span class='gray'></span>
              </h2>
              <p>The &quot;#cards&quot; node that holds the cards; it is as wide as all of the cards
            it contains and has its left offset changed in order to change what card
            is visible.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards._containerNode'>
          <a href='#cards._containerNode'>
            <code>
              ._containerNode<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>The &quot;#cardContainer&quot; node which serves as the scroll container for the
contained _cardsNode (&quot;#cards&quot;).  It is as wide as the viewport.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards._containerNode' class='mt0'>
                _containerNode<span class='gray'></span>
              </h2>
              <p>The &quot;#cardContainer&quot; node which serves as the scroll container for the
            contained _cardsNode (&quot;#cards&quot;).  It is as wide as the viewport.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards._eatingEventsUntilNextCard'>
          <a href='#cards._eatingEventsUntilNextCard'>
            <code>
              ._eatingEventsUntilNextCard<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Are we eating all click events we see until we transition to the next
card (possibly due to a call to pushCard that has not yet occurred?).
Set by calling <code>eatEventsUntilNextCard</code>.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards._eatingEventsUntilNextCard' class='mt0'>
                _eatingEventsUntilNextCard<span class='gray'></span>
              </h2>
              <p>Are we eating all click events we see until we transition to the next
            card (possibly due to a call to pushCard that has not yet occurred?).
            Set by calling <code>eatEventsUntilNextCard</code>.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards._emitStartupEvents'>
          <a href='#cards._emitStartupEvents'>
            <code>
              ._emitStartupEvents<span class='gray'>(skipEmitContentEvents)</span>
            </code>
            <div class='force-inline'>
              <p>Handles emitting startup events used for performance tracking.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards._emitStartupEvents' class='mt0'>
                _emitStartupEvents<span class='gray'>(skipEmitContentEvents)</span>
              </h2>
              <p>Handles emitting startup events used for performance tracking.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code> <strong>skipEmitContentEvents</strong>
                      :
                      <div class='force-inline'>
                        <p>if content events should be skipped
            because the card itself handles it.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards._onCardVisible'>
          <a href='#cards._onCardVisible'>
            <code>
              ._onCardVisible<span class='gray'>(domNode)</span>
            </code>
            <div class='force-inline'>
              <p>Handles final notification of card visibility in the stack.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards._onCardVisible' class='mt0'>
                _onCardVisible<span class='gray'>(domNode)</span>
              </h2>
              <p>Handles final notification of card visibility in the stack.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code>Card</code> <strong>domNode</strong>
                      :
                      <div class='force-inline'>
                        <p>the card instance.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards._onMaybeIntercept'>
          <a href='#cards._onMaybeIntercept'>
            <code>
              ._onMaybeIntercept<span class='gray'>(event)</span>
            </code>
            <div class='force-inline'>
              <p>If the tray is active and a click happens in the tray area, transition
back to the visible thing (which must be to our right currently.)</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards._onMaybeIntercept' class='mt0'>
                _onMaybeIntercept<span class='gray'>(event)</span>
              </h2>
              <p>If the tray is active and a click happens in the tray area, transition
            back to the visible thing (which must be to our right currently.)</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li> <strong>event</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards._popupActive'>
          <a href='#cards._popupActive'>
            <code>
              ._popupActive<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Is a popup visible, suggesting that any click that is not on the popup
should be taken as a desire to close the popup?  This is not a boolean,
but rather info on the active popup.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards._popupActive' class='mt0'>
                _popupActive<span class='gray'></span>
              </h2>
              <p>Is a popup visible, suggesting that any click that is not on the popup
            should be taken as a desire to close the popup?  This is not a boolean,
            but rather info on the active popup.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards._rootNode'>
          <a href='#cards._rootNode'>
            <code>
              ._rootNode<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>The DOM node that contains the _containerNode (&quot;#cardContainer&quot;) and which
we inject popup and masking layers into.  The choice of doing the popup
stuff at this layer is arbitrary.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards._rootNode' class='mt0'>
                _rootNode<span class='gray'></span>
              </h2>
              <p>The DOM node that contains the _containerNode (&quot;#cardContainer&quot;) and which
            we inject popup and masking layers into.  The choice of doing the popup
            stuff at this layer is arbitrary.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards._startupEventsEmitted'>
          <a href='#cards._startupEventsEmitted'>
            <code>
              ._startupEventsEmitted<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Tracks if startup events have been emitted. The events only need to be
emitted once.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards._startupEventsEmitted' class='mt0'>
                _startupEventsEmitted<span class='gray'></span>
              </h2>
              <p>Tracks if startup events have been emitted. The events only need to be
            emitted once.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards._transitionCount'>
          <a href='#cards._transitionCount'>
            <code>
              ._transitionCount<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Tracks the number of transition events per card animation. Since each
animation ends up with two transitionend events since two cards are
moving, need to wait for the last one to be finished before doing
cleanup, like DOM removal.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards._transitionCount' class='mt0'>
                _transitionCount<span class='gray'></span>
              </h2>
              <p>Tracks the number of transition events per card animation. Since each
            animation ends up with two transitionend events since two cards are
            moving, need to wait for the last one to be finished before doing
            cleanup, like DOM removal.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards._zIndex'>
          <a href='#cards._zIndex'>
            <code>
              ._zIndex<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Cards can stack on top of each other, make sure the stacked set is
visible over the lower sets.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards._zIndex' class='mt0'>
                _zIndex<span class='gray'></span>
              </h2>
              <p>Cards can stack on top of each other, make sure the stacked set is
            visible over the lower sets.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards.assertNoCards'>
          <a href='#cards.assertNoCards'>
            <code>
              .assertNoCards<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>If there are any cards on the deck right now, log an error and clear them
all out.  Our caller is strongly asserting that there should be no cards
and the presence of any indicates a bug.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards.assertNoCards' class='mt0'>
                assertNoCards<span class='gray'></span>
              </h2>
              <p>If there are any cards on the deck right now, log an error and clear them
            all out.  Our caller is strongly asserting that there should be no cards
            and the presence of any indicates a bug.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards.eatEventsUntilNextCard'>
          <a href='#cards.eatEventsUntilNextCard'>
            <code>
              .eatEventsUntilNextCard<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Helper that causes (some) events targeted at our cards to be eaten until
we get to the next card.  The idea is to avoid bugs caused by the user
still being able to click things while our cards are transitioning or
while we are performing a (reliable) async wait before we actually initiate
a pushCard in response to user stimulus.</p>
<p>This is automatically triggered when performing an animated transition;
other code should only call this in the async wait case mentioned above.</p>
<p>For example, we don&apos;t want the user to have 2 message readers happening
at the same time because they managed to click on a second message before
the first reader got displayed.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards.eatEventsUntilNextCard' class='mt0'>
                eatEventsUntilNextCard<span class='gray'></span>
              </h2>
              <p>Helper that causes (some) events targeted at our cards to be eaten until
            we get to the next card.  The idea is to avoid bugs caused by the user
            still being able to click things while our cards are transitioning or
            while we are performing a (reliable) async wait before we actually initiate
            a pushCard in response to user stimulus.</p>
            <p>This is automatically triggered when performing an animated transition;
            other code should only call this in the async wait case mentioned above.</p>
            <p>For example, we don&apos;t want the user to have 2 message readers happening
            at the same time because they managed to click on a second message before
            the first reader got displayed.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards.init'>
          <a href='#cards.init'>
            <code>
              .init<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Initialize and bind ourselves to the DOM which should now be fully loaded.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards.init' class='mt0'>
                init<span class='gray'></span>
              </h2>
              <p>Initialize and bind ourselves to the DOM which should now be fully loaded.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards.pushCard'>
          <a href='#cards.pushCard'>
            <code>
              .pushCard<span class='gray'>(type, showMethod, args, placement)</span>
            </code>
            <div class='force-inline'>
              <p>Push a card onto the card-stack.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards.pushCard' class='mt0'>
                pushCard<span class='gray'>(type, showMethod, args, placement)</span>
              </h2>
              <p>Push a card onto the card-stack.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li> <strong>type</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li> <strong>showMethod</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li> <strong>args</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li> <strong>placement</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards.pushOrTellCard'>
          <a href='#cards.pushOrTellCard'>
            <code>
              .pushOrTellCard<span class='gray'>(type, showMethod, args, placement)</span>
            </code>
            <div class='force-inline'>
              <p>Pushes a new card if none exists, otherwise, uses existing
card and passes args to that card via tellCard. Arguments
are the same as pushCard.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards.pushOrTellCard' class='mt0'>
                pushOrTellCard<span class='gray'>(type, showMethod, args, placement)</span>
              </h2>
              <p>Pushes a new card if none exists, otherwise, uses existing
            card and passes args to that card via tellCard. Arguments
            are the same as pushCard.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li> <strong>type</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li> <strong>showMethod</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li> <strong>args</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li> <strong>placement</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>true if card was pushed.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards.removeAllCards'>
          <a href='#cards.removeAllCards'>
            <code>
              .removeAllCards<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Shortcut for removing all the cards</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards.removeAllCards' class='mt0'>
                removeAllCards<span class='gray'></span>
              </h2>
              <p>Shortcut for removing all the cards</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards.removeCardAndSuccessors'>
          <a href='#cards.removeCardAndSuccessors'>
            <code>
              .removeCardAndSuccessors<span class='gray'>(cardDomNode, showMethod, numCards, nextCardSpec, skipDefault)</span>
            </code>
            <div class='force-inline'>
              <p>Remove the card identified by its DOM node and all the cards to its right.
Pass null to remove all of the cards! If cardDomNode passed, but there
are no cards before it, cards.getDefaultCard is called to set up a before
card.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards.removeCardAndSuccessors' class='mt0'>
                removeCardAndSuccessors<span class='gray'>(cardDomNode, showMethod, numCards, nextCardSpec, skipDefault)</span>
              </h2>
              <p>Remove the card identified by its DOM node and all the cards to its right.
            Pass null to remove all of the cards! If cardDomNode passed, but there
            are no cards before it, cards.getDefaultCard is called to set up a before
            card.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li> <strong>cardDomNode</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li> <strong>showMethod</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li> <strong>numCards</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li> <strong>nextCardSpec</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li> <strong>skipDefault</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards.setStatusColor'>
          <a href='#cards.setStatusColor'>
            <code>
              .setStatusColor<span class='gray'>([element])</span>
            </code>
            <div class='force-inline'>
              <p>Sets the status bar color. The element, or any of its children, can specify
the color by setting data-statuscolor to one of the following values:</p>
<ul>
<li>default: uses the default data-statuscolor set on the meta theme-color
tag is used.</li>
<li>background: the CSS background color, via getComputedStyle, is used. This
is useful if the background that is desired is not the one from the element
itself, but from one of its children.</li>
<li>a specific color value.</li>
</ul>
<p>If no data-statuscolor attribute is found, then the background color for
the element, via getComputedStyle, is used. If that value is not a valid
color value, then the default statuscolor on the meta tag is used.</p>
<p>Note that this method uses getComputedStyle. This could be expensive
depending on when it is called. For the card infrastructure, since it is
done as part of a card transition, and done before the card transition code
applies transition styles, the target element should not be visible at the
time of the query. In practice no negligble end user effect has been seen,
and that query is much more desirable than hardcoding colors in JS or HTML.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards.setStatusColor' class='mt0'>
                setStatusColor<span class='gray'>([element])</span>
              </h2>
              <p>Sets the status bar color. The element, or any of its children, can specify
            the color by setting data-statuscolor to one of the following values:</p>
            <ul>
            <li>default: uses the default data-statuscolor set on the meta theme-color
            tag is used.</li>
            <li>background: the CSS background color, via getComputedStyle, is used. This
            is useful if the background that is desired is not the one from the element
            itself, but from one of its children.</li>
            <li>a specific color value.</li>
            </ul>
            <p>If no data-statuscolor attribute is found, then the background color for
            the element, via getComputedStyle, is used. If that value is not a valid
            color value, then the default statuscolor on the meta tag is used.</p>
            <p>Note that this method uses getComputedStyle. This could be expensive
            depending on when it is called. For the card infrastructure, since it is
            done as part of a card transition, and done before the card transition code
            applies transition styles, the target element should not be visible at the
            time of the query. In practice no negligble end user effect has been seen,
            and that query is much more desirable than hardcoding colors in JS or HTML.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element">Element</a></code>]</code> <strong>element</strong>
                      :
                      <div class='force-inline'>
                        <p>the card element of interest. If no element is
            passed, the the current card is used.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='cards.stopEatingEvents'>
          <a href='#cards.stopEatingEvents'>
            <code>
              .stopEatingEvents<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Stop eating events, presumably because eatEventsUntilNextCard was used
as a hack for a known-fast async operation to avoid bugs (where we knew
full well that we weren&apos;t going to show a card).</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='cards.stopEatingEvents' class='mt0'>
                stopEatingEvents<span class='gray'></span>
              </h2>
              <p>Stop eating events, presumably because eatEventsUntilNextCard was used
            as a hack for a known-fast async operation to avoid bugs (where we knew
            full well that we weren&apos;t going to show a card).</p>
            
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_bindPrefs' class='mt0'>
    _bindPrefs<span class='gray'>(checkIntervalClassName, notifyEmailClassName, soundOnSendClassName, signatureEnabledClassName, signatureButtonClassName)</span>
  </h2>
  <p>mixin properties for cards that share similar actions around the account
preferences.
ASSUMES the following properties have been initialized on the object</p>
<ul>
<li>this.account</li>
<li>this.identity</li>
</ul>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>checkIntervalClassName</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>notifyEmailClassName</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>soundOnSendClassName</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>signatureEnabledClassName</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>signatureButtonClassName</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='FontSizeUtils' class='mt0'>
    FontSizeUtils<span class='gray'>(fontSize, fontFamily, fontStyle)</span>
  </h2>
  <p>Utility functions for measuring and manipulating font sizes</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>fontSize</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>fontFamily</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>fontStyle</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Static members</h4>
        <div class='collapsible' id='FontSizeUtils._cachedContexts'>
          <a href='#FontSizeUtils._cachedContexts'>
            <code>
              ._cachedContexts<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Keep a cache of canvas contexts with a given font.
We do this because it is faster to create new canvases
than to re-set the font on existing contexts repeatedly.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils._cachedContexts' class='mt0'>
                _cachedContexts<span class='gray'></span>
              </h2>
              <p>Keep a cache of canvas contexts with a given font.
            We do this because it is faster to create new canvases
            than to re-set the font on existing contexts repeatedly.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils._getCachedContext'>
          <a href='#FontSizeUtils._getCachedContext'>
            <code>
              ._getCachedContext<span class='gray'>(fontSize, fontFamily, fontStyle)</span>
            </code>
            <div class='force-inline'>
              <p>Grab or create a cached canvas context for a given fontSize/family pair.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils._getCachedContext' class='mt0'>
                _getCachedContext<span class='gray'>(fontSize, fontFamily, fontStyle)</span>
              </h2>
              <p>Grab or create a cached canvas context for a given fontSize/family pair.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code>Integer</code> <strong>fontSize</strong>
                      :
                      <div class='force-inline'>
                        <p>The font size of the canvas we want.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>fontFamily</strong>
                      :
                      <div class='force-inline'>
                        <p>The font family of the canvas we want.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>fontStyle</strong>
                      :
                      <div class='force-inline'>
                        <p>The style of the font (default to italic).</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D">CanvasRenderingContext2D</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>A context with the specified font.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils._getTextChangeObserver'>
          <a href='#FontSizeUtils._getTextChangeObserver'>
            <code>
              ._getTextChangeObserver<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Singleton-like interface for getting our text change observer.
By reusing the observer, we make sure we only ever attach a
single observer to any given element we are interested in.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils._getTextChangeObserver' class='mt0'>
                _getTextChangeObserver<span class='gray'></span>
              </h2>
              <p>Singleton-like interface for getting our text change observer.
            By reusing the observer, we make sure we only ever attach a
            single observer to any given element we are interested in.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils._handleTextChanges'>
          <a href='#FontSizeUtils._handleTextChanges'>
            <code>
              ._handleTextChanges<span class='gray'>(mutations)</span>
            </code>
            <div class='force-inline'>
              <p>Auto resize all text changes.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils._handleTextChanges' class='mt0'>
                _handleTextChanges<span class='gray'>(mutations)</span>
              </h2>
              <p>Auto resize all text changes.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code> <strong>mutations</strong>
                      :
                      <div class='force-inline'>
                        <p>A MutationRecord list.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils._observeHeaderChanges'>
          <a href='#FontSizeUtils._observeHeaderChanges'>
            <code>
              ._observeHeaderChanges<span class='gray'>(element)</span>
            </code>
            <div class='force-inline'>
              <p>Perform auto-resize when textContent changes on element.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils._observeHeaderChanges' class='mt0'>
                _observeHeaderChanges<span class='gray'>(element)</span>
              </h2>
              <p>Perform auto-resize when textContent changes on element.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element">HTMLElement</a></code> <strong>element</strong>
                      :
                      <div class='force-inline'>
                        <p>The element to observer for changes</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils._overflowCountCache'>
          <a href='#FontSizeUtils._overflowCountCache'>
            <code>
              ._overflowCountCache<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Last result of the overflow count computation. Every time we recompute
the overflow count we start from this value; if the string is larger
than the previous one this will cut down the number of computations, if
not we restart from 0.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils._overflowCountCache' class='mt0'>
                _overflowCountCache<span class='gray'></span>
              </h2>
              <p>Last result of the overflow count computation. Every time we recompute
            the overflow count we start from this value; if the string is larger
            than the previous one this will cut down the number of computations, if
            not we restart from 0.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils._reformatHeaderText'>
          <a href='#FontSizeUtils._reformatHeaderText'>
            <code>
              ._reformatHeaderText<span class='gray'>(header)</span>
            </code>
            <div class='force-inline'>
              <p>Resize and reposition the header text based on string length and
container position.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils._reformatHeaderText' class='mt0'>
                _reformatHeaderText<span class='gray'>(header)</span>
              </h2>
              <p>Resize and reposition the header text based on string length and
            container position.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element">HTMLElement</a></code> <strong>header</strong>
                      :
                      <div class='force-inline'>
                        <p>h1 text inside header to reformat.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils._registerHeadersInSubtree'>
          <a href='#FontSizeUtils._registerHeadersInSubtree'>
            <code>
              ._registerHeadersInSubtree<span class='gray'>(domNode)</span>
            </code>
            <div class='force-inline'>
              <p>Reformat all the headers located inside a DOM node, and add mutation
observer to reformat when any changes are made.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils._registerHeadersInSubtree' class='mt0'>
                _registerHeadersInSubtree<span class='gray'>(domNode)</span>
              </h2>
              <p>Reformat all the headers located inside a DOM node, and add mutation
            observer to reformat when any changes are made.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element">HTMLElement</a></code> <strong>domNode</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils._textChangeObserver'>
          <a href='#FontSizeUtils._textChangeObserver'>
            <code>
              ._textChangeObserver<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Use a single observer for all text changes we are interested in.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils._textChangeObserver' class='mt0'>
                _textChangeObserver<span class='gray'></span>
              </h2>
              <p>Use a single observer for all text changes we are interested in.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils.autoResizeElement'>
          <a href='#FontSizeUtils.autoResizeElement'>
            <code>
              .autoResizeElement<span class='gray'>(element, styleOptions)</span>
            </code>
            <div class='force-inline'>
              <p>Auto resize element&apos;s font to fit its content width.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils.autoResizeElement' class='mt0'>
                autoResizeElement<span class='gray'>(element, styleOptions)</span>
              </h2>
              <p>Auto resize element&apos;s font to fit its content width.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element">HTMLElement</a></code> <strong>element</strong>
                      :
                      <div class='force-inline'>
                        <p>The element to perform auto-resize on.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>styleOptions</strong>
                      :
                      <div class='force-inline'>
                        <p>Dictionary containing cached style props,
            to avoid reflows caused by grabbing style properties.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code>Integer</code></code>
                  :
                  <div class='force-inline'>
                    <p>The pixel width of the resized text.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils.centerTextToScreen'>
          <a href='#FontSizeUtils.centerTextToScreen'>
            <code>
              .centerTextToScreen<span class='gray'>(element, styleOptions)</span>
            </code>
            <div class='force-inline'>
              <p>Center an elements text based on screen position rather than container.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils.centerTextToScreen' class='mt0'>
                centerTextToScreen<span class='gray'>(element, styleOptions)</span>
              </h2>
              <p>Center an elements text based on screen position rather than container.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element">HTMLElement</a></code> <strong>element</strong>
                      :
                      <div class='force-inline'>
                        <p>The element whose text we want to center.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>styleOptions</strong>
                      :
                      <div class='force-inline'>
                        <p>Dictionary containing cached style props,
            avoids reflows caused by caching style properties.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils.getAllowedSizes'>
          <a href='#FontSizeUtils.getAllowedSizes'>
            <code>
              .getAllowedSizes<span class='gray'>(element)</span>
            </code>
            <div class='force-inline'>
              <p>Get an array of allowed font sizes for an element</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils.getAllowedSizes' class='mt0'>
                getAllowedSizes<span class='gray'>(element)</span>
              </h2>
              <p>Get an array of allowed font sizes for an element</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element">HTMLElement</a></code> <strong>element</strong>
                      :
                      <div class='force-inline'>
                        <p>The element to get allowed sizes for.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>An array containing pizels values of allowed sizes.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils.getContentWidth'>
          <a href='#FontSizeUtils.getContentWidth'>
            <code>
              .getContentWidth<span class='gray'>(HTML, style)</span>
            </code>
            <div class='force-inline'>
              <p>Get an element&apos;s content width disregarding its box model sizing.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils.getContentWidth' class='mt0'>
                getContentWidth<span class='gray'>(HTML, style)</span>
              </h2>
              <p>Get an element&apos;s content width disregarding its box model sizing.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element">HTMLElement</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>HTML</strong>
                      :
                      <div class='force-inline'>
                        <p>element, or style object.</p>
            
                      </div>
                    </li>
                    <li> <strong>style</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>width in pixels of elements content.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils.getFontWidth'>
          <a href='#FontSizeUtils.getFontWidth'>
            <code>
              .getFontWidth<span class='gray'>(string, fontSize, fontFamily, fontStyle)</span>
            </code>
            <div class='force-inline'>
              <p>Get the width of a string in pixels, given its fontSize and fontFamily.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils.getFontWidth' class='mt0'>
                getFontWidth<span class='gray'>(string, fontSize, fontFamily, fontStyle)</span>
              </h2>
              <p>Get the width of a string in pixels, given its fontSize and fontFamily.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>string</strong>
                      :
                      <div class='force-inline'>
                        <p>The string we are measuring.</p>
            
                      </div>
                    </li>
                    <li><code>Integer</code> <strong>fontSize</strong>
                      :
                      <div class='force-inline'>
                        <p>The size of the font to measure against.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>fontFamily</strong>
                      :
                      <div class='force-inline'>
                        <p>The font family to measure against.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>fontStyle</strong>
                      :
                      <div class='force-inline'>
                        <p>The style of the font (default to italic).</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code>Integer</code></code>
                  :
                  <div class='force-inline'>
                    <p>The pixel width of the string with the given font.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils.getMaxFontSizeInfo'>
          <a href='#FontSizeUtils.getMaxFontSizeInfo'>
            <code>
              .getMaxFontSizeInfo<span class='gray'>(string, allowedSizes, fontFamily, maxWidth)</span>
            </code>
            <div class='force-inline'>
              <p>Get the maximum allowable fontSize for a string such that it will
not overflow past a maximum width.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils.getMaxFontSizeInfo' class='mt0'>
                getMaxFontSizeInfo<span class='gray'>(string, allowedSizes, fontFamily, maxWidth)</span>
              </h2>
              <p>Get the maximum allowable fontSize for a string such that it will
            not overflow past a maximum width.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>string</strong>
                      :
                      <div class='force-inline'>
                        <p>The string for which to check max font size.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code> <strong>allowedSizes</strong>
                      :
                      <div class='force-inline'>
                        <p>A list of fontSizes allowed.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>fontFamily</strong>
                      :
                      <div class='force-inline'>
                        <p>The font family of the string we&apos;re measuring.</p>
            
                      </div>
                    </li>
                    <li><code>Integer</code> <strong>maxWidth</strong>
                      :
                      <div class='force-inline'>
                        <p>The maximum number of pixels before overflow.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>Dict containing fontSize, overflow and textWidth.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils.getOverflowCount'>
          <a href='#FontSizeUtils.getOverflowCount'>
            <code>
              .getOverflowCount<span class='gray'>(string, fontSize, fontFamily, maxWidth)</span>
            </code>
            <div class='force-inline'>
              <p>Get the amount of characters truncated from overflow ellipses.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils.getOverflowCount' class='mt0'>
                getOverflowCount<span class='gray'>(string, fontSize, fontFamily, maxWidth)</span>
              </h2>
              <p>Get the amount of characters truncated from overflow ellipses.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>string</strong>
                      :
                      <div class='force-inline'>
                        <p>The string for which to check max font size.</p>
            
                      </div>
                    </li>
                    <li><code>Integer</code> <strong>fontSize</strong>
                      :
                      <div class='force-inline'>
                        <p>The font size of the string we are measuring.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>fontFamily</strong>
                      :
                      <div class='force-inline'>
                        <p>The font family of the string we&apos;re measuring.</p>
            
                      </div>
                    </li>
                    <li><code>Integer</code> <strong>maxWidth</strong>
                      :
                      <div class='force-inline'>
                        <p>The maximum number of pixels before overflow.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils.getStyleProperties'>
          <a href='#FontSizeUtils.getStyleProperties'>
            <code>
              .getStyleProperties<span class='gray'>(element)</span>
            </code>
            <div class='force-inline'>
              <p>Get an element&apos;s style properies.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils.getStyleProperties' class='mt0'>
                getStyleProperties<span class='gray'>(element)</span>
              </h2>
              <p>Get an element&apos;s style properies.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element">HTMLElement</a></code> <strong>element</strong>
                      :
                      <div class='force-inline'>
                        <p>The element from which to fetch style.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>A dictionary containing element&apos;s style properties.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils.getWindowWidth'>
          <a href='#FontSizeUtils.getWindowWidth'>
            <code>
              .getWindowWidth<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Cache and return the width of the inner window.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils.getWindowWidth' class='mt0'>
                getWindowWidth<span class='gray'></span>
              </h2>
              <p>Cache and return the width of the inner window.</p>
            
                  <h4>Returns</h4>
                  <code><code>Integer</code></code>
                  :
                  <div class='force-inline'>
                    <p>The width of the inner window in pixels.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils.init'>
          <a href='#FontSizeUtils.init'>
            <code>
              .init<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Initialize the FontSizeUtils, add overflow handler and perform
auto resize once strings have been localized.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils.init' class='mt0'>
                init<span class='gray'></span>
              </h2>
              <p>Initialize the FontSizeUtils, add overflow handler and perform
            auto resize once strings have been localized.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils.resetCache'>
          <a href='#FontSizeUtils.resetCache'>
            <code>
              .resetCache<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Clear any current canvas contexts from the cache.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils.resetCache' class='mt0'>
                resetCache<span class='gray'></span>
              </h2>
              <p>Clear any current canvas contexts from the cache.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='FontSizeUtils.resetCentering'>
          <a href='#FontSizeUtils.resetCentering'>
            <code>
              .resetCentering<span class='gray'>(element)</span>
            </code>
            <div class='force-inline'>
              <p>Reset the auto-centering styling on an element.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='FontSizeUtils.resetCentering' class='mt0'>
                resetCentering<span class='gray'>(element)</span>
              </h2>
              <p>Reset the auto-centering styling on an element.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element">HTMLElement</a></code> <strong>element</strong>
                      :
                      <div class='force-inline'>
                        <p>The element to reset.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_cacheDom' class='mt0'>
    _cacheDom<span class='gray'></span>
  </h2>
  <p>Caches the DOM for this card, but trims it down a bit first.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_cacheDomTimeoutId' class='mt0'>
    _cacheDomTimeoutId<span class='gray'></span>
  </h2>
  <p>Tracks if a DOM cache save is scheduled for later.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_cacheListLimit' class='mt0'>
    _cacheListLimit<span class='gray'></span>
  </h2>
  <p>How many items in the message list to keep for the _cacheDom call.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='VScroll' class='mt0'>
    VScroll<span class='gray'>(container, scrollingContainer, template, defaultData)</span>
  </h2>
  <p>Creates a new VScroll instance. Needs .setData() called on it
to actually show content, the constructor just wires up nodes
and sets starting state.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code> <strong>container</strong>
          :
          <div class='force-inline'>
            <p>the DOM node that will show the items.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code> <strong>scrollingContainer</strong>
          :
          <div class='force-inline'>
            <p>the scrolling DOM node, which
contains the <code>container</code> node. Note that in email, there are
other nodes in the scrollingContainer besides just container.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code> <strong>template</strong>
          :
          <div class='force-inline'>
            <p>a DOM node that is cloned to provide
the DOM node to use for an item that is shown on the screen.
The clones of this node are cached and reused for multiple
data items.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>defaultData</strong>
          :
          <div class='force-inline'>
            <p>a placeholder data object to use
if list(index) does not return an object. Usually shows up when
the scroll gets to a place in the list that does not have data
loaded yet from the back end.</p>

          </div>
        </li>
    </ul>
      <h4>Static members</h4>
        <div class='collapsible' id='VScroll.trimMessagesForCache'>
          <a href='#VScroll.trimMessagesForCache'>
            <code>
              .trimMessagesForCache<span class='gray'>(node, container, itemLimit)</span>
            </code>
            <div class='force-inline'>
              <p>Given a node that is handled by VScroll, trim it down for use
in a string cache, like email&apos;s html cache. Modifies the
node in place.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.trimMessagesForCache' class='mt0'>
                trimMessagesForCache<span class='gray'>(node, container, itemLimit)</span>
              </h2>
              <p>Given a node that is handled by VScroll, trim it down for use
            in a string cache, like email&apos;s html cache. Modifies the
            node in place.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code> <strong>node</strong>
                      :
                      <div class='force-inline'>
                        <p>the containerNode that is bound to
            a VScroll instance.</p>
            
                      </div>
                    </li>
                    <li> <strong>container</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>itemLimit</strong>
                      :
                      <div class='force-inline'>
                        <p>number of items to cache. If greater
            than the length of items in a NodeCache, the NodeCache item
            length will be used.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
      <h4>Instance members</h4>
        <div class='collapsible' id='VScroll._calculateTotalHeight'>
          <a href='#VScroll._calculateTotalHeight'>
            <code>
              #_calculateTotalHeight<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Sets the total height of the container.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll._calculateTotalHeight' class='mt0'>
                _calculateTotalHeight<span class='gray'></span>
              </h2>
              <p>Sets the total height of the container.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll._init'>
          <a href='#VScroll._init'>
            <code>
              #_init<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Handles final initialization, once the VScroll is expected
to actually show data.</p>
<p>XXX eventually consume &apos;resize&apos; events.  Right now we are
assuming that the email app only supports a single orientation
(portrait) and that the only time a resize event will trigger
is if the keyboard is shown or hidden.  When used in the
message_list&apos;s search mode, it explicitly calls _init on us
prior to causing the keyboard to be displayed, which currently
saves us from getting super confused.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll._init' class='mt0'>
                _init<span class='gray'></span>
              </h2>
              <p>Handles final initialization, once the VScroll is expected
            to actually show data.</p>
            <p>XXX eventually consume &apos;resize&apos; events.  Right now we are
            assuming that the email app only supports a single orientation
            (portrait) and that the only time a resize event will trigger
            is if the keyboard is shown or hidden.  When used in the
            message_list&apos;s search mode, it explicitly calls _init on us
            prior to causing the keyboard to be displayed, which currently
            saves us from getting super confused.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll._nextAvailableNode'>
          <a href='#VScroll._nextAvailableNode'>
            <code>
              #_nextAvailableNode<span class='gray'>(beginIndex, endIndex)</span>
            </code>
            <div class='force-inline'>
              <p>Finds the next node in the pool to use in the visible area.
Uses a hidden persistent index to provide efficient lookup for
repeated calls using the same stratIndex/endIndex as long as
there are at least (endIndex - beginIndex + 1) * 2 nodes.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll._nextAvailableNode' class='mt0'>
                _nextAvailableNode<span class='gray'>(beginIndex, endIndex)</span>
              </h2>
              <p>Finds the next node in the pool to use in the visible area.
            Uses a hidden persistent index to provide efficient lookup for
            repeated calls using the same stratIndex/endIndex as long as
            there are at least (endIndex - beginIndex + 1) * 2 nodes.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>beginIndex</strong>
                      :
                      <div class='force-inline'>
                        <p>the starting data index for the
            range of already visible data indices. They should be
            avoided as choices since they are already in visible area.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>endIndex</strong>
                      :
                      <div class='force-inline'>
                        <p>the ending data index for the
            range of already visible data indices.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>the DOM node that can be used next for display.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll._recalculate'>
          <a href='#VScroll._recalculate'>
            <code>
              #_recalculate<span class='gray'>(refIndex)</span>
            </code>
            <div class='force-inline'>
              <p>Recalculates the size of the container, and resets the
display of items in the container. Maintains the scroll
position inside the list.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll._recalculate' class='mt0'>
                _recalculate<span class='gray'>(refIndex)</span>
              </h2>
              <p>Recalculates the size of the container, and resets the
            display of items in the container. Maintains the scroll
            position inside the list.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>refIndex</strong>
                      :
                      <div class='force-inline'>
                        <p>a reference index that spawned
            the recalculate. If that index is &quot;above&quot; the targeted
            computed index found by recalculate, then it means the
            the absolute scroll position may need to change.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll._render'>
          <a href='#VScroll._render'>
            <code>
              #_render<span class='gray'>(startIndex, endIndex)</span>
            </code>
            <div class='force-inline'>
              <p>Ensure that we are rendering at least all messages in the
inclusive range [startIndex, endIndex].  Already rendered
messages outside this range may be reused but will not be
removed or de-rendered unless they are needed.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll._render' class='mt0'>
                _render<span class='gray'>(startIndex, endIndex)</span>
              </h2>
              <p>Ensure that we are rendering at least all messages in the
            inclusive range [startIndex, endIndex].  Already rendered
            messages outside this range may be reused but will not be
            removed or de-rendered unless they are needed.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>startIndex</strong>
                      :
                      <div class='force-inline'>
                        <p>first inclusive index in this.list&apos;s
            data that should be used.  Will be clamped to the bounds of
            this.list but what&apos;s visible on the screen is not considered</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>endIndex</strong>
                      :
                      <div class='force-inline'>
                        <p>last inclusive index in this.list&apos;s
            data that should be used.  Clamped like startIndex.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll._scrollTimeoutPoll'>
          <a href='#VScroll._scrollTimeoutPoll'>
            <code>
              #_scrollTimeoutPoll<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Handles checking for the end of a scroll, based on a time
delay since the last scroll event.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll._scrollTimeoutPoll' class='mt0'>
                _scrollTimeoutPoll<span class='gray'></span>
              </h2>
              <p>Handles checking for the end of a scroll, based on a time
            delay since the last scroll event.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll._startScrollStopPolling'>
          <a href='#VScroll._startScrollStopPolling'>
            <code>
              #_startScrollStopPolling<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Starts checking for the end of scroll events.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll._startScrollStopPolling' class='mt0'>
                _startScrollStopPolling<span class='gray'></span>
              </h2>
              <p>Starts checking for the end of scroll events.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.bindData'>
          <a href='#VScroll.bindData'>
            <code>
              #bindData<span class='gray'>(model, node)</span>
            </code>
            <div class='force-inline'>
              <p>Hook that is implemented by the creator of a VScroll instance.
Called when the VScroll wants to bind a model object to a
display node.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.bindData' class='mt0'>
                bindData<span class='gray'>(model, node)</span>
              </h2>
              <p>Hook that is implemented by the creator of a VScroll instance.
            Called when the VScroll wants to bind a model object to a
            display node.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li> <strong>model</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li> <strong>node</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.clearDisplay'>
          <a href='#VScroll.clearDisplay'>
            <code>
              #clearDisplay<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Removes items from display in the container. Just a visual
change, does not change data in any way. Data-related
elements, like the positions of this.nodes, are reset in
the data entry points that follow a clearDisplay, like
_init() or recalculate().</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.clearDisplay' class='mt0'>
                clearDisplay<span class='gray'></span>
              </h2>
              <p>Removes items from display in the container. Just a visual
            change, does not change data in any way. Data-related
            elements, like the positions of this.nodes, are reset in
            the data entry points that follow a clearDisplay, like
            _init() or recalculate().</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.destroy'>
          <a href='#VScroll.destroy'>
            <code>
              #destroy<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Call this method before the VScroll instance will be destroyed.
Used to clean up the VScroll.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.destroy' class='mt0'>
                destroy<span class='gray'></span>
              </h2>
              <p>Call this method before the VScroll instance will be destroyed.
            Used to clean up the VScroll.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.eventRateLimitMillis'>
          <a href='#VScroll.eventRateLimitMillis'>
            <code>
              #eventRateLimitMillis<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>rate limit for event handler, in milliseconds, so that
it does not do work for every event received. If set to
zero, it means always do the work for every scroll event.
If this code continues to use 0, then the onEvent/onChange
duality could be removed, and just use onChange directly.
A non-zero value, like 50 subjectively seems to result in
more checkerboarding of half the screen every so often.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.eventRateLimitMillis' class='mt0'>
                eventRateLimitMillis<span class='gray'></span>
              </h2>
              <p>rate limit for event handler, in milliseconds, so that
            it does not do work for every event received. If set to
            zero, it means always do the work for every scroll event.
            If this code continues to use 0, then the onEvent/onChange
            duality could be removed, and just use onChange directly.
            A non-zero value, like 50 subjectively seems to result in
            more checkerboarding of half the screen every so often.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.getVisibleIndexRange'>
          <a href='#VScroll.getVisibleIndexRange'>
            <code>
              #getVisibleIndexRange<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Returns the start index and end index of the list items that
are currently visible to the user using the currently cached
scrollTop value.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.getVisibleIndexRange' class='mt0'>
                getVisibleIndexRange<span class='gray'></span>
              </h2>
              <p>Returns the start index and end index of the list items that
            are currently visible to the user using the currently cached
            scrollTop value.</p>
            
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>first and last index. Array could be undefined
            if the VScroll is not in a position to show data yet.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.indexAtScrollPosition'>
          <a href='#VScroll.indexAtScrollPosition'>
            <code>
              #indexAtScrollPosition<span class='gray'>(position)</span>
            </code>
            <div class='force-inline'>
              <p>Determine what data index is at the given scroll position.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.indexAtScrollPosition' class='mt0'>
                indexAtScrollPosition<span class='gray'>(position)</span>
              </h2>
              <p>Determine what data index is at the given scroll position.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>position</strong>
                      :
                      <div class='force-inline'>
                        <p>scroll position</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>the data index.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.itemDefaultDataClass'>
          <a href='#VScroll.itemDefaultDataClass'>
            <code>
              #itemDefaultDataClass<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>The class to find items that have their default data set,
in the case where a scroll into a cache has skipped updates
because a previous fast scroll skipped the updates since they
were not visible at the time of that fast scroll.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.itemDefaultDataClass' class='mt0'>
                itemDefaultDataClass<span class='gray'></span>
              </h2>
              <p>The class to find items that have their default data set,
            in the case where a scroll into a cache has skipped updates
            because a previous fast scroll skipped the updates since they
            were not visible at the time of that fast scroll.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.itemsPerScreen'>
          <a href='#VScroll.itemsPerScreen'>
            <code>
              #itemsPerScreen<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>The maximum number of items visible on the screen at once
(derived from available space and rounded up).</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.itemsPerScreen' class='mt0'>
                itemsPerScreen<span class='gray'></span>
              </h2>
              <p>The maximum number of items visible on the screen at once
            (derived from available space and rounded up).</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.jumpToIndex'>
          <a href='#VScroll.jumpToIndex'>
            <code>
              #jumpToIndex<span class='gray'>(index)</span>
            </code>
            <div class='force-inline'>
              <p>Given the list index, scroll to the top of that item.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.jumpToIndex' class='mt0'>
                jumpToIndex<span class='gray'>(index)</span>
              </h2>
              <p>Given the list index, scroll to the top of that item.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>index</strong>
                      :
                      <div class='force-inline'>
                        <p>the list item index.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.lastScrollTopSetTime'>
          <a href='#VScroll.lastScrollTopSetTime'>
            <code>
              #lastScrollTopSetTime<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Track when the last time vscroll manually changed the scrollTop
of the scrolling container. Useful for when knowing if a recent
scroll event was triggered by this component or by user action.
The value resets to 0 periodically to avoid interested code from
doing too many timestamp checks on every scroll event.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.lastScrollTopSetTime' class='mt0'>
                lastScrollTopSetTime<span class='gray'></span>
              </h2>
              <p>Track when the last time vscroll manually changed the scrollTop
            of the scrolling container. Useful for when knowing if a recent
            scroll event was triggered by this component or by user action.
            The value resets to 0 periodically to avoid interested code from
            doing too many timestamp checks on every scroll event.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.nowVisible'>
          <a href='#VScroll.nowVisible'>
            <code>
              #nowVisible<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Called when the vscroll becomes visible. In cases where the vscroll
may have been intially created for an element that is not visible,
the sizing information would not be correct and the vscroll instance
would not be initialized correctly. So the instance needs to know
when it should check again to properly initialize. Otherwise, there
may not be any new data signals from the the list data that a display
needs to be tried.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.nowVisible' class='mt0'>
                nowVisible<span class='gray'></span>
              </h2>
              <p>Called when the vscroll becomes visible. In cases where the vscroll
            may have been intially created for an element that is not visible,
            the sizing information would not be correct and the vscroll instance
            would not be initialized correctly. So the instance needs to know
            when it should check again to properly initialize. Otherwise, there
            may not be any new data signals from the the list data that a display
            needs to be tried.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.onChange'>
          <a href='#VScroll.onChange'>
            <code>
              #onChange<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Process a scroll event (possibly delayed).</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.onChange' class='mt0'>
                onChange<span class='gray'></span>
              </h2>
              <p>Process a scroll event (possibly delayed).</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.onEvent'>
          <a href='#VScroll.onEvent'>
            <code>
              #onEvent<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Handles events fired, and allows rate limiting the work if
this.eventRateLimitMillis has been set. Otherwise just calls
directly to onChange.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.onEvent' class='mt0'>
                onEvent<span class='gray'></span>
              </h2>
              <p>Handles events fired, and allows rate limiting the work if
            this.eventRateLimitMillis has been set. Otherwise just calls
            directly to onChange.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.prefetchItemCount'>
          <a href='#VScroll.prefetchItemCount'>
            <code>
              #prefetchItemCount<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>The number of items to prefetch (computed).</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.prefetchItemCount' class='mt0'>
                prefetchItemCount<span class='gray'></span>
              </h2>
              <p>The number of items to prefetch (computed).</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.prefetchScreens'>
          <a href='#VScroll.prefetchScreens'>
            <code>
              #prefetchScreens<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>The number of screens worth of items to prefetch (but not
render!) beyond what we prerender.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.prefetchScreens' class='mt0'>
                prefetchScreens<span class='gray'></span>
              </h2>
              <p>The number of screens worth of items to prefetch (but not
            render!) beyond what we prerender.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.prepareData'>
          <a href='#VScroll.prepareData'>
            <code>
              #prepareData<span class='gray'>(highAbsoluteIndex)</span>
            </code>
            <div class='force-inline'>
              <p>Hook that is implemented by the creator of a VScroll instance.
Called when the VScroll thinks it will need the next set of
data, but before the VScroll actually shows that section of
data. Passed the inclusive high absolute index for which it
wants data.  ASSUMES data sources that only need to grow
downward.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.prepareData' class='mt0'>
                prepareData<span class='gray'>(highAbsoluteIndex)</span>
              </h2>
              <p>Hook that is implemented by the creator of a VScroll instance.
            Called when the VScroll thinks it will need the next set of
            data, but before the VScroll actually shows that section of
            data. Passed the inclusive high absolute index for which it
            wants data.  ASSUMES data sources that only need to grow
            downward.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li> <strong>highAbsoluteIndex</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.prerenderItemCount'>
          <a href='#VScroll.prerenderItemCount'>
            <code>
              #prerenderItemCount<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>The number of items to prerender (computed).</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.prerenderItemCount' class='mt0'>
                prerenderItemCount<span class='gray'></span>
              </h2>
              <p>The number of items to prerender (computed).</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.prerenderScreens'>
          <a href='#VScroll.prerenderScreens'>
            <code>
              #prerenderScreens<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>The number of screens worth of items to pre-render in the
direction we are scrolling beyond the current screen.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.prerenderScreens' class='mt0'>
                prerenderScreens<span class='gray'></span>
              </h2>
              <p>The number of screens worth of items to pre-render in the
            direction we are scrolling beyond the current screen.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.recalculatePaddingItemCount'>
          <a href='#VScroll.recalculatePaddingItemCount'>
            <code>
              #recalculatePaddingItemCount<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>The number of items to render when (non-initial) recalculating.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.recalculatePaddingItemCount' class='mt0'>
                recalculatePaddingItemCount<span class='gray'></span>
              </h2>
              <p>The number of items to render when (non-initial) recalculating.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.recalculatePaddingScreens'>
          <a href='#VScroll.recalculatePaddingScreens'>
            <code>
              #recalculatePaddingScreens<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>When recalculating, pre-render this many screens of messages on
each side of the current screen.  This may be a fractional
value (we round up).</p>
<p>In the initial case we very much want to minimize rendering
latency, so it makes sense for this to be smaller than
<code>prerenderScreens</code>.</p>
<p>In the non-initial case we wait for scrolling to have quiesced,
so there&apos;s no overriding need to bias in either direction.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.recalculatePaddingScreens' class='mt0'>
                recalculatePaddingScreens<span class='gray'></span>
              </h2>
              <p>When recalculating, pre-render this many screens of messages on
            each side of the current screen.  This may be a fractional
            value (we round up).</p>
            <p>In the initial case we very much want to minimize rendering
            latency, so it makes sense for this to be smaller than
            <code>prerenderScreens</code>.</p>
            <p>In the non-initial case we wait for scrolling to have quiesced,
            so there&apos;s no overriding need to bias in either direction.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.renderCurrentPosition'>
          <a href='#VScroll.renderCurrentPosition'>
            <code>
              #renderCurrentPosition<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Renders the list at the current scroll position.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.renderCurrentPosition' class='mt0'>
                renderCurrentPosition<span class='gray'></span>
              </h2>
              <p>Renders the list at the current scroll position.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.retainExtraRenderedScreens'>
          <a href='#VScroll.retainExtraRenderedScreens'>
            <code>
              #retainExtraRenderedScreens<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>The number of extra screens worth of rendered items to keep
around beyond what is required for prerendering.  When
scrolling in a single direction, this ends up being the number
of screens worth of items to keep rendered behind us.  If this
is less than the value of <code>prerenderScreens</code> then a user just
jiggling the screen up and down by even a pixel will cause us
work as we move the delta back and forth.</p>
<p>In other words, don&apos;t have this be less than
<code>prerenderScreens</code>, but you can have it be more.  (Although
having it be more is probably wasteful since extra DOM nodes
the user is moving away from don&apos;t help us.)</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.retainExtraRenderedScreens' class='mt0'>
                retainExtraRenderedScreens<span class='gray'></span>
              </h2>
              <p>The number of extra screens worth of rendered items to keep
            around beyond what is required for prerendering.  When
            scrolling in a single direction, this ends up being the number
            of screens worth of items to keep rendered behind us.  If this
            is less than the value of <code>prerenderScreens</code> then a user just
            jiggling the screen up and down by even a pixel will cause us
            work as we move the delta back and forth.</p>
            <p>In other words, don&apos;t have this be less than
            <code>prerenderScreens</code>, but you can have it be more.  (Although
            having it be more is probably wasteful since extra DOM nodes
            the user is moving away from don&apos;t help us.)</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.setData'>
          <a href='#VScroll.setData'>
            <code>
              #setData<span class='gray'>(list)</span>
            </code>
            <div class='force-inline'>
              <p>Sets the list data source, and then triggers a recalculate
since the data changed.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.setData' class='mt0'>
                setData<span class='gray'>(list)</span>
              </h2>
              <p>Sets the list data source, and then triggers a recalculate
            since the data changed.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>list</strong>
                      :
                      <div class='force-inline'>
                        <p>the list data source.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='VScroll.updateDataBind'>
          <a href='#VScroll.updateDataBind'>
            <code>
              #updateDataBind<span class='gray'>(index, dataList, removedCount)</span>
            </code>
            <div class='force-inline'>
              <p>Called by code that created the VScroll instance, when that
code has data fetched and wants to let the VScroll know
about it. This is useful from removing the display of
defaultData and showing the finally fetched data.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='VScroll.updateDataBind' class='mt0'>
                updateDataBind<span class='gray'>(index, dataList, removedCount)</span>
              </h2>
              <p>Called by code that created the VScroll instance, when that
            code has data fetched and wants to let the VScroll know
            about it. This is useful from removing the display of
            defaultData and showing the finally fetched data.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>index</strong>
                      :
                      <div class='force-inline'>
                        <p>the list item index for which the
            data update is available</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code> <strong>dataList</strong>
                      :
                      <div class='force-inline'>
                        <p>the list of data items that are
            now available. The first item in that list corresponds to
            the data list index given in the first argument.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code> <strong>removedCount</strong>
                      :
                      <div class='force-inline'>
                        <p>the count of any items removed.
            Used mostly to know if a recalculation needs to be done.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='Model' class='mt0'>
    Model<span class='gray'></span>
  </h2>
  <p>Provides a front end to the API and slice objects returned from the API.
Since the UI right now is driven by a shared set of slices, this module
tracks those slices and creates events when they are changed. This means
the card modules do not need a direct reference to each other to change
the backing data for a card, and that card modules and app logic do not
need a hard, static dependency on the MailAPI object. This allows some
more flexible and decoupled loading scenarios. In particular, cards can
be created an inserted into the DOM without needing the back end to
complete its startup and initialization.</p>
<p>It mixes in &apos;evt&apos; capabilities, so it will be common to see model
used with &apos;latest&apos; and &apos;latestOnce&apos; to get the latest model data
whenever it loads.</p>
<p>Down the road, it may make sense to have more than one model object
in play. At that point, it may make sense to morph this into a
constructor function and then have the card objects receive a model
instance property for their model reference.</p>

      <h4>Instance members</h4>
        <div class='collapsible' id='Model._callEmit'>
          <a href='#Model._callEmit'>
            <code>
              #_callEmit<span class='gray'>(id)</span>
            </code>
            <div class='force-inline'>
              <p>emits an event based on a property value. Since the
event is based on a property value that is on this
object, <em>do not</em> use emitWhenListener, since, due to
the possibility of queuing old values with that
method, it could cause bad results (bug 971617), and
it is not needed since the latest* methods will get
the latest value on this object.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model._callEmit' class='mt0'>
                _callEmit<span class='gray'>(id)</span>
              </h2>
              <p>emits an event based on a property value. Since the
            event is based on a property value that is on this
            object, <em>do not</em> use emitWhenListener, since, due to
            the possibility of queuing old values with that
            method, it could cause bad results (bug 971617), and
            it is not needed since the latest* methods will get
            the latest value on this object.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>id</strong>
                      :
                      <div class='force-inline'>
                        <p>event ID/property name</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.account'>
          <a href='#Model.account'>
            <code>
              #account<span class='gray'>(the)</span>
            </code>
            <div class='force-inline'>
              <p>account event is fired when the property changes.
event: account</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.account' class='mt0'>
                account<span class='gray'>(the)</span>
              </h2>
              <p>account event is fired when the property changes.
            event: account</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>the</strong>
                      :
                      <div class='force-inline'>
                        <p>account object.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.acctsSlice'>
          <a href='#Model.acctsSlice'>
            <code>
              #acctsSlice<span class='gray'>(the)</span>
            </code>
            <div class='force-inline'>
              <p>acctsSlice event is fired when the property changes.
event: acctsSlice</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.acctsSlice' class='mt0'>
                acctsSlice<span class='gray'>(the)</span>
              </h2>
              <p>acctsSlice event is fired when the property changes.
            event: acctsSlice</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>the</strong>
                      :
                      <div class='force-inline'>
                        <p>acctsSlice object.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.changeAccount'>
          <a href='#Model.changeAccount'>
            <code>
              #changeAccount<span class='gray'>(account, callback)</span>
            </code>
            <div class='force-inline'>
              <p>Changes the current account tracked by the model. This results
in changes to the &apos;account&apos;, &apos;foldersSlice&apos; and &apos;folder&apos; properties.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.changeAccount' class='mt0'>
                changeAccount<span class='gray'>(account, callback)</span>
              </h2>
              <p>Changes the current account tracked by the model. This results
            in changes to the &apos;account&apos;, &apos;foldersSlice&apos; and &apos;folder&apos; properties.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>account</strong>
                      :
                      <div class='force-inline'>
                        <p>the account object.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>callback</strong>
                      :
                      <div class='force-inline'>
                        <p>function to call once the account and
            related folder data has changed.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.changeAccountFromId'>
          <a href='#Model.changeAccountFromId'>
            <code>
              #changeAccountFromId<span class='gray'>(accountId, callback)</span>
            </code>
            <div class='force-inline'>
              <p>Given an account ID, change the current account to that account.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.changeAccountFromId' class='mt0'>
                changeAccountFromId<span class='gray'>(accountId, callback)</span>
              </h2>
              <p>Given an account ID, change the current account to that account.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>accountId</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li> <strong>callback</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>callback</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.changeFolder'>
          <a href='#Model.changeFolder'>
            <code>
              #changeFolder<span class='gray'>(folder)</span>
            </code>
            <div class='force-inline'>
              <p>Just changes the folder property tracked by the model.
Assumes the folder still belongs to the currently tracked
account. It also does not result in any state changes or
event emitting if the new folder is the same as the
currently tracked folder.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.changeFolder' class='mt0'>
                changeFolder<span class='gray'>(folder)</span>
              </h2>
              <p>Just changes the folder property tracked by the model.
            Assumes the folder still belongs to the currently tracked
            account. It also does not result in any state changes or
            event emitting if the new folder is the same as the
            currently tracked folder.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>folder</strong>
                      :
                      <div class='force-inline'>
                        <p>the folder object to use.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.folder'>
          <a href='#Model.folder'>
            <code>
              #folder<span class='gray'>(the)</span>
            </code>
            <div class='force-inline'>
              <p>folder event is fired when the property changes.
event: folder</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.folder' class='mt0'>
                folder<span class='gray'>(the)</span>
              </h2>
              <p>folder event is fired when the property changes.
            event: folder</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>the</strong>
                      :
                      <div class='force-inline'>
                        <p>folder object.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.foldersSlice'>
          <a href='#Model.foldersSlice'>
            <code>
              #foldersSlice<span class='gray'>(the)</span>
            </code>
            <div class='force-inline'>
              <p>foldersSlice event is fired when the property changes.
event: foldersSlice</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.foldersSlice' class='mt0'>
                foldersSlice<span class='gray'>(the)</span>
              </h2>
              <p>foldersSlice event is fired when the property changes.
            event: foldersSlice</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>the</strong>
                      :
                      <div class='force-inline'>
                        <p>foldersSlice object.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.getAccount'>
          <a href='#Model.getAccount'>
            <code>
              #getAccount<span class='gray'>(id)</span>
            </code>
            <div class='force-inline'>
              <p>Given an account ID, get the account object. Only works once the
acctsSlice property is available. Use model.latestOnce to get a
handle on an acctsSlice property, then call this method.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.getAccount' class='mt0'>
                getAccount<span class='gray'>(id)</span>
              </h2>
              <p>Given an account ID, get the account object. Only works once the
            acctsSlice property is available. Use model.latestOnce to get a
            handle on an acctsSlice property, then call this method.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>id</strong>
                      :
                      <div class='force-inline'>
                        <p>account ID.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>account object.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.getAccountCount'>
          <a href='#Model.getAccountCount'>
            <code>
              #getAccountCount<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Get the numbers of configured account.
Should only be called after this.inited is true.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.getAccountCount' class='mt0'>
                getAccountCount<span class='gray'></span>
              </h2>
              <p>Get the numbers of configured account.
            Should only be called after this.inited is true.</p>
            
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>numbers of account.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.hasAccount'>
          <a href='#Model.hasAccount'>
            <code>
              #hasAccount<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Returns true if there is an account. Should only be
called after inited is true.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.hasAccount' class='mt0'>
                hasAccount<span class='gray'></span>
              </h2>
              <p>Returns true if there is an account. Should only be
            called after inited is true.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.init'>
          <a href='#Model.init'>
            <code>
              #init<span class='gray'>(showLatest, callback)</span>
            </code>
            <div class='force-inline'>
              <p>Call this to initialize the model. It can be called more than once
per the lifetime of an app. The usual use case for multiple calls
is when a new account has been added.</p>
<p>It is <em>not</em> called by default in this module to allow for lazy startup,
and for cases like unit tests that may not want to trigger a full model
creation for a simple UI test.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.init' class='mt0'>
                init<span class='gray'>(showLatest, callback)</span>
              </h2>
              <p>Call this to initialize the model. It can be called more than once
            per the lifetime of an app. The usual use case for multiple calls
            is when a new account has been added.</p>
            <p>It is <em>not</em> called by default in this module to allow for lazy startup,
            and for cases like unit tests that may not want to trigger a full model
            creation for a simple UI test.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code> <strong>showLatest</strong>
                      :
                      <div class='force-inline'>
                        <p>Choose the latest account in the
            acctsSlice. Otherwise it choose the account marked as the default
            account.</p>
            
                      </div>
                    </li>
                    <li> <strong>callback</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.notifyFoldersSliceOnChange'>
          <a href='#Model.notifyFoldersSliceOnChange'>
            <code>
              #notifyFoldersSliceOnChange<span class='gray'>(folder)</span>
            </code>
            <div class='force-inline'>
              <p>Triggered by the foldersSlice onchange event</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.notifyFoldersSliceOnChange' class='mt0'>
                notifyFoldersSliceOnChange<span class='gray'>(folder)</span>
              </h2>
              <p>Triggered by the foldersSlice onchange event</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>folder</strong>
                      :
                      <div class='force-inline'>
                        <p>the folder that changed.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.notifyInboxMessages'>
          <a href='#Model.notifyInboxMessages'>
            <code>
              #notifyInboxMessages<span class='gray'>(accountUpdate)</span>
            </code>
            <div class='force-inline'>
              <p>Called by other code when it knows the current account
has received new inbox messages. Just triggers an
event with the count for now.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.notifyInboxMessages' class='mt0'>
                notifyInboxMessages<span class='gray'>(accountUpdate)</span>
              </h2>
              <p>Called by other code when it knows the current account
            has received new inbox messages. Just triggers an
            event with the count for now.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>accountUpdate</strong>
                      :
                      <div class='force-inline'>
                        <p>update object from
            sync.js accountResults object structure.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.selectFirstFolderWithType'>
          <a href='#Model.selectFirstFolderWithType'>
            <code>
              #selectFirstFolderWithType<span class='gray'>(folderType, callback)</span>
            </code>
            <div class='force-inline'>
              <p>For the already loaded account and associated foldersSlice, set
the given folder as the tracked folder. The account MUST have a
folder with the given type, or a fatal error will occur.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.selectFirstFolderWithType' class='mt0'>
                selectFirstFolderWithType<span class='gray'>(folderType, callback)</span>
              </h2>
              <p>For the already loaded account and associated foldersSlice, set
            the given folder as the tracked folder. The account MUST have a
            folder with the given type, or a fatal error will occur.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li> <strong>folderType</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li> <strong>callback</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Model.selectInbox'>
          <a href='#Model.selectInbox'>
            <code>
              #selectInbox<span class='gray'>(callback)</span>
            </code>
            <div class='force-inline'>
              <p>For the already loaded account and associated foldersSlice,
set the inbox as the tracked &apos;folder&apos;.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Model.selectInbox' class='mt0'>
                selectInbox<span class='gray'>(callback)</span>
              </h2>
              <p>For the already loaded account and associated foldersSlice,
            set the inbox as the tracked &apos;folder&apos;.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>callback</strong>
                      :
                      <div class='force-inline'>
                        <p>function called once the inbox
            has been selected.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_clearCachedMessages' class='mt0'>
    _clearCachedMessages<span class='gray'></span>
  </h2>
  <p>Clears out the messages HTML in messageContainer from using the cached
nodes that were picked up when the HTML cache of this list was used
(which is indicated by usingCachedNode being true). The cached HTML
needs to be purged when the real data is finally available and will
replace the cached state. A more sophisticated approach would be to
compare the cached HTML to what would be inserted in its place, and
if no changes, skip this step, but that comparison operation could get
tricky, and it is cleaner just to wipe it and start fresh. Once the
cached HTML has been cleared, then usingCachedNode is set to false
to indicate that the main piece of content in the card, the message
list, is no longer from a cached node.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_considerCacheDom' class='mt0'>
    _considerCacheDom<span class='gray'>(index)</span>
  </h2>
  <p>Considers a DOM cache, but only if it meets the criteria for what
should be saved in the cache, and if a save is not already scheduled.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>index</strong>
          :
          <div class='force-inline'>
            <p>the index of the message that triggered
this call.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_divertToManualConfig' class='mt0'>
    _divertToManualConfig<span class='gray'></span>
  </h2>
  <p>learnAbout decided the only option for the user is to manually configure
their account.  Sorry, user!</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_focusEditorWithCursorAtEnd' class='mt0'>
    _focusEditorWithCursorAtEnd<span class='gray'>(event)</span>
  </h2>
  <p>Focus our contenteditable region and position the cursor at the last
valid editing cursor position.</p>
<p>The intent is so that if the user taps below our editing region that we
still correctly position the cursor.  We previously relied on min-height
to do this for us, but that results in ugly problems when we have quoted
HTML that follows and our editable region is not big enough to satisfy
the height.</p>
<p>Note: When we are quoting HTML, the &quot;Bob wrote:&quot; stuff does go in the
contenteditable text area, so we may actually want to get smarter and
position the cursor before that node instead.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>event</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_isCacheableCardState' class='mt0'>
    _isCacheableCardState<span class='gray'></span>
  </h2>
  <p>Confirms card state is in a visual state suitable for caching.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_onAttachmentDone' class='mt0'>
    _onAttachmentDone<span class='gray'></span>
  </h2>
  <p>Used to count when attachment has been fully processed by this.composer.
Broken out as a separate member method to avoid inline closures in
addAttachmentsSubjectToSizeLimits that may lead to holding on to too much
memory.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_onVScrollStopped' class='mt0'>
    _onVScrollStopped<span class='gray'></span>
  </h2>
  <p>Waits for scrolling to stop before fetching snippets.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='toaster' class='mt0'>
    toaster<span class='gray'>(parentEl)</span>
  </h2>
  <p>Manages the display of short status notifications, or &apos;toasts&apos;.
Each toast may optionally include an action button. Common uses
may include:</p>
<ul>
<li>Displaying notifications about message sending status</li>
<li>Allowing the user to undo flags/moves/deletes</li>
<li>Allowing the user to retry a failed operation, if applicable</li>
</ul>
<p>This class is a singleton, because there is only room for one
toaster on the screen at a time. Subsequent &apos;toasts&apos; will remove
any previously-displaying toast.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>parentEl</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Static members</h4>
        <div class='collapsible' id='toaster._previousActionClass'>
          <a href='#toaster._previousActionClass'>
            <code>
              ._previousActionClass<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Tracks the CSS class that was previously applied to the action button,
so it can be removed on next display.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='toaster._previousActionClass' class='mt0'>
                _previousActionClass<span class='gray'></span>
              </h2>
              <p>Tracks the CSS class that was previously applied to the action button,
            so it can be removed on next display.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='toaster.hide'>
          <a href='#toaster.hide'>
            <code>
              .hide<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Hide the current toast, if one was visible. Idempotent.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='toaster.hide' class='mt0'>
                hide<span class='gray'></span>
              </h2>
              <p>Hide the current toast, if one was visible. Idempotent.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='toaster.init'>
          <a href='#toaster.init'>
            <code>
              .init<span class='gray'>(parentEl)</span>
            </code>
            <div class='force-inline'>
              <p>Initialize the Toaster, adding things to the DOM and setting up
event handlers. The toaster starts out invisible.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='toaster.init' class='mt0'>
                init<span class='gray'>(parentEl)</span>
              </h2>
              <p>Initialize the Toaster, adding things to the DOM and setting up
            event handlers. The toaster starts out invisible.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li> <strong>parentEl</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='toaster.onAction'>
          <a href='#toaster.onAction'>
            <code>
              .onAction<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Called when the user taps the action button (Undo, Retry, etc).</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='toaster.onAction' class='mt0'>
                onAction<span class='gray'></span>
              </h2>
              <p>Called when the user taps the action button (Undo, Retry, etc).</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='toaster.toast'>
          <a href='#toaster.toast'>
            <code>
              .toast<span class='gray'>(opts)</span>
            </code>
            <div class='force-inline'>
              <p>Display a transient message as a &apos;toast&apos;, with an optional
action button. The toast dismisses automatically, unless the
user taps the action button or the toast itself.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='toaster.toast' class='mt0'>
                toast<span class='gray'>(opts)</span>
              </h2>
              <p>Display a transient message as a &apos;toast&apos;, with an optional
            action button. The toast dismisses automatically, unless the
            user taps the action button or the toast itself.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code> <strong>opts</strong>
                      :
                      <div class='force-inline'>
                        <p>opts</p>
            
                      </div>
                        <ul>
                            <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> opts.text
                              <p>Localized status text to display.</p>
            </li>
                            <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code> opts.action
                              <p>Optional function to call when the user
            clicks the action button. If not provided,
            the action button will not be visible.</p>
            </li>
                            <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> opts.actionLabel
                              <p>Label to display for the action button.
            Required only if <code>opts.action</code> is
            provided.</p>
            </li>
                            <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> opts.actionClass
                              <p>a CSS class name to apply to the action
            button.</p>
            </li>
                        </ul>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='toaster.toastOperation'>
          <a href='#toaster.toastOperation'>
            <code>
              .toastOperation<span class='gray'>(op)</span>
            </code>
            <div class='force-inline'>
              <p>Toast a potentially-undoable mail operation. If the operation
is undoable, an &apos;Undo&apos; button will be shown, allowing the user
to undo the action, with one exception: The &apos;move&apos; and &apos;delete&apos;
operations currently do not allow &apos;undo&apos; per bug 804916, so
those undo buttons are disabled.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='toaster.toastOperation' class='mt0'>
                toastOperation<span class='gray'>(op)</span>
              </h2>
              <p>Toast a potentially-undoable mail operation. If the operation
            is undoable, an &apos;Undo&apos; button will be shown, allowing the user
            to undo the action, with one exception: The &apos;move&apos; and &apos;delete&apos;
            operations currently do not allow &apos;undo&apos; per bug 804916, so
            those undo buttons are disabled.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li> <strong>op</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_showFolder' class='mt0'>
    _showFolder<span class='gray'>(folder)</span>
  </h2>
  <p>Tell the message-list to show this folder; exists for single code path.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>folder</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_warnAttachmentSizeExceeded' class='mt0'>
    _warnAttachmentSizeExceeded<span class='gray'>(numAttachments)</span>
  </h2>
  <p>Helper to show the appropriate error when we refuse to add attachments.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>numAttachments</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='' class='mt0'>
    <span class='gray'></span>
  </h2>
  <p>Provides a wrapper over the mozApps.getSelf() API. Structured as an
evt emitter, with &quot;latest&quot; support, and &quot;latest&quot; is overridden so
that the call to getSelf() is delayed until the very first need
for it.</p>
<p>This allows code to have a handle on this module, instead of making
the getSelf() call, and then only trigger the fetch via a call to
latest, delaying the work until it is actually needed. Once getSelf()
is fetched once, the result is reused.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='' class='mt0'>
    <span class='gray'></span>
  </h2>
  <p>Card definitions/logic for composition, contact picking, and attaching
things.  Although ideally, the picking and attaching will be handled by a
web activity or shared code.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='' class='mt0'>
    <span class='gray'></span>
  </h2>
  <p>Per-account server settings, it can be activesync, imap+smtp, or
pop3+smtp</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='' class='mt0'>
    <span class='gray'></span>
  </h2>
  <p>Enter basic account info card (name, e-mail address) to try and
autoconfigure an account.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='' class='mt0'>
    <span class='gray'></span>
  </h2>
  <p>Setup is done; add another account?</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='' class='mt0'>
    <span class='gray'></span>
  </h2>
  <p>Setup is done; add another account?</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='' class='mt0'>
    <span class='gray'></span>
  </h2>
  <p>Tells the user how to enable IMAP/POP3 for Gmail</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='' class='mt0'>
    <span class='gray'></span>
  </h2>
  <p>Mixin for the setup<em>fix</em>* cases.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='' class='mt0'>
    <span class='gray'></span>
  </h2>
  <p>Asks the user to re-enter their password for the account</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='' class='mt0'>
    <span class='gray'></span>
  </h2>
  <p>Asks the user to manually configure their account.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='' class='mt0'>
    <span class='gray'></span>
  </h2>
  <p>Show a spinner in for two possible steps in the setup of an account:</p>
<p>1) During the autoconfig step, when figuring out the capabilities of the
server, and possibly needing an oauth jump.</p>
<p>2) During the manual config or password flow when finally connecting to the
service to confirm password and settings are correct.</p>
<p>So the possible flows are:</p>
<p>OAuth: setup_account_info -&gt; setup_progress -&gt; setup_account_prefs
autoconfig password: setup_account_info -&gt; setup_progress -&gt;
setup_password -&gt; setup_progress -&gt; setup_account_prefs
manual config: setup_account_info -&gt; setup_manual_config -&gt;
setup_progress -&gt; setup_account_prefs</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='' class='mt0'>
    <span class='gray'></span>
  </h2>
  <p>Application logic that isn&apos;t specific to cards, specifically entailing
startup and mozSetMessageHandler message listening.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='Marquee' class='mt0'>
    Marquee<span class='gray'>(text, headerNode)</span>
  </h2>
  <p>HTML Marquee in JavaScript/CSS</p>
<ul>
<li>slow scrolling of text depending on <code>behavior&apos; and</code>timingFunction&apos;
parameters provided to the &grave;activate&apos; method</li>
<li>start aligned left with delay (see marquee.css for details on classes)</li>
</ul>
<p>Creates a HTML element of the form:
<headerNode>
<div id="marquee-h-wrapper">
<div id="marquee-h-text" class="marquee">
Marqueed text content
</div>
</div>
</headerNode>
where &apos;headerNode&apos; is the node that will containt the text that needs a
marquee (i.e. <header>, <h1>, etc.).</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>text</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>headerNode</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Static members</h4>
        <div class='collapsible' id='Marquee.activate'>
          <a href='#Marquee.activate'>
            <code>
              .activate<span class='gray'>(behavior, timingFun)</span>
            </code>
            <div class='force-inline'>
              <p>Activate the marquee
NOTE: This should only be called once the DOM structure is updated with
Marquee.setup() and all created DOM elements are appended to the
document, otherwise the text overflow check will not work properly.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Marquee.activate' class='mt0'>
                activate<span class='gray'>(behavior, timingFun)</span>
              </h2>
              <p>Activate the marquee
            NOTE: This should only be called once the DOM structure is updated with
            Marquee.setup() and all created DOM elements are appended to the
            document, otherwise the text overflow check will not work properly.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>behavior</strong>
                      :
                      <div class='force-inline'>
                        <p>the way the marquee behaves: &apos;scroll&apos; (default)
            for continuous right-to-left (rtl) scrolling or
            &apos;alternate&apos; for alternating right-to-left and
            left-to-right scrolling.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>timingFun</strong>
                      :
                      <div class='force-inline'>
                        <p>the animation timing function: &apos;linear&apos; (default)
            for linear animation speed, or &apos;ease&apos; for slow
            start of the animation.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Marquee.setup'>
          <a href='#Marquee.setup'>
            <code>
              .setup<span class='gray'>(text, headerNode)</span>
            </code>
            <div class='force-inline'>
              <p>Setup the marquee DOM structure</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Marquee.setup' class='mt0'>
                setup<span class='gray'>(text, headerNode)</span>
              </h2>
              <p>Setup the marquee DOM structure</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>text</strong>
                      :
                      <div class='force-inline'>
                        <p>the string of text that requires a marquee.</p>
            
                      </div>
                    </li>
                    <li><code><a href="#element">element</a></code> <strong>headerNode</strong>
                      :
                      <div class='force-inline'>
                        <p>the DOM element parent of the text.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Marquee.timingFunction'>
          <a href='#Marquee.timingFunction'>
            <code>
              .timingFunction<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>List of supported timing functions</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Marquee.timingFunction' class='mt0'>
                timingFunction<span class='gray'></span>
              </h2>
              <p>List of supported timing functions</p>
            
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='addAttachmentsSubjectToSizeLimits' class='mt0'>
    addAttachmentsSubjectToSizeLimits<span class='gray'>(toAttach)</span>
  </h2>
  <p>Given a list of Blobs/Files that we want to attach, attach as many as
possible and generate an error message for any we can&apos;t attach.  This
will update the UI as a side-effect; you do not need to do it.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>toAttach</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='advance' class='mt0'>
    advance<span class='gray'>(direction)</span>
  </h2>
  <p>The messageReader told us it wanted to advance, so we should go ahead
and update our currentMessage appropriately and then report the new one.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>direction</strong>
          :
          <div class='force-inline'>
            <p>either &apos;next&apos; or &apos;previous&apos;.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='appDispatchedMessage' class='mt0'>
    appDispatchedMessage<span class='gray'></span>
  </h2>
  <p>Tracks if a mozSetMessageHandler has been dispatched to code. This only
exists to help us be efficient on closing the app in the case of notification
close events. If the notification system improved so that the app could tell
it not to notify us on close events, this could be removed. It is a global
so that cronsync-main can set it for alarm operations. This file does not
track alarm setMozMessageHandler messages directly, since they need to
acquire wake locks in the event turn the message is received. Since that is a
bit complicated, the back-end handles it, since it also knows more about the
sync details.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='globalOnAppMessage' class='mt0'>
    globalOnAppMessage<span class='gray'>(listener)</span>
  </h2>
  <p>Called by app code. Only expects one listener to be registered for each
handler type. This function also assumes that a  <code>require</code> loader is
available to fetch the &apos;evt&apos; module. This would not be needed if
evt.emit(&apos;notification&apos;) was  not triggered by the email code.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>listener</strong>
          :
          <div class='force-inline'>
            <p>Object whose keys are the handler type names and
values are functions that handle that type.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='HTML_CACHE_VERSION' class='mt0'>
    HTML_CACHE_VERSION<span class='gray'></span>
  </h2>
  <p>Version number for cache, allows expiring cache.
Set by build process. Set as a global because it
is also used in html_cache.js.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='startupCacheEventsSent' class='mt0'>
    startupCacheEventsSent<span class='gray'></span>
  </h2>
  <p>Apparently the event catching done for the startup events from
performance_testing_helper record the last event received of that type as
the official time, instead of using the first. So unfortunately, we need a
global to make sure we do not emit the same events later.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='startupOnModelLoaded' class='mt0'>
    startupOnModelLoaded<span class='gray'></span>
  </h2>
  <p>A function callback is registered if the model needs to be loaded before
final view determination can be done. This should be a rare event, but can
happen, see localOnModelLoaded for more details. config.js looks for this
callback.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='attachedCallback' class='mt0'>
    attachedCallback<span class='gray'></span>
  </h2>
  <p>Custom element callback when element is placed in the document.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='base' class='mt0'>
    base<span class='gray'>([templateMixins])</span>
  </h2>
  <p>Returns an array of objects that can be fed to the &apos;element&apos; module to
create a prototype for a custom element. It takes an optional
<code>templateMixins</code> object that is the first object to be mixed in by the
&quot;mixins insted of prototypes&quot; construction that &apos;element&apos; favors. This
templateMixins should come first, as it sets up the inner DOM structure
for an instance of the element, and needs to have been inserted before the
other mixins in this base are applied. The templateMixins are normally
passed to this function via a <code>require(&apos;template!...&apos;)</code> dependency. The
&apos;template&apos; loader plugin knows how to set up an object for use in this type
of &apos;element&apos; target. See the README.md in this file&apos;s directory for more
information on the custom element approach.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code>]</code> <strong>templateMixins</strong>
          :
          <div class='force-inline'>
            <p>Handles the templating duties
for the inner HTML structure of the element.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code></code>
      :
      <div class='force-inline'>
        <p>Array of objects for use in a mixin construction.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='bindDataSource' class='mt0'>
    bindDataSource<span class='gray'>(dataSourceId)</span>
  </h2>
  <p>Loads the dataSource module.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>dataSourceId</strong>
          :
          <div class='force-inline'>
            <p>The module ID for the data source.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='bindToSlice' class='mt0'>
    bindToSlice<span class='gray'>(messagesSlice)</span>
  </h2>
  <p>holds on to messagesSlice and binds some events to it.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>Slice</code> <strong>messagesSlice</strong>
          :
          <div class='force-inline'>
            <p>the new messagesSlice.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='buildBodyDom' class='mt0'>
    buildBodyDom<span class='gray'>(changeDetails)</span>
  </h2>
  <p>Render the DOM nodes for bodyReps and the attachments container.
If we have information on which parts of the message changed,
only update those DOM nodes; otherwise, update the whole thing.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></code> <strong>changeDetails</strong>
          :
          <div class='force-inline'>
            
          </div>
            <ul>
                <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a></code> changeDetails.bodyReps
                  <p>An array of changed item indexes.</p>
</li>
                <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a></code> changeDetails.attachments
                  <p>An array of changed item
indexes.</p>
</li>
            </ul>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='calculateTotalAttachmentsSize' class='mt0'>
    calculateTotalAttachmentsSize<span class='gray'></span>
  </h2>
  <p>Calculate the total size of all attachments included.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='callHeaderFontSize' class='mt0'>
    callHeaderFontSize<span class='gray'>(node)</span>
  </h2>
  <p>A workaround for font_size_utils not recognizing child node content
changing, and if it did, it would be noisy/extra work if done
generically. Using a rAF call to not slow down the rest of card updates,
it is something that can happen lazily on another turn.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>node</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='canReplyAll' class='mt0'>
    canReplyAll<span class='gray'></span>
  </h2>
  <p>Returns true if Reply All should be shown as a distinct option.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='changeIfSame' class='mt0'>
    changeIfSame<span class='gray'>(sourceField, destFields)</span>
  </h2>
  <p>When sourceField changes, change every field in destFields to
match, if and only if destField previously matched sourceField.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>sourceField</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>destFields</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='checkExpectingMessageSuid' class='mt0'>
    checkExpectingMessageSuid<span class='gray'>(eventIfNotFound)</span>
  </h2>
  <p>Sets the currentMessage if there are messages now to check
against expectingMessageSuid. Only works if current folder
is set to an &quot;inbox&quot; type, so only useful for jumps into
the email app from an entry point like a notification.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code> <strong>eventIfNotFound</strong>
          :
          <div class='force-inline'>
            <p>if set to true, an event
is emitted if the messageSuid is not found in the set of
messages.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='cloneAndSave' class='mt0'>
    cloneAndSave<span class='gray'>(moduleId, node)</span>
  </h2>
  <p>Does a very basic clone of the given node and schedules it for saving as a
cached entry point. WARNING: only use this for very simple cards that do not
need to do any customization.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>moduleId</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>node</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='cloneAsInertNodeAvoidingCustomElementHorrors' class='mt0'>
    cloneAsInertNodeAvoidingCustomElementHorrors<span class='gray'>(node)</span>
  </h2>
  <p>Safely clone a node so that it is inert and no document.registerElement
callbacks or magic happens.  This is not particularly intuitive, so it
needs a helper method and that helper method needs an appropriately
scary/warning-filled name.</p>
<p>The most non-obvious thing here is that
document.implementation.createHTMLDocument() will create a document that
has the same custom element registry as our own, so using importNode
on such a document will not actually fix anything!  But a &quot;template&quot;
element&apos;s contents owner document does use a new registry, so we use
that.</p>
<p>See the spec&apos;s details on this at:
<a href="http://w3c.github.io/webcomponents/spec/custom/">http://w3c.github.io/webcomponents/spec/custom/</a>
#creating-and-passing-registries</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>node</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='delayedSaveFromNode' class='mt0'>
    delayedSaveFromNode<span class='gray'>(moduleId, node)</span>
  </h2>
  <p>Like saveFromNode, but on a timeout. NOTE: it modifies the node tree,
so pass use cloneNode(true) on your node if you use it for other
things besides this call.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>moduleId</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code> <strong>node</strong>
          :
          <div class='force-inline'>
            <p>Node to serialize to storage.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='reset' class='mt0'>
    reset<span class='gray'></span>
  </h2>
  <p>Clears all the cache.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='save' class='mt0'>
    save<span class='gray'>(moduleId, html)</span>
  </h2>
  <p>Saves a JS object to document.cookie using JSON.stringify().
This method claims all cookie keys that have pattern
/htmlc(\d+)/</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>moduleId</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>html</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='saveFromNode' class='mt0'>
    saveFromNode<span class='gray'>(moduleId, node)</span>
  </h2>
  <p>Serializes the node to storage. NOTE: it modifies the node tree, and
cloneNode(true) is <em>NOT SAFE</em> because of custom element semantics, so
you must use cloneAsInertNodeAvoidingCustomElementHorrors(node) on
your node and pass that to us.  (And you call it instead of us because
you probably really want to perform some transforms/filtering before you
pass the node to us.)</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>moduleId</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code> <strong>node</strong>
          :
          <div class='force-inline'>
            <p>Node to serialize to storage.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='containerListen' class='mt0'>
    containerListen<span class='gray'>(containerNode, eventName, func)</span>
  </h2>
  <p>Add an event listener on a container that, when an event is encounted
on a descendant, walks up the tree to find the immediate child of the
container and tells us what the click was on.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>containerNode</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>eventName</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>func</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='createAndInsertIframeForContent' class='mt0'>
    createAndInsertIframeForContent<span class='gray'>(htmlStr, scrollContainer, parentNode, beforeNode, interactiveMode, clickHandler)</span>
  </h2>
  <p>Logic to help with creating, populating, and handling events involving our
HTML message-disply iframes.</p>
<h2>UX Goals</h2>
<p>We want a continuous scrolling experience.  The message&apos;s envelope and the
HTML body should scroll continuously.</p>
<p>Pinch-and-zoom: We want the user to be able to zoom in and out on the message
in a responsive fashion without crashing the app.  We also want to start
with fit-to-page-width because when the email is wider than the screen it
tends to look stupid.</p>
<h2>Security</h2>
<p>All HTML content is passed through a white-list-based sanitization process,
but we still want the iframe so that:</p>
<ul>
<li>We can guarantee the content can&apos;t escape out into the rest of the page.</li>
<li>We can both avoid the content being influenced by our stylesheets as well
as to allow the content to use inline &quot;style&quot; tags without any risk to our
styling.</li>
</ul>
<p>Our iframe sandbox attributes (not) specified and rationale are as follows.
Note that &quot;NO&quot; means we don&apos;t specify the string in our sandbox.</p>
<ul>
<li>
<p>&quot;allow-same-origin&quot;: YES.  We do this because in order to touch the
contentDocument we need to live in the same origin.  Because scripts are
not enabled in the iframe this is not believed to have any meaningful
impact.</p>
<p>In the future when we are able to do nested APZ stuff, what we
will likely do is have two layers of iframes.  The outer mozbrowser iframe
will have its own origin but be running (only) our code.  It will talk to
us via postMessage.  Then it will have a sandboxed iframe where script is
disabled but that lives in the same origin.  So our code in that origin
can then poke at things as needed.</p>
</li>
<li>
<p>&quot;allow-scripts&quot;: NO.  We never ever want to let scripts from an email
run.  And since we are setting &quot;allow-same-origin&quot;, even if we did want
to allow scripts we <em>must not</em> while that setting is on.  Our CSP should
limit the use of scripts if the iframe has the same origin as us since
everything in the iframe should qualify as</p>
</li>
<li>
<p>&quot;allow-top-navigation&quot;: NO.  The iframe should not navigate if the user
clicks on a link.  Note that the current plan is to just capture the
click event and trigger the browse event ourselves so we can show them the
URL, so this is just extra protection.</p>
</li>
<li>
<p>&quot;allow-forms&quot;: NO.  We already sanitize forms out, so this is just extra
protection.</p>
</li>
<li>
<p>&quot;allow-popups&quot;: NO.  We would never want this, but it also shouldn&apos;t be
possible to even try to trigger this (scripts are disabled and sanitized,
links are sanitized to forbid link targets as well as being nerfed), so
this is also just extra protection.</p>
</li>
</ul>
<h2>Platform Limitations: We Got&apos;em!</h2>
<h3>Seamless iframes</h3>
<p>Gecko does not support seamless iframes, so we have to manually make sure
that we set the iframe&apos;s outer size to what its inner size is.  Because
layout is asynchronous (even in the document.write case, apparently), we end
up polling after any notable event that might affect layout.</p>
<p>I did experiment with the gecko-specific &apos;overflow&apos; event a bit.  Although I
suspect there were complicating factors, I do believe I ran into trouble with
it since it is an event that is only generated each time you transition from
overflow and back to underflow.  So if you get an overflow event but didn&apos;t
actually cause yourself to go back to underflow (like if you have weird CSS
maybe doing something like setting a width to 105% or something?), you won&apos;t
get another overflow event.</p>
<h3>Pinch-and-Zoom</h3>
<p>Gecko supports Asynchronous Pan-and-Zoom (APZ), but we can&apos;t use it for our
HTML pages right now because it can only be used for the root of an
app/browser window.  And there is no support for nested subprocesses yet.
When that stuff happens, we want to just use that instead of doing manual
pinchy-zoomy support.</p>
<p>We fake some level of usable pinch-zoom by using a &quot;transform: scale()&quot; on
our iframe.  Because the transform is a painting thing and not a layout thing
we have to wrap the iframe in a &quot;viewport&quot; div that provides our effective
DOM size for scrolling.  We could maybe use better nomenclature for this and
maybe even stop nesting the iframe in the viewport.  (The current structure
is somewhat historical from when the viewport div actually was clipping the
iframe.)</p>
<p>For example, let&apos;s say our iframe is internally 580px by 1000px but we are
displaying it at 50% scale so it&apos;s 290px by 500px.  In that case the iframe&apos;s
size still needs to be 580px by 1000px, but the viewport needs to be 290px by
500px so that the scrolling works out right.  Otherwise you end up with lots
of white space at the right and bottom.</p>
<p>Likewise if we are zooming it to 200% we need the viewport&apos;s dimensions to be
doubled so that there is the extra space to scroll into.</p>
<h3>Transform Performance / Memory Limitations</h3>
<p>We can&apos;t actually mess with &quot;transform: scale()&quot; in realtime.  This is
primarily because it results in memory spikes that can get our process killed
as the graphics subsystem&apos;s logic glitches and ends up allocating graphics
buffers for the entirety of the HTML document, even the parts not on the
screen.  But a secondary concern is that especially when it&apos;s drawing too
much, it can take a very long time to scale.</p>
<p>So we&apos;ve implemented a &quot;quantized&quot; scaling approach where we have four zoom
levels: &quot;fit-to-width&quot; (which is &lt;= 1), 100%, 150%, and 200%.  Pinching to
zoom in moves you to the right in the list, pinching to zoom out moves you
out in the list.</p>
<p>We use the shared gesture_detector code to figure out what&apos;s going on.
Specifically, once the scale in absolute terms is clearly a zoom in or a zoom
out, we trigger the scale change and then ignore the rest of the gesture
until a new gesture occurs.  This is arguably intuitive, but more importantly
it avoids the problems we had in the past where you could just absurdly
oscillate your pinchers and kill the app as we swamped the system with a
gazillion transforms.</p>
<h2>Email types and Pinchy-Zoomy time</h2>
<p>There are two types of HTML e-mails:</p>
<p>1) E-mails written by humans which are basically unstructured prose plus
quoting.  The biggest problems these face are deep quoting causing
blockquote padding to cause text to have very little screen real estate.</p>
<p>2) Newsletter style e-mails which are structured and may have multiple
columns, grids of images and stuff like that.  They historically have
tended to assume a size of about 600px.  However, it&apos;s increasingly common
to be smart and use media queries.  Unfortunately, we don&apos;t support media
queries right now and so it&apos;s very likely we&apos;ll end up in the desktop
case.</p>
<p>We originally treated these types of mails differently, but over time it
became clear that this was not a great strategy, especially since showing
external images/etc. could push a &quot;normal&quot; email into being a &quot;newsletter&quot;
email.  We also intentionally would trigger a layout with relaxed constraints
then try and tighten them up.</p>
<p>Our (new) strategy is to create the iframe so that it fits in the width we
have available.  On flame devices that&apos;s 290px right now, though the actual
size is discovered at runtime and doesn&apos;t matter.</p>
<p>As discussed above, we poll the scrollWidth and scrollHeight for a while to
make sure that it stabilizes.  The trick is that if something is a newsletter
it will end up wanting to be wider than our base/screen 290px.  We will
detect this and update our various dimensions, including our &quot;fit-to-width&quot;
scale.  Since we pick 100% or the computed fit-to-width scale, whichever is
smaller, the non-newsletter case is just us using a fit-to-width zoom factor
that just happens to be 100%.  The newsletter case is when fit-to-width is
less than 100%.</p>
<h2>Bugs / Doc Links</h2>
<ul>
<li>
<p>Font-inflation is a thing.  It&apos;s not clear it affects us:
<a href="http://jwir3.wordpress.com/2012/07/30/font-inflation-fennec-and-you/">http://jwir3.wordpress.com/2012/07/30/font-inflation-fennec-and-you/</a></p>
</li>
<li>
<p>iframe &quot;seamless&quot; doesn&apos;t work, so we manually need to poke stuff:
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=80713">https://bugzilla.mozilla.org/show_bug.cgi?id=80713</a></p>
</li>
</ul>
<p>Uh, the ^ stuff below should really be @, but it&apos;s my jstut syntax that
gjslint simply hates, so...</p>
<p>^args[
^param[htmlStr]
^param[parentNode]{
The (future) parent node of the iframe.
}
^param[adjacentNode ^oneof[null HTMLNode]]{
insertBefore semantics.
}
^param[linkClickHandler ^func[
^args[
^param[event]{
}
^param[linkNode HTMLElement]{
The actual link HTML element
}
^param[linkUrl String]{
The URL that would be navigated to.
}
^param[linkText String]{
The text associated with the link.
}
]
]]{
The function to invoke when (sanitized) hyperlinks are clicked on.
Currently, the links are always &apos;a&apos; tags, but we might support image
maps in the future.  (Or permanently rule them out.)
}
]</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>htmlStr</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>scrollContainer</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>parentNode</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>beforeNode</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>interactiveMode</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>clickHandler</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='currentMessage' class='mt0'>
    currentMessage<span class='gray'></span>
  </h2>
  
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='CurrentMessage' class='mt0'>
    CurrentMessage<span class='gray'>(header, siblings)</span>
  </h2>
  
    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>MailHeader</code> <strong>header</strong>
          :
          <div class='force-inline'>
            <p>message header.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>siblings</strong>
          :
          <div class='force-inline'>
            <p>whether message has next and previous siblings.</p>

          </div>
        </li>
    </ul>
      <h4>Instance members</h4>
        <div class='collapsible' id='CurrentMessage.header'>
          <a href='#CurrentMessage.header'>
            <code>
              #header<span class='gray'></span>
            </code>
            <div class='force-inline'>
              
            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='CurrentMessage.header' class='mt0'>
                header<span class='gray'></span>
              </h2>
              
            </section>
          </div>
        </div>
        <div class='collapsible' id='CurrentMessage.siblings'>
          <a href='#CurrentMessage.siblings'>
            <code>
              #siblings<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Something like { hasPrevious: true, hasNext: false }.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='CurrentMessage.siblings' class='mt0'>
                siblings<span class='gray'></span>
              </h2>
              <p>Something like { hasPrevious: true, hasNext: false }.</p>
            
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='DEFAULT_STYLE_TAG' class='mt0'>
    DEFAULT_STYLE_TAG<span class='gray'></span>
  </h2>
  <p>Style tag to put in the header of the body.  We currently only support inline
styles in general, so these are primarily overrides and defaults.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='define' class='mt0'>
    define<span class='gray'></span>
  </h2>
  <p>transitionend is not guaranteed to be async after a layout recalulation.
Specifically, a clientHeight read might trigger sync dispatch of
transitionend event to listeners, which could end up calling the function
that did the clientHeight, but the first call would still be stuck waiting
on the clientHeight read to finish. The issue is tracked in bug 1135960. This
is a workaround for that, to guarantee async dispatch by using the async
nature of promise .then callbacks.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='define' class='mt0'>
    define<span class='gray'></span>
  </h2>
  
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='define' class='mt0'>
    define<span class='gray'></span>
  </h2>
  
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='define' class='mt0'>
    define<span class='gray'></span>
  </h2>
  <p>Handles sending out metrics, since final states are distributed across cards
and their interior actions. Need something to coordinate the completion of
certain states to know when to emit the right events. Used right now for:
<a href="https://developer.mozilla.org/en-US/Apps/Build/Performance/Firefox_OS_app_responsiveness_guidelines">https://developer.mozilla.org/en-US/Apps/Build/Performance/Firefox_OS_app_responsiveness_guidelines</a></p>
<p>Events tracked:</p>
<p>apiDone: triggered when app knows data is flowing back and forth from the
worker.</p>
<p>contentDone: when a card&apos;s content is completely available. This includes
any parts that were needed</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='define' class='mt0'>
    define<span class='gray'></span>
  </h2>
  <p>element 0.0.1+
Copyright (c) 2013-2015, The Dojo Foundation All Rights Reserved.
Available via the MIT or new BSD license.
see: <a href="http://github.com/jrburke/element">http://github.com/jrburke/element</a> for details</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='define' class='mt0'>
    define<span class='gray'></span>
  </h2>
  <p>Map error codes to their l10n string id.  This exists because we have
revised some of the strings and so a direct transformation is no longer
sufficient.  If an error code does not exist in this map, it gets mapped
to the &quot;unknown&quot; value&apos;s l10n string id.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='define' class='mt0'>
    define<span class='gray'></span>
  </h2>
  <p>template 0.0.1
Copyright (c) 2013-2015, The Dojo Foundation All Rights Reserved.
Available via the MIT or new BSD license.
see: <a href="http://github.com/jrburke/element">http://github.com/jrburke/element</a> for details</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='define' class='mt0'>
    define<span class='gray'></span>
  </h2>
  <p>Taken from the ECMAScript proposal polyfill in the repo:
<a href="https://github.com/benjamingr/RegExp.escape">https://github.com/benjamingr/RegExp.escape</a>
git commit: de7b32f9f72d15f9d580119963139d1027c46bbe
Copyright CC0 1.0 Universal Benjamin Gruenbaum 2015</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='define' class='mt0'>
    define<span class='gray'></span>
  </h2>
  <p>This module handles the display of either &quot;N new messages&quot; or showing a
&quot;jump to top&quot; arrow if the user is scrolled down more than the
_thresholdMultiplier amounts of screens and the user starts scrolling up.</p>
<p>New message notification takes priority over top arrow display, and CSS
animations are used to transition between the different states. Instances of
this module will rely on a VScroll instance and a scrollContainer to do their
work. The VScroll instance is used to know if the VScroll decided to change
the scroll position itself (vs. a user choice), and in that case the up arrow
is not shown. Also, if the user taps on either the top arrow or New Messages
indicator, VScroll will be told to jump to the top.</p>
<p>The scrollContainer is used to track the scroll events, to know whether to
show the top arrow.</p>
<p>The contents of the element used for an instance will contain either the top
arrow (via background image, and accessibility text) or the New Messages
text. CSS styles based on the data-state attribute trigger the styling.</p>
<p>Possible states for an instance:</p>
<ul>
<li>&apos;&apos;: hidden</li>
<li>&apos;top&apos;: the top arrow is showing</li>
<li>&apos;message&apos;: the New Messages indicator is showing.</li>
</ul>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='define' class='mt0'>
    define<span class='gray'></span>
  </h2>
  <p>This module allows wrapping all the methods on an object to log their calls
and their first argument. There is an option to try to log methods that take
too long too, but it is very coarse. This is mostly useful when wanting to
see a stream of calls in realtime in the log to try to figure out where a
bug is happening. It should just be used in debugging and not used for code
that is committed to the repo.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='define' class='mt0'>
    define<span class='gray'></span>
  </h2>
  <p>Helpers for displaying information about email messages.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='define' class='mt0'>
    define<span class='gray'></span>
  </h2>
  <p>Quasi-secret card for troubleshooting/debugging support.  Not part of the
standard UX flow, potentially not to be localized, and potentially not to
be shipped after initial dogfooding.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='define' class='mt0'>
    define<span class='gray'></span>
  </h2>
  
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='delayedNode' class='mt0'>
    delayedNode<span class='gray'></span>
  </h2>
  <p>Node to save on a delayed save.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='delayedSaveId' class='mt0'>
    delayedSaveId<span class='gray'></span>
  </h2>
  <p>setTimeout ID used to track delayed save.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='deleteBubble' class='mt0'>
    deleteBubble<span class='gray'>(node)</span>
  </h2>
  <p>deleteBubble: Delete the bubble from the parent container.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>node</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='depsFromText' class='mt0'>
    depsFromText<span class='gray'>(text)</span>
  </h2>
  <p>Gives and array of &apos;element!&apos;-based module IDs for
any custom elements found in the string of HTML.
So if the HTML has &lt;some-thing&gt; in it, the returned
dependency array will have &apos;element!some-thing&apos; in it.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>text</strong>
          :
          <div class='force-inline'>
            <p>string of HTML</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code></code>
      :
      <div class='force-inline'>
        <p>array of dependencies. Could be zero
length if no dependencies found.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='idsToUrls' class='mt0'>
    idsToUrls<span class='gray'>(text, refId)</span>
  </h2>
  <p>Replaces hrefid and srcid with href and src, using
require.toUrl(id) to convert the IDs to paths.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>text</strong>
          :
          <div class='force-inline'>
            <p>string of HTML</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>refId</strong>
          :
          <div class='force-inline'>
            <p>the reference module ID to use,
which is normallly the module ID associated with the
HTML string given as input.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code></code>
      :
      <div class='force-inline'>
        <p>converted HTML string.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='load' class='mt0'>
    load<span class='gray'>(id, req, onload, config)</span>
  </h2>
  <p>AMD loader plugin API. Loads the resource. Called by an
AMD loader.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>id</strong>
          :
          <div class='force-inline'>
            <p>resource ID to load.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>req</strong>
          :
          <div class='force-inline'>
            <p>context-specific <code>require</code> function.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>onload</strong>
          :
          <div class='force-inline'>
            <p>called when loading is complete.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>config</strong>
          :
          <div class='force-inline'>
            <p>config object, normally just has
config.isBuild to indicate build scenario.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='makeTemplateFn' class='mt0'>
    makeTemplateFn<span class='gray'>(text)</span>
  </h2>
  <p>Makes a template function for use as the template object
used in a fully realized custom element.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>text</strong>
          :
          <div class='force-inline'>
            <p>string of HTML</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code></code>
      :
      <div class='force-inline'>
        <p>by calling this function, creates a
clone of the DocumentFragment from template.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='objToFn' class='mt0'>
    objToFn<span class='gray'>(obj)</span>
  </h2>
  <p>Turns a template object, created via build, into
a template function.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>obj</strong>
          :
          <div class='force-inline'>
            <p>the object created by a build.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code></code>
      :
      <div class='force-inline'>
        <p>a function to call to get a
DOM object for insertion into the document.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='ready' class='mt0'>
    ready<span class='gray'>(fn)</span>
  </h2>
  <p>Register a function to be run once element dependency
tracing and registration has finished.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>fn</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='textToTemplate' class='mt0'>
    textToTemplate<span class='gray'>(text, id, skipTranslateIds)</span>
  </h2>
  <p>Converts a string of HTML into a full template
object that is used for a custom element&apos;s
prototype <code>template</code> property.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>text</strong>
          :
          <div class='force-inline'>
            <p>string of HTML</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>id</strong>
          :
          <div class='force-inline'>
            <p>module ID for the custom
element associated with this template.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code> <strong>skipTranslateIds</strong>
          :
          <div class='force-inline'>
            <p>for build
concerns, want to avoid the work that translate
IDs until runtime, when more state is known
about final path information. If that is the
case, then pass true for this value.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code></code>
      :
      <div class='force-inline'>
        <p>template object.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='write' class='mt0'>
    write<span class='gray'>(pluginName, id, write)</span>
  </h2>
  <p>AMD loader plugin API. Called by a build tool, to give
this plugin the opportunity to write a resource to
a build file.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>pluginName</strong>
          :
          <div class='force-inline'>
            <p>ID of this module, according
to what the loader thinks the ID is.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>id</strong>
          :
          <div class='force-inline'>
            <p>resource ID handled by plugin.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>write</strong>
          :
          <div class='force-inline'>
            <p>Used to write output to build file.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='detachedCallback' class='mt0'>
    detachedCallback<span class='gray'></span>
  </h2>
  <p>Custom element callback when element is removed from the document.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='iframeShimsOpts' class='mt0'>
    iframeShimsOpts<span class='gray'></span>
  </h2>
  <p>Tweakable display settings for timings.  If you want to mess with these
values from the debugger, do requirejs(&apos;iframe_shims&apos;).iframeShimsOpts.</p>
<p>All current poll timeouts (circa Sep 19, 2014) are ballpark figures arrived
at on a Flame device.  We could probably tighten things up if need be.</p>

      <h4>Static members</h4>
        <div class='collapsible' id='iframeShimsOpts.didResizePollIntervalMS'>
          <a href='#iframeShimsOpts.didResizePollIntervalMS'>
            <code>
              .didResizePollIntervalMS<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>If we polled and there was a change in dimensions, how long should we wait
before our next poll?  The idea is you might make this longer so as to
avoid churn if there is something going on that would affect sizing.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='iframeShimsOpts.didResizePollIntervalMS' class='mt0'>
                didResizePollIntervalMS<span class='gray'></span>
              </h2>
              <p>If we polled and there was a change in dimensions, how long should we wait
            before our next poll?  The idea is you might make this longer so as to
            avoid churn if there is something going on that would affect sizing.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='iframeShimsOpts.initialResizePollIntervalMS'>
          <a href='#iframeShimsOpts.initialResizePollIntervalMS'>
            <code>
              .initialResizePollIntervalMS<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>After first creating the document, how long should we wait before we start
to poll?  Note that the &quot;load&quot; event doesn&apos;t work for us and
&quot;DOMContentLoaded&quot; turns out to be too early.  Even though we forbid remote
resources, it seems like our fonts or something can still need to
asynchronously load or the HTML5 parser no longer synchronously lays
everything out for us.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='iframeShimsOpts.initialResizePollIntervalMS' class='mt0'>
                initialResizePollIntervalMS<span class='gray'></span>
              </h2>
              <p>After first creating the document, how long should we wait before we start
            to poll?  Note that the &quot;load&quot; event doesn&apos;t work for us and
            &quot;DOMContentLoaded&quot; turns out to be too early.  Even though we forbid remote
            resources, it seems like our fonts or something can still need to
            asynchronously load or the HTML5 parser no longer synchronously lays
            everything out for us.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='iframeShimsOpts.initialScale'>
          <a href='#iframeShimsOpts.initialScale'>
            <code>
              .initialScale<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>What should our initial scale-factor be?  If 1, it&apos;s 100%.  If null, we use
the fit-page-width value.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='iframeShimsOpts.initialScale' class='mt0'>
                initialScale<span class='gray'></span>
              </h2>
              <p>What should our initial scale-factor be?  If 1, it&apos;s 100%.  If null, we use
            the fit-page-width value.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='iframeShimsOpts.noResizePollIntervalMS'>
          <a href='#iframeShimsOpts.noResizePollIntervalMS'>
            <code>
              .noResizePollIntervalMS<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>If we polled and there was no change in dimensions, how long should we wait
before our next poll?  The idea is you might make this shorter in order to
make sure we respond sooner / faster.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='iframeShimsOpts.noResizePollIntervalMS' class='mt0'>
                noResizePollIntervalMS<span class='gray'></span>
              </h2>
              <p>If we polled and there was no change in dimensions, how long should we wait
            before our next poll?  The idea is you might make this shorter in order to
            make sure we respond sooner / faster.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='iframeShimsOpts.pictureDelayPollIntervalMS'>
          <a href='#iframeShimsOpts.pictureDelayPollIntervalMS'>
            <code>
              .pictureDelayPollIntervalMS<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>How long should we wait until after we get the last picture &quot;load&quot; event
before polling?  Note that in this case we will have reset our resize count
back to 0 so resizeLimit will need to be hit again.  The waiting is
accomplished by constantly resetting the timeout, so extremely small values
are dangerous here.  Also, experience has shown that when we previously
tried to update our size immediately or near-immediately getting the final
load event, we still would be too early.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='iframeShimsOpts.pictureDelayPollIntervalMS' class='mt0'>
                pictureDelayPollIntervalMS<span class='gray'></span>
              </h2>
              <p>How long should we wait until after we get the last picture &quot;load&quot; event
            before polling?  Note that in this case we will have reset our resize count
            back to 0 so resizeLimit will need to be hit again.  The waiting is
            accomplished by constantly resetting the timeout, so extremely small values
            are dangerous here.  Also, experience has shown that when we previously
            tried to update our size immediately or near-immediately getting the final
            load event, we still would be too early.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='iframeShimsOpts.resizeLimit'>
          <a href='#iframeShimsOpts.resizeLimit'>
            <code>
              .resizeLimit<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>How many times should we poll the dimensions of the HTML iframe before
ceasing?  This is used both for initial display and after &quot;display external
images&quot; or &quot;display embedded images&quot; is triggered.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='iframeShimsOpts.resizeLimit' class='mt0'>
                resizeLimit<span class='gray'></span>
              </h2>
              <p>How many times should we poll the dimensions of the HTML iframe before
            ceasing?  This is used both for initial display and after &quot;display external
            images&quot; or &quot;display embedded images&quot; is triggered.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='iframeShimsOpts.zoomDelayMS'>
          <a href='#iframeShimsOpts.zoomDelayMS'>
            <code>
              .zoomDelayMS<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>What is the minimum delay between changing the transform setting?  You
might think that we want this low, but because we experience memory-spikes
if we modify the transform from a setTimeout, we currently want this
to be short enough that a human would be unlikely to actually re-trigger
while this is active.  It&apos;s handy to keep around to turn it way up so that
we can reproduce the setTimeout problem for debugging, however.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='iframeShimsOpts.zoomDelayMS' class='mt0'>
                zoomDelayMS<span class='gray'></span>
              </h2>
              <p>What is the minimum delay between changing the transform setting?  You
            might think that we want this low, but because we experience memory-spikes
            if we modify the transform from a setTimeout, we currently want this
            to be short enough that a human would be unlikely to actually re-trigger
            while this is active.  It&apos;s handy to keep around to turn it way up so that
            we can reproduce the setTimeout problem for debugging, however.</p>
            
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='die' class='mt0'>
    die<span class='gray'></span>
  </h2>
  <p>Our card is going away; perform all cleanup except destroying our DOM.
This will enable the UI to animate away from our card without weird
graphical glitches.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='domEvt' class='mt0'>
    domEvt<span class='gray'>(event)</span>
  </h2>
  <p>domEvt can be used with data-event=&quot;&quot; to translate internal template
events into custom events emitted from the custom element that contains
the template element that triggered the event. Use like so in the template:</p>
<p><a href="#" data-event="click:domEvt" data-domevt-name="headerClose"></p>
<p>When that a tag receives a click event (from itself or its children) then
domEvt will convert that to a custom event &quot;headerClose&quot;, dispatched on the
custom element.</p>
<p>data-domevt-detail=&quot;something&quot; allows passing a &quot;detail&quot; string in the
custom event that will have the value of &quot;something&quot;.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>event</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='eachProp' class='mt0'>
    eachProp<span class='gray'>(obj, func)</span>
  </h2>
  <p>Cycles over properties in an object and calls a function for each
property value. If the function returns a truthy value, then the
iteration is stopped.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>obj</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>func</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='editBubble' class='mt0'>
    editBubble<span class='gray'>(node)</span>
  </h2>
  <p>editBubble: Turn the bubble back into editable text.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>node</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='editModeChanged' class='mt0'>
    editModeChanged<span class='gray'>(enabled)</span>
  </h2>
  <p>Called from edit_controller mixin when the edit mode has changed. Used to
allow classes mixing in edit_controller to update UI state based on edit
state.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>enabled</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='element' class='mt0'>
    element<span class='gray'>(id, req, onload, config)</span>
  </h2>
  <p>Main module export. These methods are visible to
any module.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>id</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>req</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>onload</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>config</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Static members</h4>
        <div class='collapsible' id='element.load'>
          <a href='#element.load'>
            <code>
              .load<span class='gray'>(id, req, onload, config)</span>
            </code>
            <div class='force-inline'>
              <p>The AMD loader plugin API. Called by an AMD loader
to handle &apos;element!&apos; resources.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='element.load' class='mt0'>
                load<span class='gray'>(id, req, onload, config)</span>
              </h2>
              <p>The AMD loader plugin API. Called by an AMD loader
            to handle &apos;element!&apos; resources.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>id</strong>
                      :
                      <div class='force-inline'>
                        <p>module ID to load.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>req</strong>
                      :
                      <div class='force-inline'>
                        <p>context-specific <code>require</code> function.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>onload</strong>
                      :
                      <div class='force-inline'>
                        <p>function to call once loading is complete.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>config</strong>
                      :
                      <div class='force-inline'>
                        <p>config from the loader. Normally just has
            config.isBuild if in a build scenario.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='emitDomEvent' class='mt0'>
    emitDomEvent<span class='gray'>(eventName, detail)</span>
  </h2>
  <p>Shortcut for triggering a DOM custom event with a detail object. Use
this instead of evt when dealing with a custom element that wants to
communicate with ancestor elements about an event (so therefore could
bubble) that was based on a plain DOM event that happened inside the
custom element.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>eventName</strong>
          :
          <div class='force-inline'>
            <p>The event name</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>detail</strong>
          :
          <div class='force-inline'>
            <p>The state info passed in event.detail</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='emitWhenListener' class='mt0'>
    emitWhenListener<span class='gray'>(id)</span>
  </h2>
  <p>Like emit, but if no listeners yet, holds on
to the value until there is one. Any other
args after first one are passed to listeners.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>id</strong>
          :
          <div class='force-inline'>
            <p>event ID.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='latest' class='mt0'>
    latest<span class='gray'>(id, fn)</span>
  </h2>
  <p>Waits for a property on the object that has the event interface
to be available. That property MUST EVALUATE TO A TRUTHY VALUE.
hasOwnProperty is not used because many objects are created with
null placeholders to give a proper JS engine shape to them, and
this method should not trigger the listener for those cases.
If the property is already available, call the listener right
away. If not available right away, listens for an event name that
matches the property name.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>id</strong>
          :
          <div class='force-inline'>
            <p>property name.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>fn</strong>
          :
          <div class='force-inline'>
            <p>listener.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='latestOnce' class='mt0'>
    latestOnce<span class='gray'>(id, fn)</span>
  </h2>
  <p>Same as latest, but only calls the listener once.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>id</strong>
          :
          <div class='force-inline'>
            <p>property name.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>fn</strong>
          :
          <div class='force-inline'>
            <p>listener.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='ensureName' class='mt0'>
    ensureName<span class='gray'>(blob, [name], [count])</span>
  </h2>
  <p>Given a blob, and a possible name, make sure a text name
is constructed. If name is already a value, that is used,
otherwise, the blob type and the count are used to generate
a name.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Blob">Blob</a></code> <strong>blob</strong>
          :
          <div class='force-inline'>
            <p>the blog associated with the attachment.</p>

          </div>
        </li>
        <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>]</code> <strong>name</strong>
          :
          <div class='force-inline'>
            <p>possible existing name.</p>

          </div>
        </li>
        <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code>]</code> <strong>count</strong>
          :
          <div class='force-inline'>
            <p>a count to use in the generated name.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='ensureNameList' class='mt0'>
    ensureNameList<span class='gray'>(blobs, names)</span>
  </h2>
  <p>Given an array of blobs and a corresponding array of file names,
make sure there is a file name entry for each blob. If a file name
is missing, generate one using part of the mime type of the blob
as the file extension in the name. This method MODIFIES the
names array, and expects names to be an array.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code> <strong>blobs</strong>
          :
          <div class='force-inline'>
            <p>the blobs that need names.</p>

          </div>
        </li>
        <li> <strong>names</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code></code>
      :
      <div class='force-inline'>
        <p>Array of strings.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='exec' class='mt0'>
    exec<span class='gray'>(text)</span>
  </h2>
  <p>Executes the text. Normally just uses eval, but can be modified
to use a better, environment-specific call. Only used for transpiling
loader plugins, not for plain JS modules.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>text</strong>
          :
          <div class='force-inline'>
            <p>the text to execute/evaluate.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='expectingMessageSuid' class='mt0'>
    expectingMessageSuid<span class='gray'></span>
  </h2>
  
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='extractAddresses' class='mt0'>
    extractAddresses<span class='gray'></span>
  </h2>
  <p>Extract addresses from the bubbles and/or inputs, returning a map
with keys for &apos;to&apos;, &apos;cc&apos;, &apos;bcc&apos;, &apos;all&apos;, and &apos;invalid&apos; addresses.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='fetchNotificationsData' class='mt0'>
    fetchNotificationsData<span class='gray'>(ntype)</span>
  </h2>
  <p>Fetches notification data for the notification type, ntype. This method
assumes there is only one ntype of notification per account.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>ntype</strong>
          :
          <div class='force-inline'>
            <p>The notification type, like &apos;sync&apos;.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Promise that resolves to a an object whose keys
are account IDs and values are notification data.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='fileSize' class='mt0'>
    fileSize<span class='gray'>(node, sizeInBytes)</span>
  </h2>
  <p>Display a human-readable file size.  Currently we always display
things in kilobytes because we are targeting a mobile device and we
want bigger sizes (like megabytes) to be obviously large numbers.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>node</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>sizeInBytes</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='findAncestorWithClass' class='mt0'>
    findAncestorWithClass<span class='gray'>(node, className)</span>
  </h2>
  <p>Given a node, if it or an ancestor has the CSS className, return the node
with that className. Returns null if not a match.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code> <strong>node</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>className</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='firstRenderedIndex' class='mt0'>
    firstRenderedIndex<span class='gray'></span>
  </h2>
  <p>What is the first/lowest rendered index?  Tracked so the HTML
cache logic can know if we&apos;ve got the data for it to be able to
render the first N nodes.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='focusInputAndPositionCursorFromContainerClick' class='mt0'>
    focusInputAndPositionCursorFromContainerClick<span class='gray'>(event, input)</span>
  </h2>
  <p>To make it easier to focus input boxes, we have clicks on their owning
container cause a focus event to occur on the input.  This method helps us
also position the cursor based on the location of the click so the cursor
can end up at the edges of the input box which could otherwise be very hard
to do.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>event</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>input</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='formatMatchString' class='mt0'>
    formatMatchString<span class='gray'>(queryRegExp, text, node)</span>
  </h2>
  <p>Converts a text string into a span and some text nodes that are placed
as the children of node. The span contains the match for the queryRegExp.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp">RegExp</a></code> <strong>queryRegExp</strong>
          :
          <div class='force-inline'>
            <p>The regexp whose match is highlighted via a
span in the target text.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>text</strong>
          :
          <div class='force-inline'>
            <p>The target text to find the match.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element">Element</a></code> <strong>node</strong>
          :
          <div class='force-inline'>
            <p>The element that will display the matched text.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='FormNavigation' class='mt0'>
    FormNavigation<span class='gray'>(options)</span>
  </h2>
  <p>Class to handle form input navigation.</p>
<p>If &apos;Enter&apos; is hit, next input element will be focused,
and if the input element is the last one, trigger &apos;onLast&apos; callback.</p>
<p>options:
{
formElem: element,             // The form element
checkFormValidity: function    // Function to check form validity
onLast: function               // Callback when &apos;Enter&apos; in the last input
}</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>options</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='fromEditor' class='mt0'>
    fromEditor<span class='gray'>(value)</span>
  </h2>
  <p>Gets the raw value from a contenteditable div</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>value</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getAutocompleteItem' class='mt0'>
    getAutocompleteItem<span class='gray'>(node)</span>
  </h2>
  <p>Given a node, if it or an ancestor is an autocomplete item in the
autocomplete list, return the autcomplete item node. Returns null if not a
match.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code> <strong>node</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getExistingEntries' class='mt0'>
    getExistingEntries<span class='gray'></span>
  </h2>
  <p>This method can be overriden by the owner of the autocomplete to return
existing entries already attached to the email. The result should be an
array of objects that have &quot;name&quot; and &quot;address&quot; properties.</p>

      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code></code>
      :
      <div class='force-inline'>
        <p>Array of existing entries.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getSyncEnv' class='mt0'>
    getSyncEnv<span class='gray'>(fn)</span>
  </h2>
  <p>Helper to just get some environment data for dealing with sync-based
notfication data. Exists to reduce the curly brace pyramid of doom and
to normalize existing sync notification info.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>fn</strong>
          :
          <div class='force-inline'>
            <p>function to call once env info is fetched.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='HEADER_SIZES' class='mt0'>
    HEADER_SIZES<span class='gray'></span>
  </h2>
  <p>Allowable font sizes for header elements.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='HeaderCursor' class='mt0'>
    HeaderCursor<span class='gray'>(model)</span>
  </h2>
  
    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>model</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='hideAccounts' class='mt0'>
    hideAccounts<span class='gray'></span>
  </h2>
  <p>Use a translateY transition to hide accounts. But to do that correctly,
need to use the height of the account listing. The scroll inner needs to
be updated too, so that it form-fits over the folder list.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='hideEmptyLayout' class='mt0'>
    hideEmptyLayout<span class='gray'></span>
  </h2>
  <p>Show buttons we hid in <code>showEmptyLayout</code> and hide the &quot;empty folder&quot;
message.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='indexOfGeneric' class='mt0'>
    indexOfGeneric<span class='gray'>(array, callback, thisObject)</span>
  </h2>
  
    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code> <strong>array</strong>
          :
          <div class='force-inline'>
            <p>some array.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>callback</strong>
          :
          <div class='force-inline'>
            <p>function to test for each element.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>thisObject</strong>
          :
          <div class='force-inline'>
            <p>object to use as this for callback.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='indexOfMessageById' class='mt0'>
    indexOfMessageById<span class='gray'>(id)</span>
  </h2>
  
    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>id</strong>
          :
          <div class='force-inline'>
            <p>message id.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code></code>
      :
      <div class='force-inline'>
        <p>the index of the message cursor&apos;s current message
in the message slice it has checked out.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='init' class='mt0'>
    init<span class='gray'>(scrollContainer, bindData, defaultVScrollData)</span>
  </h2>
  <p>Call this from the createdCallback of the module that wants to display
a message-based vscroll.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>scrollContainer</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>bindData</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>defaultVScrollData</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='init' class='mt0'>
    init<span class='gray'></span>
  </h2>
  <p>Sets up the event wiring and will trigger the slice creation by listening
to model &apos;folder&apos; changes. Want to wait until there are views that need
to use the header_cursor for showing UI, to avoid extra work, like in the
background sync case.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='insertBubble' class='mt0'>
    insertBubble<span class='gray'>(node, name, address)</span>
  </h2>
  <p>insertBubble: We can set the input text node, name and address to
insert a bubble before text input.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>node</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>name</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>address</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='isValidAddress' class='mt0'>
    isValidAddress<span class='gray'>(address)</span>
  </h2>
  <p>Return true if the given address is syntactically valid.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>address</strong>
          :
          <div class='force-inline'>
            <p>The email address to validate, as a string.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='lastEntryTime' class='mt0'>
    lastEntryTime<span class='gray'></span>
  </h2>
  <p>Makes sure the message type is wanted, given pendingUiMessageType concerns,
and not coming in at a fast rate due to things like double clicks. Only
necessary to use if the message is something that would insert cards, and
fast entries could mess up card state.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='learnAbout' class='mt0'>
    learnAbout<span class='gray'></span>
  </h2>
  <p>Trigger the back-end&apos;s autoconfig logic based on just knowing the user&apos;s
email address to figure out what to do next.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='loadNextChunk' class='mt0'>
    loadNextChunk<span class='gray'>(desiredHighAbsoluteIndex)</span>
  </h2>
  <p>Request data through desiredHighAbsoluteIndex if we don&apos;t have it
already and we think it exists.  If we already have an outstanding
request we will save off this most recent request to process once
the current request completes.  Any previously queued request will
be forgotten regardless of how it compares to the newly queued
request.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>desiredHighAbsoluteIndex</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='localOnModelLoaded' class='mt0'>
    localOnModelLoaded<span class='gray'>(model, callback)</span>
  </h2>
  <p>startupOnModelLoaded is set to this function if the
data_has_account localStorage value is not known. Called eventually by
config.js once the model module has been loaded.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>model</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>callback</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='makeFullId' class='mt0'>
    makeFullId<span class='gray'>(id, refId)</span>
  </h2>
  <p>For hrefid and srcid resolution, need full IDs.
This method takes care of creating full IDs. It
could be improved by removing extraneous ./ and
../ references.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>id</strong>
          :
          <div class='force-inline'>
            <p>possible local, relative ID</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>refId</strong>
          :
          <div class='force-inline'>
            <p>ID to use as a basis for the
the local ID.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code></code>
      :
      <div class='force-inline'>
        <p>full ID</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='makeMap' class='mt0'>
    makeMap<span class='gray'>(name, relName, applyMap)</span>
  </h2>
  <p>Makes a name map, normalizing the name, and using a plugin
for normalization if necessary. Grabs a ref to plugin
too, as an optimization.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>name</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>relName</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>applyMap</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='makePropName' class='mt0'>
    makePropName<span class='gray'>(attrName)</span>
  </h2>
  <p>Converts an attribute like a-long-attr to aLongAttr</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>attrName</strong>
          :
          <div class='force-inline'>
            <p>The attribute name</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='match' class='mt0'>
    match<span class='gray'>(query)</span>
  </h2>
  <p>Finds matches for the given query in the name and email for known people.
Returns a promise that resolves to an object that has the query and a
&quot;match&quot; array of mozContact entries. The match array will be a zero length
array for no matches. See this bug about expanding the data source beyond
contacts matches:
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1188710">https://bugzilla.mozilla.org/show_bug.cgi?id=1188710</a></p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>query</strong>
          :
          <div class='force-inline'>
            <p>the name/email query to use.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='MAX_ATTACHMENT_SIZE' class='mt0'>
    MAX_ATTACHMENT_SIZE<span class='gray'></span>
  </h2>
  <p>Previously we limited to 5MiB because of device limitations primarily
related to downloading attachments larger than 5MiB on Tarako devices.
On more capable devices this is less of a concern and the dominating
factor becomes the limits of the mail providers themselves.  The value
converged upon by most providers is 25MiB.  Because of encoding overhead
and message body concerns, for now we&apos;re sticking to 22MiB, but we should
bump this as appropriate.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='MAXIMUM_BYTES_PER_MESSAGE_DURING_SCROLL' class='mt0'>
    MAXIMUM_BYTES_PER_MESSAGE_DURING_SCROLL<span class='gray'></span>
  </h2>
  <p>Fetch up to 4kb while scrolling</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='MAXIMUM_MS_BETWEEN_SNIPPET_REQUEST' class='mt0'>
    MAXIMUM_MS_BETWEEN_SNIPPET_REQUEST<span class='gray'></span>
  </h2>
  <p>Maximum amount of time between issuing snippet requests.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='messages_complete' class='mt0'>
    messages_complete<span class='gray'>([newEmailCount])</span>
  </h2>
  
    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>]</code> <strong>newEmailCount</strong>
          :
          <div class='force-inline'>
            <p>Optional number of new messages.
The funny name because it is auto-bound as a listener for
messagesSlice events in headerCursor using a naming convention.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='messagesSlice' class='mt0'>
    messagesSlice<span class='gray'></span>
  </h2>
  
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='mimeToClass' class='mt0'>
    mimeToClass<span class='gray'>(mimeType)</span>
  </h2>
  <p>Given a mime type, generates a CSS class name that uses just the first part
of the mime type. So, audio/ogg becomes mime-audio.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>mimeType</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code></code>
      :
      <div class='force-inline'>
        <p>a class name usable in CSS.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='MINIMUM_ITEMS_FOR_SCROLL_CALC' class='mt0'>
    MINIMUM_ITEMS_FOR_SCROLL_CALC<span class='gray'></span>
  </h2>
  <p>Minimum number of items there must be in the message slice
for us to attempt to limit the selection of snippets to fetch.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='mix' class='mt0'>
    mix<span class='gray'>(target, source, override)</span>
  </h2>
  <p>Mixes properties from source into target.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>target</strong>
          :
          <div class='force-inline'>
            <p>target of the mix.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>source</strong>
          :
          <div class='force-inline'>
            <p>source object providing properties to mix in.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code> <strong>override</strong>
          :
          <div class='force-inline'>
            <p>if target already has a the property,
override it with the one from source.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code></code>
      :
      <div class='force-inline'>
        <p>the target object, now with the new properties
mixed in.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='mixin' class='mt0'>
    mixin<span class='gray'>(target, source, force, deepStringMixin)</span>
  </h2>
  <p>Simple function to mix in properties from source into target,
but only if target does not already have a property of the same name.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>target</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>source</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>force</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>deepStringMixin</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='nodes' class='mt0'>
    nodes<span class='gray'></span>
  </h2>
  <p>The list of reused Element nodes.  Their order in this list has
no correlation with their display position.  If you decide to
reorder them you may break/hurt _nextAvailableNode.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='nodesDataIndices' class='mt0'>
    nodesDataIndices<span class='gray'></span>
  </h2>
  <p>Maps data indexes to their reusable Element nodes if currently
rendered, or -1 if previously (but not currently rendered).
Populated as nodes are rendered so not being in the map is
effectively the same as having a value of -1.</p>
<p>Maintained by _setNodeDataIndex and accessed by
_getNodeFromDataIndex.  Use those methods and do not touch this
map directly.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='nodesIndex' class='mt0'>
    nodesIndex<span class='gray'></span>
  </h2>
  <p>Internal state variable of _nextAvailableNode for efficiency.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='normalize' class='mt0'>
    normalize<span class='gray'>(name, baseName, applyMap)</span>
  </h2>
  <p>Given a relative module name, like ./something, normalize it to
a real name that can be mapped to a path.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>name</strong>
          :
          <div class='force-inline'>
            <p>the relative name</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>baseName</strong>
          :
          <div class='force-inline'>
            <p>a real name that the name arg is relative
to.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code> <strong>applyMap</strong>
          :
          <div class='force-inline'>
            <p>apply the map config to the value. Should
only be done if this normalization is for a dependency ID.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code></code>
      :
      <div class='force-inline'>
        <p>normalized name</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='oauth2Fetch' class='mt0'>
    oauth2Fetch<span class='gray'>(o2Settings, [extraQueryObject])</span>
  </h2>
  <p>Does the OAuth dialog dance.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>o2Settings</strong>
          :
          <div class='force-inline'>
            
          </div>
            <ul>
                <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> o2Settings.authEndpoint
                  <p>URL of the authorization endpoint.</p>
</li>
                <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> o2Settings.scope
                  <p>The scope to request.</p>
</li>
                <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>]</code> o2Settings.secretGroup
                  <p>Secret group identifier if this is an initial OAuth.  If this is a reauth
then the clientId should be provided instead and reused.</p>
</li>
                <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>]</code> o2Settings.clientId
                  <p>If this is a reauth (or don&apos;t need to/want to use our internal secret
table, the client_id to reuse.  clientSecret should also be provided
(even though we don&apos;t use it ourselves) for consistency.</p>
</li>
            </ul>
        </li>
        <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>]</code> <strong>extraQueryObject</strong>
          :
          <div class='force-inline'>
            <p>extra query args to pass to the
provider. These are typically only known at runtime vs the o2Settings.
The property names in the extraQueryObject will be mapped to the provider&apos;s
preferred names by using o2Settings.extraArgsMap</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>The resolved value will be an object with these
properties:</p>
<ul>
<li>status: String indicating status of the request. &apos;succcess&apos; and &apos;cancel&apos;
are the possible values.</li>
<li>tokens: If status is &apos;success&apos;, this will be the token data in the form
{ accessToken, refreshToken, expireTimeMS }</li>
<li>secrets: The clientId and clientSecret used for this oauth.</li>
</ul>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='oldListSize' class='mt0'>
    oldListSize<span class='gray'></span>
  </h2>
  <p>The old list size is used for display purposes, to know if new data would
affect the scroll offset or if the total display height needs to be
adjusted.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onAccountsSplice' class='mt0'>
    onAccountsSplice<span class='gray'>(index, howMany, addedItems, requested, moreExpected)</span>
  </h2>
  <p>Used to populate the account list.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>index</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>howMany</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>addedItems</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>requested</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>moreExpected</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onActivityRequest' class='mt0'>
    onActivityRequest<span class='gray'>(req)</span>
  </h2>
  <p>Perform requested activity.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>MozActivityRequestHandler</code> <strong>req</strong>
          :
          <div class='force-inline'>
            <p>activity invocation.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onAddressInput' class='mt0'>
    onAddressInput<span class='gray'>(evt)</span>
  </h2>
  <p>Handle bubble creation while keyboard comma input.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>evt</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onAddressKeydown' class='mt0'>
    onAddressKeydown<span class='gray'>(evt)</span>
  </h2>
  <p>Handle bubble deletion while keyboard backspace keydown.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>evt</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onBack' class='mt0'>
    onBack<span class='gray'></span>
  </h2>
  <p>Save the draft if there&apos;s anything to it, close the card.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onbackgroundsendstatus' class='mt0'>
    onbackgroundsendstatus<span class='gray'>(accountId, suid, state, err, badAddresses, sendFailures, emitNotifications, willSendMore, localizedDescription, data)</span>
  </h2>
  <p>The API passes through background send notifications with the
following data (see the &quot;sendOutboxMessages&quot; job and/or
<code>GELAM/js/jobs/outbox.js</code>):</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>int</code> <strong>accountId</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>suid</strong>
          :
          <div class='force-inline'>
            <p>SUID of the message</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>state</strong>
          :
          <div class='force-inline'>
            <p>&apos;pending&apos;, &apos;syncing&apos;, &apos;success&apos;, or &apos;error&apos;</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>err</strong>
          :
          <div class='force-inline'>
            <p>(if applicable, otherwise null)</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">array</a></code> <strong>badAddresses</strong>
          :
          <div class='force-inline'>
            <p>(if applicable)</p>

          </div>
        </li>
        <li><code>int</code> <strong>sendFailures</strong>
          :
          <div class='force-inline'>
            <p>Count of the number of times the message failed to send.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code> <strong>emitNotifications</strong>
          :
          <div class='force-inline'>
            <p>True if this message is being sent as a direct result of
the user sending a message from the compose window. False
otherwise, as in when the user &quot;refreshes&quot; the outbox.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code> <strong>willSendMore</strong>
          :
          <div class='force-inline'>
            <p>True if we will send a subsequent message from the outbox
immediately after sending this message.</p>
<p>Additionally, this function appends the following to that
structured data:</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>localizedDescription</strong>
          :
          <div class='force-inline'>
            <p>Notification text.</p>
<p>If the application is in the foreground, we notify the user on
both success and failure. If the application is in the
background, we only post a system notifiaction on failure.</p>

          </div>
        </li>
        <li> <strong>data</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onBrowserComplete' class='mt0'>
    onBrowserComplete<span class='gray'>(event, message)</span>
  </h2>
  <p>The postMessage listener called from redirect.html to indicate the final
data returned from the oauth jump.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>DOMEvent</code> <strong>event</strong>
          :
          <div class='force-inline'>
            <p>the event sent via redirect.html&apos;s postMessage.</p>

          </div>
        </li>
        <li> <strong>message</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onCardVisible' class='mt0'>
    onCardVisible<span class='gray'></span>
  </h2>
  <p>Called by Cards when the instance of this card type is the
visible card.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onCardVisible' class='mt0'>
    onCardVisible<span class='gray'></span>
  </h2>
  <p>When the card is visible, start the animations to show the content
and fade in the tap shield.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onClickAccount' class='mt0'>
    onClickAccount<span class='gray'>(accountNode, event)</span>
  </h2>
  <p>Tapping a different account will jump to the inbox for that
account, but only do the jump if a new account selection,
and only after hiding the folder_picker.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>accountNode</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>event</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onClickMessage' class='mt0'>
    onClickMessage<span class='gray'>(event)</span>
  </h2>
  <p>A mixin for lst cards that want tapping on a message to go to a message
reader. Check all the <code>this</code> references below to see implicit dependencies
on instance state.
A longer range TODO is to remove or make explicit the dependencies.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>event</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onCurrentCardDocumentVisibilityChange' class='mt0'>
    onCurrentCardDocumentVisibilityChange<span class='gray'></span>
  </h2>
  <p>Save the draft if there&apos;s anything to it. Called by Cards if this card
is also the current card.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onCurrentCardDocumentVisibilityChange' class='mt0'>
    onCurrentCardDocumentVisibilityChange<span class='gray'></span>
  </h2>
  <p>An API method for the cards infrastructure, that Cards will call when the
page visibility changes and this card is the currently displayed card.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onCurrentMessage' class='mt0'>
    onCurrentMessage<span class='gray'>(currentMessage, index)</span>
  </h2>
  <p>Scroll to make sure that the current message is in our visible window.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>header_cursor.CurrentMessage</code> <strong>currentMessage</strong>
          :
          <div class='force-inline'>
            <p>representation of
the email we&apos;re currently reading.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>index</strong>
          :
          <div class='force-inline'>
            <p>the index of the message in the messagesSlice</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onCurrentMessage' class='mt0'>
    onCurrentMessage<span class='gray'>(currentMessage)</span>
  </h2>
  <p>Set the message we&apos;re reading.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>MessageCursor.CurrentMessage</code> <strong>currentMessage</strong>
          :
          <div class='force-inline'>
            <p>representation of
the email we&apos;re currently reading.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onDocumentEvent' class='mt0'>
    onDocumentEvent<span class='gray'>(event)</span>
  </h2>
  <p>Triggered by any click or focus in the document. Used to determine if the
autocomplete should be hidden.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>event</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onEnvelopeClick' class='mt0'>
    onEnvelopeClick<span class='gray'>(event)</span>
  </h2>
  <p>Handle peep bubble click event and trigger context menu.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>event</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onFocus' class='mt0'>
    onFocus<span class='gray'>(event)</span>
  </h2>
  <p>Triggered by input focus events.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>event</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onFolderPickerClosing' class='mt0'>
    onFolderPickerClosing<span class='gray'></span>
  </h2>
  <p>Called when the folder picker is animating to close. Need to
listen for it so this card can animate fading in the header menu.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onFolderShown' class='mt0'>
    onFolderShown<span class='gray'></span>
  </h2>
  <p>Listener called when a folder is shown. The listener emits an
&apos;inboxShown&apos; for the current account, if the inbox is really being shown
and the app is visible. Useful if periodic sync is involved, and
notifications need to be closed if the inbox is visible to the user.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onInput' class='mt0'>
    onInput<span class='gray'>(event)</span>
  </h2>
  <p>Triggered by input element input events.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>event</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onLatestFolder' class='mt0'>
    onLatestFolder<span class='gray'>(folder)</span>
  </h2>
  
    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>folder</strong>
          :
          <div class='force-inline'>
            <p>the folder we switched to.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onMatchClick' class='mt0'>
    onMatchClick<span class='gray'>(event)</span>
  </h2>
  <p>Handles taps inside the autocomplete. The tap could occur outside a match
element, in which case means the autocomplete should just close.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>event</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onMessagesSpliceRemove' class='mt0'>
    onMessagesSpliceRemove<span class='gray'>(removedHeader, removedFromIndex)</span>
  </h2>
  <p>Choose a new currentMessage if we spilled the existing one.
Otherwise, emit &apos;currentMessage&apos; event to update stale listeners
in case we spilled a sibling.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>MailHeader</code> <strong>removedHeader</strong>
          :
          <div class='force-inline'>
            <p>header that got removed.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code> <strong>removedFromIndex</strong>
          :
          <div class='force-inline'>
            <p>index header was removed from.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onNext' class='mt0'>
    onNext<span class='gray'>(event)</span>
  </h2>
  <p>Broadcast that we need to move next if there&apos;s a next sibling.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Event">Event</a></code> <strong>event</strong>
          :
          <div class='force-inline'>
            <p>next arrow click event.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onPrevious' class='mt0'>
    onPrevious<span class='gray'>(event)</span>
  </h2>
  <p>Broadcast that we need to move previous if there&apos;s a previous sibling.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Event">Event</a></code> <strong>event</strong>
          :
          <div class='force-inline'>
            <p>previous arrow click event.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onReady' class='mt0'>
    onReady<span class='gray'></span>
  </h2>
  <p>Handles converting <template id="body"> template
into a real body content, and calling back
template.ready listeners.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onResize' class='mt0'>
    onResize<span class='gray'>(event)</span>
  </h2>
  <p>Handles window resizes. Could be triggered by keyboard size changes.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>event</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onSend' class='mt0'>
    onSend<span class='gray'></span>
  </h2>
  <p>If the user attempts to tap the send button while there are
invalid addresses, display a dialog to warn them to correct the
error. Otherwise, go ahead and send the message.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onUsePassword' class='mt0'>
    onUsePassword<span class='gray'></span>
  </h2>
  <p>Assume we will be successful; update the password, trigger a reauth
attempt, then close the card.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='parseName' class='mt0'>
    parseName<span class='gray'>(name)</span>
  </h2>
  <p>Parses a resource name into its component parts. Resource names
look like: module/name.ext!strip, where the !strip part is
optional.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>name</strong>
          :
          <div class='force-inline'>
            <p>the resource name</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code></code>
      :
      <div class='force-inline'>
        <p>with properties &quot;moduleName&quot;, &quot;ext&quot; and &quot;strip&quot;
where strip is a boolean.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='useXhr' class='mt0'>
    useXhr<span class='gray'>(url, protocol, hostname, port)</span>
  </h2>
  <p>Is an URL on another domain. Only works for browser use, returns
false in non-browser environments. Only used to know if an
optimized .js version of a text resource should be loaded
instead.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>url</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>protocol</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>hostname</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>port</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code></code>
      :
      <div class='force-inline'>
        <p>Boolean</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='populateEditor' class='mt0'>
    populateEditor<span class='gray'>(value)</span>
  </h2>
  <p>Inserts an email into the contenteditable element</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>value</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='positionAndHide' class='mt0'>
    positionAndHide<span class='gray'></span>
  </h2>
  <p>Makes sure the input element is at the top of the view, but do not show
the autocomplete list because there are no matches to show.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='positionElements' class='mt0'>
    positionElements<span class='gray'></span>
  </h2>
  <p>Positions the input area to the top of the view and sizes the list to
take up as much view space as possible.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='proceed' class='mt0'>
    proceed<span class='gray'></span>
  </h2>
  <p>After potentially modifying the account, continue onward.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='reallySend' class='mt0'>
    reallySend<span class='gray'></span>
  </h2>
  <p>Actually send the message, foregoing any validation that the
addresses are valid (as we did in <code>onSend</code> above).</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='redeemCode' class='mt0'>
    redeemCode<span class='gray'>(code)</span>
  </h2>
  <p>Turns the code received from the oauth jump into an actual oauth token
data.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>code</strong>
          :
          <div class='force-inline'>
            <p>the code received from the oauth2 provider.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='relativeDateElement' class='mt0'>
    relativeDateElement<span class='gray'>(element, time, useCompactFormat)</span>
  </h2>
  <p>Display a human-readable relative timestamp.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>element</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>time</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>useCompactFormat</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='setPrettyNodeDate' class='mt0'>
    setPrettyNodeDate<span class='gray'>(node, timestamp)</span>
  </h2>
  <p>Given a node, show a pretty date for its contents.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code> <strong>node</strong>
          :
          <div class='force-inline'>
            <p>the DOM node.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>timestamp</strong>
          :
          <div class='force-inline'>
            <p>a timestamp like the one retuned
from Date.getTime().</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='removeMessagesHtml' class='mt0'>
    removeMessagesHtml<span class='gray'></span>
  </h2>
  <p>Used to remove the cached HTML from a cache restore of HTML. Do not use
this for clearing the display of messages when the list of messages
change, instead use methods on the vScroll object.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='renderAttachments' class='mt0'>
    renderAttachments<span class='gray'></span>
  </h2>
  <p>Build the UI that displays the current attachments.  Invokes
<code>updateAttachmentsSize</code> too so you don&apos;t have to.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='renderSendStatus' class='mt0'>
    renderSendStatus<span class='gray'></span>
  </h2>
  <p>If this draft came from the outbox, it might have a sendStatus
description explaining why the send failed. Display it if so.</p>
<p>The sendStatus information on this messages is provided through
the sendOutboxMessages job; see <code>jobs/outbox.js</code> in GELAM for details.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='require' class='mt0'>
    require<span class='gray'></span>
  </h2>
  <p>Autocomplete custom element that contains a list of elements that show the
autocomplete matches.</p>
<p>This custom element relies on a CSS class-based API to bind to nodes outside
of this autocomplete. The CSS/HTML structure expected by this autocomplete:</p>
<ul>
<li>
<p>An element with the CSS class of &quot;cmp-autocomplete-origin&quot; that is the the
master scroll area for the view. It should be an ancestor node to the
autocomplete and also contain the &apos;cmp-autocomplete-input-list&apos; element that
has all the input elements. This element is used as the &quot;origin&quot; for the
style.top placement of the autocomplete list.</p>
</li>
<li>
<p>An element that holds all the input fields, with the CSS class of
&quot;cmp-autocomplete-input-list&quot;. That inputArea will be translateY&apos;d to make
sure the current input focus is visible at the top of the view.</p>
</li>
<li>
<p>Individual rows that hold an autocomplete must specify a
&quot;cmp-autocomplete-input-label&quot; CSS class, so that for a given input, that
parent can be found to be marked as &quot;active&quot;. This allows just that row to
change its alignment so its label and + icon are aligned at the bottom with
the text input.</p>
</li>
</ul>
<p>The autocomplete custom element also expects a &quot;data-source&quot; HTML attribute
to be set on it, which indicates the module ID to use as the data source for
the matches.</p>
<p>The owner of this custom element instance (typically a view card), should
override the getExistingEntries() method on the instance to return the
current entries, to avoid dupes showing up in subsequent autocomplete
matches.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='require' class='mt0'>
    require<span class='gray'></span>
  </h2>
  <p>Component that shows a message-based vscroll. Assumes the following are set
on the this component before vscroll is active:</p>
<ul>
<li>headerCursor</li>
</ul>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='require' class='mt0'>
    require<span class='gray'></span>
  </h2>
  <p>List messages for listing the contents of folders. Multi-editing is just a
state of the card.</p>
<p>== Cache behavior ==</p>
<p>This is a card that can be instantiated using the cached HTML stored by the
html_cache. As such, it is constructed to allow clicks on message list items
before the back end has loaded up, and to know how to refresh the cached
state by looking at the use the usingCachedNode property. It also prevents
clicks from button actions that need back end data to complete if the click
would result in a card that cannot also handle delayed back end startup.
It tracks if the back end has started up by checking curFolder, which is
set to a data object sent from the back end.</p>
<p>== Less-than-infinite scrolling ==</p>
<p>A dream UI would be to let the user smoothly scroll through all of the
messages in a folder, syncing them from the server as-needed.  The limits
on this are 1) bandwidth cost, and 2) storage limitations.</p>
<p>Our sync costs are A) initial sync of a time range, and B) update sync of a
time range.  #A is sufficiently expensive that it makes sense to prompt the
user when we are going to sync further into a time range.  #B is cheap
enough and having already synced the time range suggests sufficient user
interest.</p>
<p>So the way our UI works is that we do an infinite-scroll-type thing for
messages that we already know about.  If we are on metered bandwidth, then
we require the user to click a button in the display list to sync more
messages.  If we are on unmetered bandwidth, we will eventually forego that.
(For testing purposes right now, we want to pretend everything is metered.)
We might still want to display a button at some storage threshold level,
like if the folder is already using a lot of space.</p>
<p>See <code>onScroll</code> for more details.</p>
<p>XXX this class wants to be cleaned up, badly.  A lot of this may want to
happen via pushing more of the hiding/showing logic out onto CSS, taking
care to use efficient selectors.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='requirejs' class='mt0'>
    requirejs<span class='gray'></span>
  </h2>
  <p>alameda 0.2.0-native-promise Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
Available via the MIT or new BSD license.
see: <a href="http://github.com/requirejs/alameda">http://github.com/requirejs/alameda</a> for details</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='resetNodeForCache' class='mt0'>
    resetNodeForCache<span class='gray'>(node)</span>
  </h2>
  <p>Resets the passed in node to not have any styles or content so that it is
suitable for html cache storage. Modifies the node in place.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code> <strong>node</strong>
          :
          <div class='force-inline'>
            <p>the cloned node of message_list_topbar type.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='showNewEmailCount' class='mt0'>
    showNewEmailCount<span class='gray'>(newEmailCount)</span>
  </h2>
  <p>Main method called by consumers of this module. Will display</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>newEmailCount</strong>
          :
          <div class='force-inline'>
            <p>[description]</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code></code>
      :
      <div class='force-inline'>
        <p>[description]</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='retrieve' class='mt0'>
    retrieve<span class='gray'>(id)</span>
  </h2>
  <p>Gets the HTML string from cache, as well as language direction.
This method assumes all cookie keys that have pattern
/htmlc(\d+)/ are part of the object value. This method could
throw given vagaries of cookie cookie storage and encodings.
Be prepared.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>id</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='runQuery' class='mt0'>
    runQuery<span class='gray'></span>
  </h2>
  <p>Runs the query to find matches from the dataSource.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='runThrottledQuery' class='mt0'>
    runThrottledQuery<span class='gray'></span>
  </h2>
  <p>Called to trigger finding matches from the dataSource. Set on a timeout
to avoid multiple fast keystrokes from triggering too many rapid queries.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='setCurrentMessage' class='mt0'>
    setCurrentMessage<span class='gray'>(header)</span>
  </h2>
  
    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>MailHeader</code> <strong>header</strong>
          :
          <div class='force-inline'>
            <p>message header.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='setCurrentMessageBySuid' class='mt0'>
    setCurrentMessageBySuid<span class='gray'>(messageSuid)</span>
  </h2>
  <p>Tracks a messageSuid to use in selecting
the currentMessage once the slice data loads.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>messageSuid</strong>
          :
          <div class='force-inline'>
            <p>The message suid.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='setEditMode' class='mt0'>
    setEditMode<span class='gray'>(editMode)</span>
  </h2>
  <p>This is an override of setEditMode in lst/edit_controller because the
outbox needs special treatment.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>editMode</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='setPropFromAttr' class='mt0'>
    setPropFromAttr<span class='gray'>(instance, attrName, attrValue)</span>
  </h2>
  <p>Given an attribute name, set the corresponding property
name on the custom element instance, if it has such a
property.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>instance</strong>
          :
          <div class='force-inline'>
            <p>the custom element instance.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>attrName</strong>
          :
          <div class='force-inline'>
            <p>the attribute name.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>attrValue</strong>
          :
          <div class='force-inline'>
            <p>The attribute value.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='setRefreshState' class='mt0'>
    setRefreshState<span class='gray'>(syncing)</span>
  </h2>
  <p>Set the refresh button state based on the new message status.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>syncing</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='setTop' class='mt0'>
    setTop<span class='gray'>(node, value)</span>
  </h2>
  <p>Indirection for setting the top of a node. Used to allow
experimenting with either a transform or using top</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>node</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>value</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='show' class='mt0'>
    show<span class='gray'>(message, callback, cancel)</span>
  </h2>
  <p>A class method used by others to create confirm dialogs.
This method has two call types, to accommodate older
code that used ConfirmDialog to pass a full form node:</p>
<p>ConfirmDialog.show(dialogFormNode, confirmObject, cancelObject);</p>
<p>and simpler code that just wants to pass a string message
and a callback that returns true (if OK is pressed) or
false (if cancel is pressed):</p>
<p>ConfirmDialog.show(messageString, function(confirmed) {});</p>
<p>This newer style mimics a plain confirm dialog, with an
OK and Cancel that are not customizable.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>message</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>callback</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>cancel</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='showAccounts' class='mt0'>
    showAccounts<span class='gray'></span>
  </h2>
  <p>Use a translateY transition to show accounts. But to do that correctly,
need to use the height of the account listing. The scroll inner needs
to be updated too, so that it does not cut off some of the folders.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='showEmptyLayout' class='mt0'>
    showEmptyLayout<span class='gray'></span>
  </h2>
  <p>Hide buttons that are not appropriate if we have no messages and display
the appropriate l10n string in the message list proper.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='showFolder' class='mt0'>
    showFolder<span class='gray'>(folder, forceNewSlice)</span>
  </h2>
  <p>Show a folder, returning true if we actually changed folders or false if
we did nothing because we were already in the folder.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>folder</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>forceNewSlice</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='showLargeMessageWarning' class='mt0'>
    showLargeMessageWarning<span class='gray'>(size, cb)</span>
  </h2>
  <p>Show a warning that the given message is large.
Callback is called with cb(true|false) to continue.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>size</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>cb</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='sizeLastSync' class='mt0'>
    sizeLastSync<span class='gray'></span>
  </h2>
  <p>If the last synchronised label is more than half the length
of its display area, set a &quot;long&quot; style on it that allows
different styling. But only do this once per card instance,
the label should not change otherwise.
TODO though, once locale changing in app is supported, this
should be revisited.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='skipEmitContentEvents' class='mt0'>
    skipEmitContentEvents<span class='gray'></span>
  </h2>
  <p>Inform Cards to not emit startup content events, this card will trigger
them once data from back end has been received and the DOM is up to date
with that data.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='skipEmitContentEvents' class='mt0'>
    skipEmitContentEvents<span class='gray'></span>
  </h2>
  <p>Inform Cards to not emit startup content events, this card will trigger
them once data from back end has been received and the DOM is up to date
with that data.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='skipEmitContentEvents' class='mt0'>
    skipEmitContentEvents<span class='gray'></span>
  </h2>
  <p>Inform Cards to not emit startup content events, this card will trigger
them once data from back end has been received and the DOM is up to date
with that data.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='sliceEvents' class='mt0'>
    sliceEvents<span class='gray'></span>
  </h2>
  
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='startupData' class='mt0'>
    startupData<span class='gray'></span>
  </h2>
  <p>Register setMozMessageHandler listeners with the plumbing set up in
html_cache_restore</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='subject' class='mt0'>
    subject<span class='gray'>(subjectNode, message)</span>
  </h2>
  <p>Format the message subject appropriately.  This means ensuring that
if the subject is empty, we use a placeholder string instead.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>DOMElement</code> <strong>subjectNode</strong>
          :
          <div class='force-inline'>
            <p>the DOM node for the message&apos;s
subject.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>message</strong>
          :
          <div class='force-inline'>
            <p>the message object.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='templateCreatedCallback' class='mt0'>
    templateCreatedCallback<span class='gray'></span>
  </h2>
  <p>Supports cached internal nodes if data-cached is set to a truthy
value.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='toggleOutboxSyncingDisplay' class='mt0'>
    toggleOutboxSyncingDisplay<span class='gray'>(syncing)</span>
  </h2>
  <p>The outbox has a special role in the message_list, compared to
other folders. We don&apos;t expect to synchronize the outbox with the
server, but we do allow the user to use the refresh button to
trigger all of the outbox messages to send.</p>
<p>While they&apos;re sending, we need to display several spinny refresh
icons: One next to each message while it&apos;s queued for sending,
and also the main refresh button.</p>
<p>However, the outbox send operation doesn&apos;t happen all in one go;
the backend only fires one &apos;sendOutboxMessages&apos; at a time,
iterating through the pending messages. Fortunately, it notifies
the frontend (via <code>onBackgroundSendStatus</code>) whenever the state of
any message changes, and it provides a flag to let us know
whether or not the outbox sync is fully complete.</p>
<p>So the workflow for outbox&apos;s refresh UI display is as follows:</p>
<ol>
<li>
<p>The user taps the &quot;refresh&quot; button. In response:</p>
<p>1a. Immediately make all visible refresh icons start spinning.</p>
<p>1b. Immediately kick off a &apos;sendOutboxMessages&apos; job.</p>
</li>
<li>
<p>We will start to see send status notifications, in this
class&apos;s onBackgroundSendStatus notification. We listen to
these events as they come in, and wait until we see a
notification with state === &apos;syncDone&apos;. We&apos;ll keep the main
refresh icon spinning throughout this process.</p>
</li>
<li>
<p>As messages send or error out, we will receive slice
notifications for each message (handled here in <code>messages_change</code>).
Since each message holds its own status as <code>header.sendStatus</code>,
we don&apos;t need to do anything special; the normal rendering logic
will reset each message&apos;s status icon to the appropriate state.</p>
</li>
</ol>
<p>But don&apos;t take my word for it; see <code>jobs/outbox.js</code> and
<code>jobmixins.js</code> in GELAM for backend-centric descriptions of how
the outbox sending process works.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>syncing</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='toggleSelection' class='mt0'>
    toggleSelection<span class='gray'>(msgNode)</span>
  </h2>
  <p>Toggles the selection state of the node and therefore the stored
<code>selectedMessages</code> state based on the previous state of the selection.
The change in the total number of selections is then reflected in DOM
updates.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element">Element</a></code> <strong>msgNode</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='toObject' class='mt0'>
    toObject<span class='gray'>(value)</span>
  </h2>
  <p>Takes a querystring value, name1=value1&amp;name2=value2... and converts
to an object with named properties.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>value</strong>
          :
          <div class='force-inline'>
            <p>query string value.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='topUniqueFromNames' class='mt0'>
    topUniqueFromNames<span class='gray'>(latestInfos, oldFromNames)</span>
  </h2>
  <p>Generates a list of unique top names sorted by most recent sender first,
and limited to a max number. The max number is just to limit amount of
work and likely display limits.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code> <strong>latestInfos</strong>
          :
          <div class='force-inline'>
            <p>array of result.latestMessageInfos. Modifies
result.latestMessageInfos via a sort.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code> <strong>oldFromNames</strong>
          :
          <div class='force-inline'>
            <p>old from names from a previous notification.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code></code>
      :
      <div class='force-inline'>
        <p>a maxFromList array of most recent senders.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='toUrl' class='mt0'>
    toUrl<span class='gray'>(moduleNamePlusExt)</span>
  </h2>
  <p>Converts a module name + .extension into an URL path.
<em>Requires</em> the use of a module name. It does not support using
plain URLs like nameToUrl.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>moduleNamePlusExt</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='trimDots' class='mt0'>
    trimDots<span class='gray'>(ary)</span>
  </h2>
  <p>Trims the . and .. from an array of path segments.
It will keep a leading path segment if a .. will become
the first path segment, to help with module name lookups,
which act like paths, but can be remapped. But the end result,
all paths that use this function should look normalized.
NOTE: this method MODIFIES the input array.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code> <strong>ary</strong>
          :
          <div class='force-inline'>
            <p>the array of path segments.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='updateAccount' class='mt0'>
    updateAccount<span class='gray'>(account)</span>
  </h2>
  <p>Clicking a different account changes the list of folders displayed.  We
then trigger a select of the inbox for that account because otherwise
things get permutationally complex.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>account</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='updateAttachmentsAriaLabel' class='mt0'>
    updateAttachmentsAriaLabel<span class='gray'></span>
  </h2>
  <p>Update the label used for accessibility that describes the attachments
included.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='updateAttachmentsSize' class='mt0'>
    updateAttachmentsSize<span class='gray'></span>
  </h2>
  <p>Update the summary that says how many attachments we have and the
aggregate attachment size.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='updateDomEditControls' class='mt0'>
    updateDomEditControls<span class='gray'></span>
  </h2>
  <p>Update the edit mode UI bits sensitive to a change in the set of selected
messages.  This means the label that says how many messages are selected,
whether the buttons are enabled, which of the toggle-pairs are visible.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='updateDomMessageChecked' class='mt0'>
    updateDomMessageChecked<span class='gray'>(msgNode, checked)</span>
  </h2>
  <p>Set the checked state for the message item in the list. It sets both
checkbox checked and aria-selected states.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>msgNode</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>checked</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='updateDomSelectState' class='mt0'>
    updateDomSelectState<span class='gray'>(msgNode, message)</span>
  </h2>
  <p>Set or unset the select state on a node based on the edit mode.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>msgNode</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>message</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='updateMessageDom' class='mt0'>
    updateMessageDom<span class='gray'>(message)</span>
  </h2>
  <p>Update the state of the given DOM node.  Note that DOM nodes are reused
so you must ensure that this method cleans up any dirty state resulting
from any possible prior operation of this method.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>message</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='validateAddresses' class='mt0'>
    validateAddresses<span class='gray'></span>
  </h2>
  <p>Validate that the provided addresses are valid. Enable the send
button conditional on all addresses being correct. If all
addresses are correct and we had previously displayed a
sendStatus error, hide the sendStatus error display.</p>

      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code></code>
      :
      <div class='force-inline'>
        <p>True if all addresses are valid, otherwise false.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='verticalSpace' class='mt0'>
    verticalSpace<span class='gray'></span>
  </h2>
  <p>The owner of this autocomplete instance should set this value if they
have extra spacing around the input that should be maintained for better
visual display, and to avoid small scroll janks on initial positioning
of the input element if it needs to be scrolled to the top of the view.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='visibleOffset' class='mt0'>
    visibleOffset<span class='gray'></span>
  </h2>
  <p>Any visible height offset to where container sits in relation
to scrollingContainer. Expected to be set by owner of the
VScroll instance. In email, the search box height is an
example of a visibleOffset.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='zoomFrame' class='mt0'>
    zoomFrame<span class='gray'>(newScale, centerX, centerY)</span>
  </h2>
  <p>Zoom to the given scale, eventually.  If we are actively zooming or have
recently zoomed and need for various async things to catch up, we will
wait a bit before actually zooming to that scale.  We latch the most recent
value in all cases.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>newScale</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>centerX</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>centerY</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div>
        </div>
      </div>
    </div>
  </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
