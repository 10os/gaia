<!doctype html>
<html>
<head>
  <meta charset='utf-8' />
  <title>  | Documentation</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro:400,500,700' rel='stylesheet' type='text/css'>
  <link href='assets/bass.css' type='text/css' rel='stylesheet' />
  <link href='assets/style.css' type='text/css' rel='stylesheet' />
  <link href='assets/github.css' type='text/css' rel='stylesheet' />
</head>
<body class='documentation'>
  <div class='container'>
    <div class='clearfix md-mxn2'>
      <div class='fixed md-show fix-3 overflow-auto max-height-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'></h3>
          <div class='mb1'><code></code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block field'
            type='text' />
          <div id='toc'>
              <a
                href='#_createAttachmentContainer'
                class='block bold'>
                _createAttachmentContainer
              </a>
              <a
                href='#_getBaseMarkup'
                class='block bold'>
                _getBaseMarkup
              </a>
              <a
                href='#getAttachmentContainer'
                class='block bold'>
                getAttachmentContainer
              </a>
              <a
                href='#getThumbnail'
                class='block bold'>
                getThumbnail
              </a>
              <a
                href='#init'
                class='block bold'>
                init
              </a>
              <a
                href='#MessageManager'
                class='block bold'>
                MessageManager
              </a>
                <a
                  href='#MessageManager.deleteMessages'
                  class='regular block'>
                  .deleteMessages
                </a>
                <a
                  href='#MessageManager.ensureThreadRegistered'
                  class='regular block'>
                  .ensureThreadRegistered
                </a>
                <a
                  href='#MessageManager.findThreadFromNumber'
                  class='regular block'>
                  .findThreadFromNumber
                </a>
                <a
                  href='#MessageManager.getMessage'
                  class='regular block'>
                  .getMessage
                </a>
                <a
                  href='#MessageManager.getMessages'
                  class='regular block'>
                  .getMessages
                </a>
                <a
                  href='#MessageManager.getSegmentInfo'
                  class='regular block'>
                  .getSegmentInfo
                </a>
                <a
                  href='#MessageManager.getThreads'
                  class='regular block'>
                  .getThreads
                </a>
                <a
                  href='#MessageManager.init'
                  class='regular block'>
                  .init
                </a>
                <a
                  href='#MessageManager.markMessagesRead'
                  class='regular block'>
                  .markMessagesRead
                </a>
                <a
                  href='#MessageManager.markThreadRead'
                  class='regular block'>
                  .markThreadRead
                </a>
                <a
                  href='#MessageManager.onDeleted'
                  class='regular block'>
                  .onDeleted
                </a>
                <a
                  href='#MessageManager.onDeliverySuccess'
                  class='regular block'>
                  .onDeliverySuccess
                </a>
                <a
                  href='#MessageManager.onMessageFailed'
                  class='regular block'>
                  .onMessageFailed
                </a>
                <a
                  href='#MessageManager.onMessageReceived'
                  class='regular block'>
                  .onMessageReceived
                </a>
                <a
                  href='#MessageManager.onMessageSending'
                  class='regular block'>
                  .onMessageSending
                </a>
                <a
                  href='#MessageManager.onMessageSent'
                  class='regular block'>
                  .onMessageSent
                </a>
                <a
                  href='#MessageManager.onReadSuccess'
                  class='regular block'>
                  .onReadSuccess
                </a>
                <a
                  href='#MessageManager.resendMessage'
                  class='regular block'>
                  .resendMessage
                </a>
                <a
                  href='#MessageManager.retrieveMMS'
                  class='regular block'>
                  .retrieveMMS
                </a>
                <a
                  href='#MessageManager.sendMMS'
                  class='regular block'>
                  .sendMMS
                </a>
                <a
                  href='#MessageManager.sendSMS'
                  class='regular block'>
                  .sendSMS
                </a>
              <a
                href='#_isReady'
                class='block bold'>
                _isReady
              </a>
              <a
                href='#computeLateArrivalInfos'
                class='block bold'>
                computeLateArrivalInfos
              </a>
              <a
                href='#deleteMessages'
                class='block bold'>
                deleteMessages
              </a>
              <a
                href='#enableBubbleSelection'
                class='block bold'>
                enableBubbleSelection
              </a>
              <a
                href='#initiateNewMessage'
                class='block bold'>
                initiateNewMessage
              </a>
              <a
                href='#isConversationPanel'
                class='block bold'>
                isConversationPanel
              </a>
              <a
                href='#isCurrentConversation'
                class='block bold'>
                isCurrentConversation
              </a>
              <a
                href='#onMessageSendRequestCompleted'
                class='block bold'>
                onMessageSendRequestCompleted
              </a>
              <a
                href='#onRecipientSuggestionClick'
                class='block bold'>
                onRecipientSuggestionClick
              </a>
              <a
                href='#setHeaderContent'
                class='block bold'>
                setHeaderContent
              </a>
              <a
                href='#shouldRenderForThreadId'
                class='block bold'>
                shouldRenderForThreadId
              </a>
              <a
                href='#storeDraftFromMessage'
                class='block bold'>
                storeDraftFromMessage
              </a>
              <a
                href='#toggleRecipientSuggestions'
                class='block bold'>
                toggleRecipientSuggestions
              </a>
              <a
                href='#_storeDraftFromMessage'
                class='block bold'>
                _storeDraftFromMessage
              </a>
              <a
                href='#toView'
                class='block bold'>
                toView
              </a>
              <a
                href='#ActivityClient'
                class='block bold'>
                ActivityClient
              </a>
                <a
                  href='#ActivityClient.hasPendingRequest'
                  class='regular block'>
                  .hasPendingRequest
                </a>
                <a
                  href='#ActivityClient.init'
                  class='regular block'>
                  .init
                </a>
                <a
                  href='#ActivityClient.postError'
                  class='regular block'>
                  .postError
                </a>
                <a
                  href='#ActivityClient.postResult'
                  class='regular block'>
                  .postResult
                </a>
              <a
                href='#ActivityDataType'
                class='block bold'>
                ActivityDataType
              </a>
              <a
                href='#ActivityShim'
                class='block bold'>
                ActivityShim
              </a>
                <a
                  href='#ActivityShim.init'
                  class='regular block'>
                  .init
                </a>
              <a
                href='#Recipients'
                class='block bold'>
                Recipients
              </a>
                <a
                  href='#Recipients.View'
                  class='regular block'>
                  .View
                </a>
                <a
                  href='#Recipients.add'
                  class='regular block'>
                  #add
                </a>
                <a
                  href='#Recipients.emit'
                  class='regular block'>
                  #emit
                </a>
                <a
                  href='#Recipients.off'
                  class='regular block'>
                  #off
                </a>
                <a
                  href='#Recipients.on'
                  class='regular block'>
                  #on
                </a>
                <a
                  href='#Recipients.update'
                  class='regular block'>
                  #update
                </a>
              <a
                href='#Drafts'
                class='block bold'>
                Drafts
              </a>
                <a
                  href='#Drafts.add'
                  class='regular block'>
                  .add
                </a>
                <a
                  href='#Drafts.byDraftId'
                  class='regular block'>
                  .byDraftId
                </a>
                <a
                  href='#Drafts.byThreadId'
                  class='regular block'>
                  .byThreadId
                </a>
                <a
                  href='#Drafts.clear'
                  class='regular block'>
                  .clear
                </a>
                <a
                  href='#Drafts.delete'
                  class='regular block'>
                  .delete
                </a>
                <a
                  href='#Drafts.getAll'
                  class='regular block'>
                  .getAll
                </a>
                <a
                  href='#Drafts.getAllThreadless'
                  class='regular block'>
                  .getAllThreadless
                </a>
                <a
                  href='#Drafts.init'
                  class='regular block'>
                  .init
                </a>
                <a
                  href='#Drafts.request'
                  class='regular block'>
                  .request
                </a>
                <a
                  href='#Drafts.size'
                  class='regular block'>
                  .size
                </a>
                <a
                  href='#Drafts.store'
                  class='regular block'>
                  .store
                </a>
              <a
                href='#alert'
                class='block bold'>
                alert
              </a>
              <a
                href='#closeNotificationsForThread'
                class='block bold'>
                closeNotificationsForThread
              </a>
              <a
                href='#confirm'
                class='block bold'>
                confirm
              </a>
              <a
                href='#debounce'
                class='block bold'>
                debounce
              </a>
              <a
                href='#getPhoneDetails'
                class='block bold'>
                getPhoneDetails
              </a>
              <a
                href='#getSimNameByIccId'
                class='block bold'>
                getSimNameByIccId
              </a>
              <a
                href='#getSizeForL10n'
                class='block bold'>
                getSizeForL10n
              </a>
              <a
                href='#initializeShimHost'
                class='block bold'>
                initializeShimHost
              </a>
              <a
                href='#multiRecipientMatch'
                class='block bold'>
                multiRecipientMatch
              </a>
              <a
                href='#onceDocumentIsVisible'
                class='block bold'>
                onceDocumentIsVisible
              </a>
              <a
                href='#Promise'
                class='block bold'>
                Promise
              </a>
              <a
                href='#throttle'
                class='block bold'>
                throttle
              </a>
              <a
                href='#appendThread'
                class='block bold'>
                appendThread
              </a>
              <a
                href='#notifyAboutSavedDraftWithId'
                class='block bold'>
                notifyAboutSavedDraftWithId
              </a>
              <a
                href='#updateConversationContent'
                class='block bold'>
                updateConversationContent
              </a>
              <a
                href='#updateThread'
                class='block bold'>
                updateThread
              </a>
              <a
                href='#appInstanceId'
                class='block bold'>
                appInstanceId
              </a>
              <a
                href='#appInstanceId'
                class='block bold'>
                appInstanceId
              </a>
              <a
                href='#APPLICATION_READY_CLASS_NAME'
                class='block bold'>
                APPLICATION_READY_CLASS_NAME
              </a>
              <a
                href='#async'
                class='block bold'>
                async
              </a>
              <a
                href='#attachHistoryListener'
                class='block bold'>
                attachHistoryListener
              </a>
              <a
                href='#Attachment'
                class='block bold'>
                Attachment
              </a>
              <a
                href='#AUTO_WAKE_LOCK_UNLOCK_TIMEOUT'
                class='block bold'>
                AUTO_WAKE_LOCK_UNLOCK_TIMEOUT
              </a>
              <a
                href='#back'
                class='block bold'>
                back
              </a>
              <a
                href='#init'
                class='block bold'>
                init
              </a>
              <a
                href='#isCurrentPanel'
                class='block bold'>
                isCurrentPanel
              </a>
              <a
                href='#isDefaultPanel'
                class='block bold'>
                isDefaultPanel
              </a>
              <a
                href='#setReady'
                class='block bold'>
                setReady
              </a>
              <a
                href='#toPanel'
                class='block bold'>
                toPanel
              </a>
              <a
                href='#serviceMixin'
                class='block bold'>
                serviceMixin
              </a>
                <a
                  href='#serviceMixin.broadcast'
                  class='regular block'>
                  .broadcast
                </a>
                <a
                  href='#serviceMixin.initService'
                  class='regular block'>
                  .initService
                </a>
              <a
                href='#catchStepError'
                class='block bold'>
                catchStepError
              </a>
              <a
                href='#channel'
                class='block bold'>
                channel
              </a>
              <a
                href='#client'
                class='block bold'>
                client
              </a>
              <a
                href='#client'
                class='block bold'>
                client
              </a>
              <a
                href='#client'
                class='block bold'>
                client
              </a>
              <a
                href='#client'
                class='block bold'>
                client
              </a>
              <a
                href='#clone'
                class='block bold'>
                clone
              </a>
              <a
                href='#set'
                class='block bold'>
                set
              </a>
              <a
                href='#cloneThread'
                class='block bold'>
                cloneThread
              </a>
              <a
                href='#Compose'
                class='block bold'>
                Compose
              </a>
              <a
                href='#contact'
                class='block bold'>
                contact
              </a>
              <a
                href='#ConversationClient'
                class='block bold'>
                ConversationClient
              </a>
                <a
                  href='#ConversationClient.getAllConversations'
                  class='regular block'>
                  .getAllConversations
                </a>
                <a
                  href='#ConversationClient.init'
                  class='regular block'>
                  .init
                </a>
              <a
                href='#ConversationSummary'
                class='block bold'>
                ConversationSummary
              </a>
              <a
                href='#createListWithMsgInfo'
                class='block bold'>
                createListWithMsgInfo
              </a>
              <a
                href='#createReportDiv'
                class='block bold'>
                createReportDiv
              </a>
              <a
                href='#debug'
                class='block bold'>
                debug
              </a>
              <a
                href='#debug'
                class='block bold'>
                debug
              </a>
              <a
                href='#defer'
                class='block bold'>
                defer
              </a>
              <a
                href='#Defer'
                class='block bold'>
                Defer
              </a>
              <a
                href='#deleteConversations'
                class='block bold'>
                deleteConversations
              </a>
              <a
                href='#deleteMessages'
                class='block bold'>
                deleteMessages
              </a>
              <a
                href='#findConversationFromAddress'
                class='block bold'>
                findConversationFromAddress
              </a>
              <a
                href='#getAllConversations'
                class='block bold'>
                getAllConversations
              </a>
              <a
                href='#getConversationSummary'
                class='block bold'>
                getConversationSummary
              </a>
              <a
                href='#getMessage'
                class='block bold'>
                getMessage
              </a>
              <a
                href='#getMessagesForConversation'
                class='block bold'>
                getMessagesForConversation
              </a>
              <a
                href='#init'
                class='block bold'>
                init
              </a>
              <a
                href='#markConversationsAs'
                class='block bold'>
                markConversationsAs
              </a>
              <a
                href='#detachHistoryListener'
                class='block bold'>
                detachHistoryListener
              </a>
              <a
                href='#Draft'
                class='block bold'>
                Draft
              </a>
              <a
                href='#endNavigation'
                class='block bold'>
                endNavigation
              </a>
              <a
                href='#ERRORS'
                class='block bold'>
                ERRORS
              </a>
              <a
                href='#EVENTS'
                class='block bold'>
                EVENTS
              </a>
              <a
                href='#EVENTS'
                class='block bold'>
                EVENTS
              </a>
              <a
                href='#executeNavigationStep'
                class='block bold'>
                executeNavigationStep
              </a>
              <a
                href='#exports'
                class='block bold'>
                exports
              </a>
              <a
                href='#findContainerView'
                class='block bold'>
                findContainerView
              </a>
              <a
                href='#findViewFromLocation'
                class='block bold'>
                findViewFromLocation
              </a>
              <a
                href='#findViewFromName'
                class='block bold'>
                findViewFromName
              </a>
              <a
                href='#findViewNameFromHash'
                class='block bold'>
                findViewNameFromHash
              </a>
              <a
                href='#found'
                class='block bold'>
                found
              </a>
              <a
                href='#fromDraft'
                class='block bold'>
                fromDraft
              </a>
              <a
                href='#prepend'
                class='block bold'>
                prepend
              </a>
              <a
                href='#requestAttachment'
                class='block bold'>
                requestAttachment
              </a>
              <a
                href='#get'
                class='block bold'>
                get
              </a>
              <a
                href='#set'
                class='block bold'>
                set
              </a>
              <a
                href='#getBaseName'
                class='block bold'>
                getBaseName
              </a>
              <a
                href='#getContentNode'
                class='block bold'>
                getContentNode
              </a>
              <a
                href='#getMessages'
                class='block bold'>
                getMessages
              </a>
              <a
                href='#getThreads'
                class='block bold'>
                getThreads
              </a>
              <a
                href='#retrieveMMS'
                class='block bold'>
                retrieveMMS
              </a>
              <a
                href='#SystemMessageHandler'
                class='block bold'>
                SystemMessageHandler
              </a>
                <a
                  href='#SystemMessageHandler.init'
                  class='regular block'>
                  .init
                </a>
              <a
                href='#getOperatorByServiceId'
                class='block bold'>
                getOperatorByServiceId
              </a>
              <a
                href='#getServiceIdByIccId'
                class='block bold'>
                getServiceIdByIccId
              </a>
              <a
                href='#switchMmsSimHandler'
                class='block bold'>
                switchMmsSimHandler
              </a>
              <a
                href='#hasPendingRequest'
                class='block bold'>
                hasPendingRequest
              </a>
              <a
                href='#hasSeveralSim'
                class='block bold'>
                hasSeveralSim
              </a>
              <a
                href='#isDualSimDevice'
                class='block bold'>
                isDualSimDevice
              </a>
              <a
                href='#init'
                class='block bold'>
                init
              </a>
              <a
                href='#resendMessage'
                class='block bold'>
                resendMessage
              </a>
              <a
                href='#retrieveMMS'
                class='block bold'>
                retrieveMMS
              </a>
              <a
                href='#sendMMS'
                class='block bold'>
                sendMMS
              </a>
              <a
                href='#sendSMS'
                class='block bold'>
                sendSMS
              </a>
              <a
                href='#init'
                class='block bold'>
                init
              </a>
              <a
                href='#switchMmsSimHandler'
                class='block bold'>
                switchMmsSimHandler
              </a>
              <a
                href='#init'
                class='block bold'>
                init
              </a>
              <a
                href='#resendMessage'
                class='block bold'>
                resendMessage
              </a>
              <a
                href='#retrieveMMS'
                class='block bold'>
                retrieveMMS
              </a>
              <a
                href='#sendMMS'
                class='block bold'>
                sendMMS
              </a>
              <a
                href='#sendSMS'
                class='block bold'>
                sendSMS
              </a>
              <a
                href='#INSTANCE_ID'
                class='block bold'>
                INSTANCE_ID
              </a>
              <a
                href='#isMatch'
                class='block bold'>
                isMatch
              </a>
              <a
                href='#isUsingOldArchitecture'
                class='block bold'>
                isUsingOldArchitecture
              </a>
              <a
                href='#LINK_TYPES'
                class='block bold'>
                LINK_TYPES
              </a>
              <a
                href='#localizeAttachmentIFrame'
                class='block bold'>
                localizeAttachmentIFrame
              </a>
              <a
                href='#localizeAttachmentIFrames'
                class='block bold'>
                localizeAttachmentIFrames
              </a>
              <a
                href='#localizeDateTime'
                class='block bold'>
                localizeDateTime
              </a>
              <a
                href='#METHODS'
                class='block bold'>
                METHODS
              </a>
              <a
                href='#METHODS'
                class='block bold'>
                METHODS
              </a>
              <a
                href='#METHODS'
                class='block bold'>
                METHODS
              </a>
              <a
                href='#METHODS'
                class='block bold'>
                METHODS
              </a>
              <a
                href='#mobileMessageClients'
                class='block bold'>
                mobileMessageClients
              </a>
              <a
                href='#NGA_VIEWS'
                class='block bold'>
                NGA_VIEWS
              </a>
              <a
                href='#OA_VIEWS'
                class='block bold'>
                OA_VIEWS
              </a>
              <a
                href='#onHashChange'
                class='block bold'>
                onHashChange
              </a>
              <a
                href='#onNavigationError'
                class='block bold'>
                onNavigationError
              </a>
              <a
                href='#params'
                class='block bold'>
                params
              </a>
              <a
                href='#previousAnimationDefer'
                class='block bold'>
                previousAnimationDefer
              </a>
              <a
                href='#readyDefer'
                class='block bold'>
                readyDefer
              </a>
              <a
                href='#RENDERERS'
                class='block bold'>
                RENDERERS
              </a>
              <a
                href='#renderTo'
                class='block bold'>
                renderTo
              </a>
              <a
                href='#resolve'
                class='block bold'>
                resolve
              </a>
              <a
                href='#sanitizeServiceId'
                class='block bold'>
                sanitizeServiceId
              </a>
              <a
                href='#SERVICE_NAME'
                class='block bold'>
                SERVICE_NAME
              </a>
              <a
                href='#SERVICE_NAME'
                class='block bold'>
                SERVICE_NAME
              </a>
              <a
                href='#SERVICE_NAME'
                class='block bold'>
                SERVICE_NAME
              </a>
              <a
                href='#SERVICE_NAME'
                class='block bold'>
                SERVICE_NAME
              </a>
              <a
                href='#SERVICE_NAME'
                class='block bold'>
                SERVICE_NAME
              </a>
              <a
                href='#SERVICE_NAME'
                class='block bold'>
                SERVICE_NAME
              </a>
              <a
                href='#SERVICE_NAME'
                class='block bold'>
                SERVICE_NAME
              </a>
              <a
                href='#SERVICE_NAME'
                class='block bold'>
                SERVICE_NAME
              </a>
              <a
                href='#setFutureState'
                class='block bold'>
                setFutureState
              </a>
              <a
                href='#setLocation'
                class='block bold'>
                setLocation
              </a>
              <a
                href='#setReady'
                class='block bold'>
                setReady
              </a>
              <a
                href='#whenReady'
                class='block bold'>
                whenReady
              </a>
              <a
                href='#some'
                class='block bold'>
                some
              </a>
              <a
                href='#startNavigation'
                class='block bold'>
                startNavigation
              </a>
              <a
                href='#STREAMS'
                class='block bold'>
                STREAMS
              </a>
              <a
                href='#switchPanel'
                class='block bold'>
                switchPanel
              </a>
              <a
                href='#SYSTEM_MESSAGE_NAME'
                class='block bold'>
                SYSTEM_MESSAGE_NAME
              </a>
              <a
                href='#terms'
                class='block bold'>
                terms
              </a>
              <a
                href='#TIMEOUT'
                class='block bold'>
                TIMEOUT
              </a>
              <a
                href='#TIMEOUT'
                class='block bold'>
                TIMEOUT
              </a>
              <a
                href='#TIMEOUT'
                class='block bold'>
                TIMEOUT
              </a>
              <a
                href='#waitForPanelAnimation'
                class='block bold'>
                waitForPanelAnimation
              </a>
              <a
                href='#waitForReady'
                class='block bold'>
                waitForReady
              </a>
          </div>
        </div>
      </div>
      <div class='fix-margin-3'>
        <div class='px2'>
<div class='py1'><section class='py2 clearfix'>
  <h2 id='_createAttachmentContainer' class='mt0'>
    _createAttachmentContainer<span class='gray'></span>
  </h2>
  <p>Creates new attachment container.</p>

      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_getBaseMarkup' class='mt0'>
    _getBaseMarkup<span class='gray'>(templateId, hasError)</span>
  </h2>
  <p>Returns HTML string that represents base attachment markup.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>templateId</strong>
          :
          <div class='force-inline'>
            <p>Id of the template to use.</p>

          </div>
        </li>
        <li> <strong>hasError</strong>
          :
          <div class='force-inline'>
            <p>Indicates whether something is wrong with attachment.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getAttachmentContainer' class='mt0'>
    getAttachmentContainer<span class='gray'></span>
  </h2>
  <p>Gets DOM node that will be container for the attachment markup. This method
will create new container if it wasn&apos;t before.</p>

      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getThumbnail' class='mt0'>
    getThumbnail<span class='gray'></span>
  </h2>
  <p>Extracts thumbnail for the image.
TODO: As we started to use mozSampleSize for thumbnail generation we need
to check if we still want to store this thumbnail data (indexedDB)
Bug 876467 - [MMS] generate, store, and reuse image thumbnails</p>

      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='init' class='mt0'>
    init<span class='gray'></span>
  </h2>
  <p>We wait for the DOMContentLoaded event in the event sequence. After we
loaded the first panel of threads, we lazy load all non-critical JS files.
As a result, if the &apos;load&apos; event was not sent yet, this will delay it even
more until all these non-critical JS files are loaded. This is fine.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='MessageManager' class='mt0'>
    MessageManager<span class='gray'></span>
  </h2>
  <p>MessageManager wraps around <a href="http://mdn.io/MozMobileMessageManager"><code>http://mdn.io/MozMobileMessageManager</code></a>
that makes access to SMS/MMS related operations (sending, handling
read/delivery reports etc.) and respective events easier.</p>

      <h4>Static members</h4>
        <div class='collapsible' id='MessageManager.deleteMessages'>
          <a href='#MessageManager.deleteMessages'>
            <code>
              .deleteMessages<span class='gray'>(id)</span>
            </code>
            <div class='force-inline'>
              <p>Deletes messages using the message id provided.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.deleteMessages' class='mt0'>
                deleteMessages<span class='gray'>(id)</span>
              </h2>
              <p>Deletes messages using the message id provided.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code> <strong>id</strong>
                      :
                      <div class='force-inline'>
                        <p>The ID of the message to be deleted.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Promise">Promise</a></code></code>
                  
                  <div class='force-inline'>
                    
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.ensureThreadRegistered'>
          <a href='#MessageManager.ensureThreadRegistered'>
            <code>
              .ensureThreadRegistered<span class='gray'>(threadId)</span>
            </code>
            <div class='force-inline'>
              <p>This method ensures that threads have been registered in the in-memory
cache. In the case it has, the promise returned resolves immediately. If
not, it loads the last message from the thread and creates a new entry in
cache based on it. It can happen when application loaded from non default
page and Thread cache hasn&apos;t been populated.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.ensureThreadRegistered' class='mt0'>
                ensureThreadRegistered<span class='gray'>(threadId)</span>
              </h2>
              <p>This method ensures that threads have been registered in the in-memory
            cache. In the case it has, the promise returned resolves immediately. If
            not, it loads the last message from the thread and creates a new entry in
            cache based on it. It can happen when application loaded from non default
            page and Thread cache hasn&apos;t been populated.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>threadId</strong>
                      :
                      <div class='force-inline'>
                        <p>The ID of the thread we wish to register.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Promise">Promise</a></code></code>
                  
                  <div class='force-inline'>
                    
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.findThreadFromNumber'>
          <a href='#MessageManager.findThreadFromNumber'>
            <code>
              .findThreadFromNumber<span class='gray'>(number)</span>
            </code>
            <div class='force-inline'>
              <p>Find a SMS/MMS thread from a number.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.findThreadFromNumber' class='mt0'>
                findThreadFromNumber<span class='gray'>(number)</span>
              </h2>
              <p>Find a SMS/MMS thread from a number.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code> <strong>number</strong>
                      :
                      <div class='force-inline'>
                        <p>Phone number to find thread for.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Promise">Promise</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>></code>
                  :
                  <div class='force-inline'>
                    <p>that is resolved to a threadId or rejected if
            not found</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.getMessage'>
          <a href='#MessageManager.getMessage'>
            <code>
              .getMessage<span class='gray'>(id)</span>
            </code>
            <div class='force-inline'>
              <p>Method used to access message having a given id.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.getMessage' class='mt0'>
                getMessage<span class='gray'>(id)</span>
              </h2>
              <p>Method used to access message having a given id.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code> <strong>id</strong>
                      :
                      <div class='force-inline'>
                        <p>The id of the message we wish to get.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code>DOMRequest</code><<code>SmsMessage</code> or <code>MmsMessage</code>></code>
                  
                  <div class='force-inline'>
                    
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.getMessages'>
          <a href='#MessageManager.getMessages'>
            <code>
              .getMessages<span class='gray'>(options, invert)</span>
            </code>
            <div class='force-inline'>
              <p>Obtains all the messages using a given filter.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.getMessages' class='mt0'>
                getMessages<span class='gray'>(options, invert)</span>
              </h2>
              <p>Obtains all the messages using a given filter.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>options</strong>
                      :
                      <div class='force-inline'>
                        <p>A set of callback functions as described below:-</p>
            
                      </div>
                        <ul>
                            <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code> options.each
                              <p>callback function invoked for each message.</p>
            </li>
                            <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code> options.end
                              <p>callback function run when cursor is &quot;done&quot;.</p>
            </li>
                            <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code> options.endArgs
                              <p>specify arguments for the &quot;end&quot; callback.</p>
            </li>
                            <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code> options.done
                              <p>callback function invoked when we iterated
            through all the messages or consumer requested to do so.</p>
            </li>
                            <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code> options.filter
                              <p>a MobileMessageFilter or similar object.</p>
            </li>
                        </ul>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code> <strong>invert</strong>
                      :
                      <div class='force-inline'>
                        <p>option to invert the selection.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.getSegmentInfo'>
          <a href='#MessageManager.getSegmentInfo'>
            <code>
              .getSegmentInfo<span class='gray'>(text)</span>
            </code>
            <div class='force-inline'>
              <p>Method used to get the information necessary to create a multipart SMS for
a given text.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.getSegmentInfo' class='mt0'>
                getSegmentInfo<span class='gray'>(text)</span>
              </h2>
              <p>Method used to get the information necessary to create a multipart SMS for
            a given text.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>text</strong>
                      :
                      <div class='force-inline'>
                        <p>The text used to create the SMS.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Promise">Promise</a></code><<code>MozSmsSegmentInfo</code>></code>
                  :
                  <div class='force-inline'>
                    <p>Instance of
            <a href="http://mdn.io/MozSmsSegmentInfo"><code>http://mdn.io/MozSmsSegmentInfo</code></a></p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.getThreads'>
          <a href='#MessageManager.getThreads'>
            <code>
              .getThreads<span class='gray'>(options)</span>
            </code>
            <div class='force-inline'>
              <p>Obtains all the treads and takes a set of callback functions as an
argument.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.getThreads' class='mt0'>
                getThreads<span class='gray'>(options)</span>
              </h2>
              <p>Obtains all the treads and takes a set of callback functions as an
            argument.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>options</strong>
                      :
                      <div class='force-inline'>
                        <p>A set of callback functions as described below:-</p>
            
                      </div>
                        <ul>
                            <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code> options.end
                              <p>: callback function run when cursor is &quot;done&quot;.</p>
            </li>
                            <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code> options.done
                              <p>: callback function run when we iterated
            through all the threads or consumer requested to do so.</p>
            </li>
                        </ul>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.init'>
          <a href='#MessageManager.init'>
            <code>
              .init<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Initializes MessageManager and subscribes for required
<a href="http://mdn.io/MozMobileMessageManager"><code>http://mdn.io/MozMobileMessageManager</code></a> events.
Should be always called before calling any other MessageManager methods.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.init' class='mt0'>
                init<span class='gray'></span>
              </h2>
              <p>Initializes MessageManager and subscribes for required
            <a href="http://mdn.io/MozMobileMessageManager"><code>http://mdn.io/MozMobileMessageManager</code></a> events.
            Should be always called before calling any other MessageManager methods.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.markMessagesRead'>
          <a href='#MessageManager.markMessagesRead'>
            <code>
              .markMessagesRead<span class='gray'>(list, isRead)</span>
            </code>
            <div class='force-inline'>
              <p>Marks messages with specified ids as read.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.markMessagesRead' class='mt0'>
                markMessagesRead<span class='gray'>(list, isRead)</span>
              </h2>
              <p>Marks messages with specified ids as read.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code>> <strong>list</strong>
                      :
                      <div class='force-inline'>
                        <p>List of all the message IDs to be changed to
            read.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code> <strong>isRead</strong>
                      :
                      <div class='force-inline'>
                        <p>Pass true if message is to be marked as read and
            false if message is to be marked as unread.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.markThreadRead'>
          <a href='#MessageManager.markThreadRead'>
            <code>
              .markThreadRead<span class='gray'>(threadId, isRead)</span>
            </code>
            <div class='force-inline'>
              <p>Marks a thread as read or unread depending on value of isRead as true or
false respectively.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.markThreadRead' class='mt0'>
                markThreadRead<span class='gray'>(threadId, isRead)</span>
              </h2>
              <p>Marks a thread as read or unread depending on value of isRead as true or
            false respectively.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>threadId</strong>
                      :
                      <div class='force-inline'>
                        <p>The ID of the thread to be marked as read.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code> <strong>isRead</strong>
                      :
                      <div class='force-inline'>
                        <p>If &quot;true&quot; then message is to be marked as read
            otherwise message is to be marked as unread.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.onDeleted'>
          <a href='#MessageManager.onDeleted'>
            <code>
              .onDeleted<span class='gray'>(e)</span>
            </code>
            <div class='force-inline'>
              <p>Event handler executed when message is deleted.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.onDeleted' class='mt0'>
                onDeleted<span class='gray'>(e)</span>
              </h2>
              <p>Event handler executed when message is deleted.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code>MozSmsEvent</code> or <code>MozMmsEvent</code> <strong>e</strong>
                      :
                      <div class='force-inline'>
                        <p>Instance of
            <a href="http://mdn.io/MozSmsEvent"><code>http://mdn.io/MozSmsEvent</code></a> or <a href="http://mdn.io/MozMmsEvent"><code>http://mdn.io/MozMmsEvent</code></a>.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.onDeliverySuccess'>
          <a href='#MessageManager.onDeliverySuccess'>
            <code>
              .onDeliverySuccess<span class='gray'>(e)</span>
            </code>
            <div class='force-inline'>
              <p>Specifies an event listener to receive &quot;deliverysuccess&quot; events. These
events occur when an SMS or MMS is delivered.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.onDeliverySuccess' class='mt0'>
                onDeliverySuccess<span class='gray'>(e)</span>
              </h2>
              <p>Specifies an event listener to receive &quot;deliverysuccess&quot; events. These
            events occur when an SMS or MMS is delivered.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code>MozSmsEvent</code> or <code>MozMmsEvent</code> <strong>e</strong>
                      :
                      <div class='force-inline'>
                        <p>Instance of
            <a href="http://mdn.io/MozSmsEvent"><code>http://mdn.io/MozSmsEvent</code></a> or <a href="http://mdn.io/MozMmsEvent"><code>http://mdn.io/MozMmsEvent</code></a>.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.onMessageFailed'>
          <a href='#MessageManager.onMessageFailed'>
            <code>
              .onMessageFailed<span class='gray'>(e)</span>
            </code>
            <div class='force-inline'>
              <p>Specifies an event listener to receive &quot;failed&quot; events. These events occur
when sending an MMS or SMS has failed.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.onMessageFailed' class='mt0'>
                onMessageFailed<span class='gray'>(e)</span>
              </h2>
              <p>Specifies an event listener to receive &quot;failed&quot; events. These events occur
            when sending an MMS or SMS has failed.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code>MozSmsEvent</code> or <code>MozMmsEvent</code> <strong>e</strong>
                      :
                      <div class='force-inline'>
                        <p>Instance of
            <a href="http://mdn.io/MozSmsEvent"><code>http://mdn.io/MozSmsEvent</code></a> or <a href="http://mdn.io/MozMmsEvent"><code>http://mdn.io/MozMmsEvent</code></a>.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.onMessageReceived'>
          <a href='#MessageManager.onMessageReceived'>
            <code>
              .onMessageReceived<span class='gray'>(e)</span>
            </code>
            <div class='force-inline'>
              <p>Specifies an event listener to receive &quot;received&quot; events. These events
occur when an SMS or MMS is received. Event handler executed when new SMS
or MMS is received.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.onMessageReceived' class='mt0'>
                onMessageReceived<span class='gray'>(e)</span>
              </h2>
              <p>Specifies an event listener to receive &quot;received&quot; events. These events
            occur when an SMS or MMS is received. Event handler executed when new SMS
            or MMS is received.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code>MozSmsEvent</code> or <code>MozMmsEvent</code> <strong>e</strong>
                      :
                      <div class='force-inline'>
                        <p>Instance of
            <a href="http://mdn.io/MozSmsEvent"><code>http://mdn.io/MozSmsEvent</code></a> or <a href="http://mdn.io/MozMmsEvent"><code>http://mdn.io/MozMmsEvent</code></a>.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.onMessageSending'>
          <a href='#MessageManager.onMessageSending'>
            <code>
              .onMessageSending<span class='gray'>(e)</span>
            </code>
            <div class='force-inline'>
              <p>Event occurs when an SMS or MMS enters the send flow.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.onMessageSending' class='mt0'>
                onMessageSending<span class='gray'>(e)</span>
              </h2>
              <p>Event occurs when an SMS or MMS enters the send flow.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code>MozSmsEvent</code> or <code>MozMmsEvent</code> <strong>e</strong>
                      :
                      <div class='force-inline'>
                        <p>Instance of
            <a href="http://mdn.io/MozSmsEvent"><code>http://mdn.io/MozSmsEvent</code></a> or <a href="http://mdn.io/MozMmsEvent"><code>http://mdn.io/MozMmsEvent</code></a>.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.onMessageSent'>
          <a href='#MessageManager.onMessageSent'>
            <code>
              .onMessageSent<span class='gray'>(e)</span>
            </code>
            <div class='force-inline'>
              <p>Specifies an event listener to receive &quot;sent&quot; events. These events occur
when an SMS or MMS is sent.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.onMessageSent' class='mt0'>
                onMessageSent<span class='gray'>(e)</span>
              </h2>
              <p>Specifies an event listener to receive &quot;sent&quot; events. These events occur
            when an SMS or MMS is sent.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code>MozSmsEvent</code> or <code>MozMmsEvent</code> <strong>e</strong>
                      :
                      <div class='force-inline'>
                        <p>Instance of
            <a href="http://mdn.io/MozSmsEvent"><code>http://mdn.io/MozSmsEvent</code></a> or <a href="http://mdn.io/MozMmsEvent"><code>http://mdn.io/MozMmsEvent</code></a>.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.onReadSuccess'>
          <a href='#MessageManager.onReadSuccess'>
            <code>
              .onReadSuccess<span class='gray'>(e)</span>
            </code>
            <div class='force-inline'>
              <p>Specifies an event listener to receive &quot;read&quot; events. These events
occur when MMS is read by recipient (read status isn&apos;t supported by SMS).</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.onReadSuccess' class='mt0'>
                onReadSuccess<span class='gray'>(e)</span>
              </h2>
              <p>Specifies an event listener to receive &quot;read&quot; events. These events
            occur when MMS is read by recipient (read status isn&apos;t supported by SMS).</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code>MozMmsEvent</code> <strong>e</strong>
                      :
                      <div class='force-inline'>
                        <p>Instance of <a href="http://mdn.io/MozMmsEvent"><code>http://mdn.io/MozMmsEvent</code></a>.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.resendMessage'>
          <a href='#MessageManager.resendMessage'>
            <code>
              .resendMessage<span class='gray'>(opts)</span>
            </code>
            <div class='force-inline'>
              <p>Resends message with the given options.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.resendMessage' class='mt0'>
                resendMessage<span class='gray'>(opts)</span>
              </h2>
              <p>Resends message with the given options.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>opts</strong>
                      :
                      <div class='force-inline'>
                        <p>Options is the object with the following properties:-</p>
            <ul>
            <li>message (object): the message object containing all the information
            depending on the type of the message which can be &apos;sms&apos; or &apos;mms&apos;.</li>
            <li>onsuccess (optional function): will be called when the message has been
            sent successfully, with the request&apos;s result as argument. Can be called
            several times.</li>
            <li>onerror (optional function): will be called when the message transmission
            failed, with the error object as argument. Can be called several times.</li>
            </ul>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.retrieveMMS'>
          <a href='#MessageManager.retrieveMMS'>
            <code>
              .retrieveMMS<span class='gray'>(id)</span>
            </code>
            <div class='force-inline'>
              <p>Method to get the MMS object having a given id.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.retrieveMMS' class='mt0'>
                retrieveMMS<span class='gray'>(id)</span>
              </h2>
              <p>Method to get the MMS object having a given id.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code> <strong>id</strong>
                      :
                      <div class='force-inline'>
                        <p>The id of the MMS we wish to get.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code>DOMRequest</code><<code>MmsMessage</code>></code>
                  
                  <div class='force-inline'>
                    
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.sendMMS'>
          <a href='#MessageManager.sendMMS'>
            <code>
              .sendMMS<span class='gray'>(opts)</span>
            </code>
            <div class='force-inline'>
              <p>Sends an MMS based on the specified parameters object</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.sendMMS' class='mt0'>
                sendMMS<span class='gray'>(opts)</span>
              </h2>
              <p>Sends an MMS based on the specified parameters object</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>opts</strong>
                      :
                      <div class='force-inline'>
                        <p>is the options field with the following properties:</p>
            <ul>
            <li>recipients (string or array of string): recipients for this message</li>
            <li>subject (optional string): subject for this message</li>
            <li>content (array of SMIL slides): this is the content for the message (see
            ConversationView for more information)</li>
            <li>serviceId (optional long or string): the SIM that should be used for
            sending this message. If this is not the current default configuration
            for sending MMS, then we&apos;ll first switch the configuration to this
            serviceId, and only then send the message. That means that the &quot;sending&quot;
            event will come quite late in this case.</li>
            <li>onsuccess (optional func): called only once, even for several recipients,
            when the message is successfully sent.</li>
            <li>onerror (optional func): called only once if there is an error.</li>
            </ul>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='MessageManager.sendSMS'>
          <a href='#MessageManager.sendSMS'>
            <code>
              .sendSMS<span class='gray'>(opts)</span>
            </code>
            <div class='force-inline'>
              <p>Sends an SMS based on the specified parameters object</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='MessageManager.sendSMS' class='mt0'>
                sendSMS<span class='gray'>(opts)</span>
              </h2>
              <p>Sends an SMS based on the specified parameters object</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>opts</strong>
                      :
                      <div class='force-inline'>
                        <p>Options object that contains :-</p>
            <ul>
            <li>recipients (string or array of string): contains the list of recipients
            for this message.</li>
            <li>content (string): the message&apos;s body.</li>
            <li>serviceId (optional long or string): the SIM serviceId we use to send the
            message.</li>
            <li>onsuccess (optional function): will be called when one SMS has been
            sent successfully, with the request&apos;s result as argument. Can be called
            several times.</li>
            <li>onerror (optional function): will be called when one SMS transmission
            failed, with the error object as argument. Can be called several times.</li>
            <li>
            <p>oncomplete (optional function): will be called when all messages have
            been sent. It&apos;s argument will have the following properties:</p>
            <ul>
            <li>hasError (boolean): whether we had at least one error</li>
            <li>return (array): each item is an object with the following properties:
            . success (boolean): whether this is a success or an error.
            . result (request&apos;s result): the request&apos;s result object.
            . recipient (string): the recipient used for this transmission.</li>
            </ul>
            </li>
            </ul>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_isReady' class='mt0'>
    _isReady<span class='gray'></span>
  </h2>
  <p>Set to true after init is run.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='computeLateArrivalInfos' class='mt0'>
    computeLateArrivalInfos<span class='gray'>(A, The, message, messageStatus)</span>
  </h2>
  
    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>A</strong>
          :
          <div class='force-inline'>
            <p>SMS/MMS message</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>The</strong>
          :
          <div class='force-inline'>
            <p>status of the message</p>

          </div>
        </li>
        <li> <strong>message</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>messageStatus</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> or </code>
      :
      <div class='force-inline'>
        <p>An object containing the l10n late notice infos
of the message or null if a notice is not required.</p>
<ul>
<li>l10nId : the id of the localized message</li>
<li>l10nArgs : the value of the lateness</li>
</ul>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='deleteMessages' class='mt0'>
    deleteMessages<span class='gray'>(messageIdList)</span>
  </h2>
  <p>Removes selected messages from DB and view (DOM), updates conversation in
inbox without re-rendering and moves to the inbox in case all messages were
removed.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code>> <strong>messageIdList</strong>
          :
          <div class='force-inline'>
            <p>List of message ids to remove.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='enableBubbleSelection' class='mt0'>
    enableBubbleSelection<span class='gray'>(node)</span>
  </h2>
  <p>If the bubble selection mode is disabled, all the non-editable element
should be set to user-select: none to prevent selection triggered
unexpectedly. Selection functionality should be enabled only by bubble
context menu. While in bubble selection mode, context menu is disabled
temporary for better use experience.
Since long press is used for context menu first, selection need to be
triggered by selection API manually. Focus/blur events are used for
simulating selection changed event, which is only been used in system.
When the node gets blur event, bubble selection mode should be dismissed.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>node</strong>
          :
          <div class='force-inline'>
            <p>element that contains message bubble text content.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='initiateNewMessage' class='mt0'>
    initiateNewMessage<span class='gray'>(parameters)</span>
  </h2>
  <p>Navigates user to Composer or Thread panel with custom parameters.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>parameters</strong>
          :
          <div class='force-inline'>
            <p>Navigation parameters. <code>number</code> and <code>messageId</code>
are mutually exclusive in the current implementation.</p>

          </div>
            <ul>
                <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>]</code> parameters.number
                  <p>Phone number or e-mail to send a
message to.</p>
</li>
                <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code>]</code> parameters.messageId
                  <p>Template message to resend.</p>
</li>
            </ul>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Promise that is resolved once navigation is completed.
Promise is rejected if no navigation happened, especially if the user did
not want to discard an existing message.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='isConversationPanel' class='mt0'>
    isConversationPanel<span class='gray'>(id, panel)</span>
  </h2>
  <p>Checks if specified panel corresponds to the specified conversation id. It
can be true for either conversation, participants or report panels.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code> <strong>id</strong>
          :
          <div class='force-inline'>
            <p>Id of the conversation.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>panel</strong>
          :
          <div class='force-inline'>
            <p>Panel description object to compare against.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='isCurrentConversation' class='mt0'>
    isCurrentConversation<span class='gray'>(conversationId)</span>
  </h2>
  <p>Checks if specified conversation id is currently active. It can be true for
either conversation, participants or report panels.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code> <strong>conversationId</strong>
          :
          <div class='force-inline'>
            <p>Id of the conversation.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onMessageSendRequestCompleted' class='mt0'>
    onMessageSendRequestCompleted<span class='gray'></span>
  </h2>
  <p>Fires once message (both SMS and MMS) send/resend request initiated by the
current application instance is successfully completed.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onRecipientSuggestionClick' class='mt0'>
    onRecipientSuggestionClick<span class='gray'>(event)</span>
  </h2>
  <p>Fires once user clicks on any recipient in the suggestions list.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>event</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='setHeaderContent' class='mt0'>
    setHeaderContent<span class='gray'>(contentL10n)</span>
  </h2>
  <p>Updates header content since it&apos;s used for different panels and should be
carefully handled for every case. In Thread panel header contains HTML
markup to support bidirectional content, but other panels still use it
with document.l10n.setAttributes as it would contain only localizable
text. We should get rid of this method once bug 961572 and bug 1011085 are
landed.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> or  or  <strong>contentL10n</strong>
          :
          <div class='force-inline'>
            <p>Should be either safe HTML string or l10n properties.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='shouldRenderForThreadId' class='mt0'>
    shouldRenderForThreadId<span class='gray'>(threadId)</span>
  </h2>
  <p>This method checks whether we&apos;re in the right state to render something for
this threadId.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>threadId</strong>
          :
          <div class='force-inline'>
            <p>The threadId we&apos;d like to render.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code></code>
      :
      <div class='force-inline'>
        <p>True if we can render for this threadId.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='storeDraftFromMessage' class='mt0'>
    storeDraftFromMessage<span class='gray'>(messageId)</span>
  </h2>
  <p>From a messageId, this stores a new draft with the content of this message.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>messageId</strong>
          :
          <div class='force-inline'>
            <p>Message to store as draft.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code>></code>
      :
      <div class='force-inline'>
        <p>Resolved with the draft id once the draft is
stored.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='toggleRecipientSuggestions' class='mt0'>
    toggleRecipientSuggestions<span class='gray'>(suggestions)</span>
  </h2>
  <p>Shows recipient suggestions if available, otherwise removes it from the DOM
and hides suggestions container.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment">DocumentFragment</a></code> <strong>suggestions</strong>
          :
          <div class='force-inline'>
            <p>DocumentFragment node that contains
recipient suggestion to display.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='_storeDraftFromMessage' class='mt0'>
    _storeDraftFromMessage<span class='gray'>(message)</span>
  </h2>
  <p>Store a draft for this message, and returns a draftId.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>message</strong>
          :
          <div class='force-inline'>
            <p>Message to save</p>

          </div>
            <ul>
                <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> message.threadId
                  <p>Conversation where this messages is
located.</p>
</li>
                <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> message.number
                  <p>The recipient as a phone number or email
address.</p>
</li>
                <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> or <code><a href="#Attachment">Attachment</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code><<code><a href="#Attachment">Attachment</a></code>>]</code> message.body
                  <p>The data to
add to the message&apos;s body.</p>
</li>
            </ul>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code>></code>
      :
      <div class='force-inline'>
        <p>The new draft id.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='toView' class='mt0'>
    toView<span class='gray'>(message, focus)</span>
  </h2>
  <p>Delivers the user to the correct view based on the params provided in the
&quot;message&quot; parameter.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>message</strong>
          :
          <div class='force-inline'>
            <p>It&apos;s
either a message object that belongs to a thread, or a message object from
the system. &quot;number&quot; is a string phone number to pre-populate the
recipients list with, &quot;body&quot; is an optional body to preset the compose
input with, &quot;threadId&quot; is an optional threadId corresponding to a new or
existing thread.</p>

          </div>
        </li>
        <li> <strong>focus</strong>
          :
          <div class='force-inline'>
            <p>indicates which of &apos;composer&apos; or &apos;recipients&apos; field
we need to focus when we navigate to Thread panel.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='ActivityClient' class='mt0'>
    ActivityClient<span class='gray'>(appInstanceId)</span>
  </h2>
  <p>ActivityClient is a wrapper around bridge client connected to the bridge
service hosted in the context that can handle system messages. It allows
to access &quot;activity&quot; request coming from system message when consumer can&apos;t
receive it directly (document in a different URL or even worker).</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>appInstanceId</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Static members</h4>
        <div class='collapsible' id='ActivityClient.hasPendingRequest'>
          <a href='#ActivityClient.hasPendingRequest'>
            <code>
              .hasPendingRequest<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Checks if client has pending activity request.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='ActivityClient.hasPendingRequest' class='mt0'>
                hasPendingRequest<span class='gray'></span>
              </h2>
              <p>Checks if client has pending activity request.</p>
            
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code></code>
                  
                  <div class='force-inline'>
                    
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='ActivityClient.init'>
          <a href='#ActivityClient.init'>
            <code>
              .init<span class='gray'>(appInstanceId)</span>
            </code>
            <div class='force-inline'>
              <p>Initialized activity bridge client.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='ActivityClient.init' class='mt0'>
                init<span class='gray'>(appInstanceId)</span>
              </h2>
              <p>Initialized activity bridge client.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>appInstanceId</strong>
                      :
                      <div class='force-inline'>
                        <p>Unique identifier of app instance where
            client resides in.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='ActivityClient.postError'>
          <a href='#ActivityClient.postError'>
            <code>
              .postError<span class='gray'>(error)</span>
            </code>
            <div class='force-inline'>
              <p>Notifies activity caller that exception occurred.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='ActivityClient.postError' class='mt0'>
                postError<span class='gray'>(error)</span>
              </h2>
              <p>Notifies activity caller that exception occurred.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li> <strong>error</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Promise">Promise</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>Promise that resolves once operation is completed.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='ActivityClient.postResult'>
          <a href='#ActivityClient.postResult'>
            <code>
              .postResult<span class='gray'>(result)</span>
            </code>
            <div class='force-inline'>
              <p>Posts results to the activity caller.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='ActivityClient.postResult' class='mt0'>
                postResult<span class='gray'>(result)</span>
              </h2>
              <p>Posts results to the activity caller.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li> <strong>result</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Promise">Promise</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>Promise that resolves once operation is completed.</p>
            
                  </div>
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='ActivityDataType' class='mt0'>
    ActivityDataType<span class='gray'></span>
  </h2>
  <p>Describes available data types that can be associated with the activities.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='ActivityShim' class='mt0'>
    ActivityShim<span class='gray'>(appInstanceId, setMessageHandler)</span>
  </h2>
  <p>ActivityShim is a shim around &quot;activity&quot; system message handling code that
allows to access activity request data by the consumer that can&apos;t handle
system messages directly (document hosted in a different URl or worker) via
exposing bridge service with required methods.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>appInstanceId</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>setMessageHandler</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Static members</h4>
        <div class='collapsible' id='ActivityShim.init'>
          <a href='#ActivityShim.init'>
            <code>
              .init<span class='gray'>(appInstanceId, setMessageHandler)</span>
            </code>
            <div class='force-inline'>
              <p>Initialized activity shim bridge service.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='ActivityShim.init' class='mt0'>
                init<span class='gray'>(appInstanceId, setMessageHandler)</span>
              </h2>
              <p>Initialized activity shim bridge service.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>appInstanceId</strong>
                      :
                      <div class='force-inline'>
                        <p>Unique identifier of app instance where
            shim resides in.</p>
            
                      </div>
                    </li>
                    <li> <strong>setMessageHandler</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='Recipients' class='mt0'>
    Recipients<span class='gray'>(setup)</span>
  </h2>
  <p>Recipients</p>
<p>Create a Recipients list that backs the Recipients.View</p>
<p>Recipients list will reject duplicates.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>setup</strong>
          :
          <div class='force-inline'>
            <p>Required parameters for created a Recipients list.</p>
<pre><code>             - outer, string ID of outer recipient display element.
             - inner, string ID of inner recipient display element.
             - template, Precompiled Template instance.
</code></pre>

          </div>
        </li>
    </ul>
      <h4>Static members</h4>
        <div class='collapsible' id='Recipients.View'>
          <a href='#Recipients.View'>
            <code>
              .View<span class='gray'>(owner, setup)</span>
            </code>
            <div class='force-inline'>
              <p>Recipients.View</p>
<p>Create a Recipients.View: The DOM structure associated with
the Recipients list</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Recipients.View' class='mt0'>
                View<span class='gray'>(owner, setup)</span>
              </h2>
              <p>Recipients.View</p>
            <p>Create a Recipients.View: The DOM structure associated with
            the Recipients list</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li> <strong>owner</strong>
                      :
                      <div class='force-inline'>
                        
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>setup</strong>
                      :
                      <div class='force-inline'>
                        <p>Required parameters for created a Recipients list.</p>
            <pre><code>             - outer, string ID of outer recipient display element.
                         - inner, string ID of inner recipient display element.
                         - template, Precompiled Template instance.
            </code></pre>
            
                      </div>
                    </li>
                </ul>
                  <h4>Instance members</h4>
                    <div class='collapsible' id='Recipients.View.clear'>
                      <a href='#Recipients.View.clear'>
                        <code>
                          #clear<span class='gray'></span>
                        </code>
                        <div class='force-inline'>
                          <p>clear</p>
            <p>Empty the inner element by setting its
            textContent to an empty string.</p>
            
                        </div>
                      </a>
                      <div class='collapser border px2'>
                        <section class='py2 clearfix'>
                          <h2 id='Recipients.View.clear' class='mt0'>
                            clear<span class='gray'></span>
                          </h2>
                          <p>clear</p>
                        <p>Empty the inner element by setting its
                        textContent to an empty string.</p>
                        
                              <h4>Returns</h4>
                              <code><code>Recipients.View</code></code>
                              :
                              <div class='force-inline'>
                                <p>Recipients.View instance.</p>
                        
                              </div>
                        </section>
                      </div>
                    </div>
                    <div class='collapsible' id='Recipients.View.focus'>
                      <a href='#Recipients.View.focus'>
                        <code>
                          #focus<span class='gray'>(node)</span>
                        </code>
                        <div class='force-inline'>
                          <p>focus</p>
            <p>Focus on the last editable in the list.
            Generally, this will be the placeholder.</p>
            <p>The behaviour of focus in this Recipients View context can
            be summarized as:</p>
            <p>Place the cursor at the end of any existing text in
            an explicit node or the current placeholder node by default.</p>
            <p>If the node is the current placeholder, make it editable
            and set focus.</p>
            
                        </div>
                      </a>
                      <div class='collapser border px2'>
                        <section class='py2 clearfix'>
                          <h2 id='Recipients.View.focus' class='mt0'>
                            focus<span class='gray'>(node)</span>
                          </h2>
                          <p>focus</p>
                        <p>Focus on the last editable in the list.
                        Generally, this will be the placeholder.</p>
                        <p>The behaviour of focus in this Recipients View context can
                        be summarized as:</p>
                        <p>Place the cursor at the end of any existing text in
                        an explicit node or the current placeholder node by default.</p>
                        <p>If the node is the current placeholder, make it editable
                        and set focus.</p>
                        
                            <h4>Parameters</h4>
                            <ul class='suppress-p-margin'>
                                <li> <strong>node</strong>
                                  :
                                  <div class='force-inline'>
                                    
                                  </div>
                                </li>
                            </ul>
                              <h4>Returns</h4>
                              <code><code>Recipients.View</code></code>
                              :
                              <div class='force-inline'>
                                <p>Recipients.View instance.</p>
                        
                              </div>
                        </section>
                      </div>
                    </div>
                    <div class='collapsible' id='Recipients.View.handleEvent'>
                      <a href='#Recipients.View.handleEvent'>
                        <code>
                          #handleEvent<span class='gray'>(event)</span>
                        </code>
                        <div class='force-inline'>
                          <p>handleEvent</p>
            <p>Single method for event handler delegation.</p>
            
                        </div>
                      </a>
                      <div class='collapser border px2'>
                        <section class='py2 clearfix'>
                          <h2 id='Recipients.View.handleEvent' class='mt0'>
                            handleEvent<span class='gray'>(event)</span>
                          </h2>
                          <p>handleEvent</p>
                        <p>Single method for event handler delegation.</p>
                        
                            <h4>Parameters</h4>
                            <ul class='suppress-p-margin'>
                                <li> <strong>event</strong>
                                  :
                                  <div class='force-inline'>
                                    
                                  </div>
                                </li>
                            </ul>
                              <h4>Returns</h4>
                              <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined">Undefined</a></code></code>
                              :
                              <div class='force-inline'>
                                <p>void return.</p>
                        
                              </div>
                        </section>
                      </div>
                    </div>
                    <div class='collapsible' id='Recipients.View.render'>
                      <a href='#Recipients.View.render'>
                        <code>
                          #render<span class='gray'>(opts)</span>
                        </code>
                        <div class='force-inline'>
                          <p>render</p>
            <p>Render a visual list of recipients followed by
            an editable placeholder.</p>
            
                        </div>
                      </a>
                      <div class='collapser border px2'>
                        <section class='py2 clearfix'>
                          <h2 id='Recipients.View.render' class='mt0'>
                            render<span class='gray'>(opts)</span>
                          </h2>
                          <p>render</p>
                        <p>Render a visual list of recipients followed by
                        an editable placeholder.</p>
                        
                            <h4>Parameters</h4>
                            <ul class='suppress-p-margin'>
                                <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>opts</strong>
                                  :
                                  <div class='force-inline'>
                                    <p>Optional flags.</p>
                        <pre><code>                  - addPlaceholder, force a placeholder
                                          to be inserted at the end of the
                                          rendered recipient list.
                        </code></pre>
                        
                                  </div>
                                </li>
                            </ul>
                              <h4>Returns</h4>
                              <code><code>Recipients.View</code></code>
                              :
                              <div class='force-inline'>
                                <p>Recipients.View instance.</p>
                        
                              </div>
                        </section>
                      </div>
                    </div>
                    <div class='collapsible' id='Recipients.View.updateMode'>
                      <a href='#Recipients.View.updateMode'>
                        <code>
                          #updateMode<span class='gray'></span>
                        </code>
                        <div class='force-inline'>
                          <p>Checks whether recipients view mode (single or multi line) has changed
            since previous check and notifies listeners with &apos;modechange&apos; event in this
            case.</p>
            
                        </div>
                      </a>
                      <div class='collapser border px2'>
                        <section class='py2 clearfix'>
                          <h2 id='Recipients.View.updateMode' class='mt0'>
                            updateMode<span class='gray'></span>
                          </h2>
                          <p>Checks whether recipients view mode (single or multi line) has changed
                        since previous check and notifies listeners with &apos;modechange&apos; event in this
                        case.</p>
                        
                        </section>
                      </div>
                    </div>
            </section>
          </div>
        </div>
      <h4>Instance members</h4>
        <div class='collapsible' id='Recipients.add'>
          <a href='#Recipients.add'>
            <code>
              #add<span class='gray'>(entry)</span>
            </code>
            <div class='force-inline'>
              <p>add Push a new recipient to the current recipients list.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Recipients.add' class='mt0'>
                add<span class='gray'>(entry)</span>
              </h2>
              <p>add Push a new recipient to the current recipients list.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>entry</strong>
                      :
                      <div class='force-inline'>
                        <p>{ name: &apos;&apos;, number: &apos;&apos; }.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Recipients">Recipients</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>return the recipients list.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Recipients.emit'>
          <a href='#Recipients.emit'>
            <code>
              #emit<span class='gray'>(type, handler)</span>
            </code>
            <div class='force-inline'>
              <p>emit Emit an event for an &quot;add&quot; or &quot;remove&quot;.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Recipients.emit' class='mt0'>
                emit<span class='gray'>(type, handler)</span>
              </h2>
              <p>emit Emit an event for an &quot;add&quot; or &quot;remove&quot;.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>type</strong>
                      :
                      <div class='force-inline'>
                        <p>Either &quot;add&quot; or &quot;remove&quot;.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>handler</strong>
                      :
                      <div class='force-inline'>
                        <p>The reference handler.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Recipients">Recipients</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>return the recipients list.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Recipients.off'>
          <a href='#Recipients.off'>
            <code>
              #off<span class='gray'>(type, handler)</span>
            </code>
            <div class='force-inline'>
              <p>off Unregister an event handler for an &quot;add&quot; or &quot;remove&quot; event.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Recipients.off' class='mt0'>
                off<span class='gray'>(type, handler)</span>
              </h2>
              <p>off Unregister an event handler for an &quot;add&quot; or &quot;remove&quot; event.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>type</strong>
                      :
                      <div class='force-inline'>
                        <p>Either &quot;add&quot; or &quot;remove&quot;.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>handler</strong>
                      :
                      <div class='force-inline'>
                        <p>The reference handler.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Recipients">Recipients</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>return the recipients list.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Recipients.on'>
          <a href='#Recipients.on'>
            <code>
              #on<span class='gray'>(type, handler)</span>
            </code>
            <div class='force-inline'>
              <p>on Register an event handler for an &quot;add&quot; or &quot;remove&quot; event.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Recipients.on' class='mt0'>
                on<span class='gray'>(type, handler)</span>
              </h2>
              <p>on Register an event handler for an &quot;add&quot; or &quot;remove&quot; event.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>type</strong>
                      :
                      <div class='force-inline'>
                        <p>Either &quot;add&quot; or &quot;remove&quot;.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>handler</strong>
                      :
                      <div class='force-inline'>
                        <p>The function to call.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Recipients">Recipients</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>return the recipients list.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Recipients.update'>
          <a href='#Recipients.update'>
            <code>
              #update<span class='gray'>(recipOrIndex, entry)</span>
            </code>
            <div class='force-inline'>
              <p>update Update/replace a recipient at a specific index in the list.</p>

            </div>
          </a>
          <div class='collapser border px2'>
            <section class='py2 clearfix'>
              <h2 id='Recipients.update' class='mt0'>
                update<span class='gray'>(recipOrIndex, entry)</span>
              </h2>
              <p>update Update/replace a recipient at a specific index in the list.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>recipOrIndex</strong>
                      :
                      <div class='force-inline'>
                        <p>Recipient or Index to update.</p>
            
                      </div>
                    </li>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>entry</strong>
                      :
                      <div class='force-inline'>
                        <p>{ name: &apos;&apos;, number: &apos;&apos; }.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Recipients">Recipients</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>return the recipients list.</p>
            
                  </div>
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='Drafts' class='mt0'>
    Drafts<span class='gray'></span>
  </h2>
  <p>Drafts</p>
<p>A collection of active Draft objects, indexed by thread id.</p>

      <h4>Static members</h4>
        <div class='collapsible' id='Drafts.add'>
          <a href='#Drafts.add'>
            <code>
              .add<span class='gray'>(draft)</span>
            </code>
            <div class='force-inline'>
              <p>Pushes a Draft instance to the Drafts in-memory collection and commits
it to the persistent storage.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Drafts.add' class='mt0'>
                add<span class='gray'>(draft)</span>
              </h2>
              <p>Pushes a Draft instance to the Drafts in-memory collection and commits
            it to the persistent storage.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="#Draft">Draft</a></code> <strong>draft</strong>
                      :
                      <div class='force-inline'>
                        <p>Draft instance.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Drafts">Drafts</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>Returns the Drafts object.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Drafts.byDraftId'>
          <a href='#Drafts.byDraftId'>
            <code>
              .byDraftId<span class='gray'>(id)</span>
            </code>
            <div class='force-inline'>
              <p>Returns the draft object with the specified id.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Drafts.byDraftId' class='mt0'>
                byDraftId<span class='gray'>(id)</span>
              </h2>
              <p>Returns the draft object with the specified id.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>id</strong>
                      :
                      <div class='force-inline'>
                        <p>Id of the draft to return.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Draft">Draft</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>Found draft instance or null if nothing is found.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Drafts.byThreadId'>
          <a href='#Drafts.byThreadId'>
            <code>
              .byThreadId<span class='gray'>(threadId)</span>
            </code>
            <div class='force-inline'>
              <p>Returns draft for the specified thread id or null if it doesn&apos;t exist.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Drafts.byThreadId' class='mt0'>
                byThreadId<span class='gray'>(threadId)</span>
              </h2>
              <p>Returns draft for the specified thread id or null if it doesn&apos;t exist.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>threadId</strong>
                      :
                      <div class='force-inline'>
                        <p>Thread id to recall draft for.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Draft">Draft</a></code></code>
                  
                  <div class='force-inline'>
                    
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Drafts.clear'>
          <a href='#Drafts.clear'>
            <code>
              .clear<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>clear</p>
<p>Delete drafts from the map.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Drafts.clear' class='mt0'>
                clear<span class='gray'></span>
              </h2>
              <p>clear</p>
            <p>Delete drafts from the map.</p>
            
                  <h4>Returns</h4>
                  <code><code><a href="#Drafts">Drafts</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>return the Drafts object.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Drafts.delete'>
          <a href='#Drafts.delete'>
            <code>
              .delete<span class='gray'>(draft)</span>
            </code>
            <div class='force-inline'>
              <p>Deletes a draft record from Drafts in-memory collection.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Drafts.delete' class='mt0'>
                delete<span class='gray'>(draft)</span>
              </h2>
              <p>Deletes a draft record from Drafts in-memory collection.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="#Draft">Draft</a></code> <strong>draft</strong>
                      :
                      <div class='force-inline'>
                        <p>Draft instance to delete.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Drafts">Drafts</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>Returns the Drafts object.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Drafts.getAll'>
          <a href='#Drafts.getAll'>
            <code>
              .getAll<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Returns iterator for all available drafts. For the drafts associated with
the thread, only the latest draft is returned.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Drafts.getAll' class='mt0'>
                getAll<span class='gray'></span>
              </h2>
              <p>Returns iterator for all available drafts. For the drafts associated with
            the thread, only the latest draft is returned.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='Drafts.getAllThreadless'>
          <a href='#Drafts.getAllThreadless'>
            <code>
              .getAllThreadless<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Returns list of all thread less drafts.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Drafts.getAllThreadless' class='mt0'>
                getAllThreadless<span class='gray'></span>
              </h2>
              <p>Returns list of all thread less drafts.</p>
            
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code><<code><a href="#Draft">Draft</a></code>></code>
                  
                  <div class='force-inline'>
                    
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Drafts.init'>
          <a href='#Drafts.init'>
            <code>
              .init<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Initialize the InterInstanceEventDispatcher and relay the draft
saved/deleted events from another instance.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Drafts.init' class='mt0'>
                init<span class='gray'></span>
              </h2>
              <p>Initialize the InterInstanceEventDispatcher and relay the draft
            saved/deleted events from another instance.</p>
            
            </section>
          </div>
        </div>
        <div class='collapsible' id='Drafts.request'>
          <a href='#Drafts.request'>
            <code>
              .request<span class='gray'>(force)</span>
            </code>
            <div class='force-inline'>
              <p>Requests drafts from asyncStorage or in-memory cache. Result is cached.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Drafts.request' class='mt0'>
                request<span class='gray'>(force)</span>
              </h2>
              <p>Requests drafts from asyncStorage or in-memory cache. Result is cached.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li> <strong>force</strong>
                      :
                      <div class='force-inline'>
                        <p>Indicates whether we should respect already
            cached result or <em>force</em> asyncStorage request once again.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Promise">Promise</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>Promise that resolves when all drafts are retrieved
            from persistent storage.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Drafts.size'>
          <a href='#Drafts.size'>
            <code>
              .size<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>size</p>
<p>Returns the number of Draft Lists.</p>
<p>There is one Draft.List per Thread and
one Draft.List for all threadless Drafts.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Drafts.size' class='mt0'>
                size<span class='gray'></span>
              </h2>
              <p>size</p>
            <p>Returns the number of Draft Lists.</p>
            <p>There is one Draft.List per Thread and
            one Draft.List for all threadless Drafts.</p>
            
                  <h4>Returns</h4>
                  <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>Maps to draftIndex size property.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='Drafts.store'>
          <a href='#Drafts.store'>
            <code>
              .store<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Stores drafts that are held in memory to local storage.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='Drafts.store' class='mt0'>
                store<span class='gray'></span>
              </h2>
              <p>Stores drafts that are held in memory to local storage.</p>
            
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='alert' class='mt0'>
    alert<span class='gray'>(message, title)</span>
  </h2>
  <p>Shows modal alert dialog with single OK button to dismiss it.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>message</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>title</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Return promise is always successfully resolved.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='closeNotificationsForThread' class='mt0'>
    closeNotificationsForThread<span class='gray'>(threadId)</span>
  </h2>
  <p>Helper function for removing notifications. It will fetch notification
using threadId, and close them from the returned list.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>threadId</strong>
          :
          <div class='force-inline'>
            <p>of the target message.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code><undefined></code>
      :
      <div class='force-inline'>
        <p>Return always successfully resolved
Promise with notification.close method called or console.error message.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='confirm' class='mt0'>
    confirm<span class='gray'>(message, title, confirmOptions)</span>
  </h2>
  <p>Shows modal confirm dialog with two buttons, first acts as cancel action,
second one - as confirm action.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>message</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>title</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>confirmOptions</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Returned promise is resolved when user tap on confirm
button and rejected when user taps on cancel button.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='debounce' class='mt0'>
    debounce<span class='gray'>(func, waitTime)</span>
  </h2>
  <p>Returns a function that will call specified &quot;func&quot; function only after it
stops being called for a specified wait time.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code> <strong>func</strong>
          :
          <div class='force-inline'>
            <p>Function to call.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code> <strong>waitTime</strong>
          :
          <div class='force-inline'>
            <p>Number of milliseconds to wait before calling
actual &quot;func&quot; function once debounced function stops being called.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getPhoneDetails' class='mt0'>
    getPhoneDetails<span class='gray'>(input, tels)</span>
  </h2>
  <p>Based on input number tries to extract more phone details like phone
type, full phone number and phone carrier.</p>
<ol>
<li>
<p>If a phone number has carrier associated with it then both &quot;type&quot; and
&quot;carrier&quot; will be returned;</p>
</li>
<li>
<p>If there is no carrier associated with the phone number then &quot;type&quot;
and &quot;phone number&quot; will be returned;</p>
</li>
<li>
<p>If for some reason a single contact has two phone numbers with the
same type and the same carrier then &quot;type&quot; and &quot;phone number&quot; will be
returned;</p>
</li>
</ol>
<p>note: The argument &quot;tels&quot; can actually contain &quot;emails&quot; too.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>input</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>tels</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getSimNameByIccId' class='mt0'>
    getSimNameByIccId<span class='gray'>(iccId)</span>
  </h2>
  <p>Return the localized SIM name for multi-SIM scenario or empty string for
single-SIM scenario</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>iccId</strong>
          :
          <div class='force-inline'>
            <p>Integrate circuit card identity for SIM.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Return the async translation result like SIM1 or SIM2
(locale dependent) depending on the iccId or empty string for single-sim
scenario.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getSizeForL10n' class='mt0'>
    getSizeForL10n<span class='gray'>(size)</span>
  </h2>
  <p>Gets localization details for attachment size label.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>size</strong>
          :
          <div class='force-inline'>
            <p>Attachment blob size in bytes.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='initializeShimHost' class='mt0'>
    initializeShimHost<span class='gray'>(appInstanceId)</span>
  </h2>
  <p>Initializes shim host iframe with the current app instance id.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>appInstanceId</strong>
          :
          <div class='force-inline'>
            <p>Unique identifier of the app instance.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code><<code>void</code>></code>
      :
      <div class='force-inline'>
        <p>Resolves once shim host is initialized.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='multiRecipientMatch' class='mt0'>
    multiRecipientMatch<span class='gray'>(a, b)</span>
  </h2>
  <p>multiRecipientMatch</p>
<p>Check multi-repients without regard to order</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>> <strong>a</strong>
          :
          <div class='force-inline'>
            <p>First recipient field.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>> <strong>b</strong>
          :
          <div class='force-inline'>
            <p>Second recipient field.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code></code>
      :
      <div class='force-inline'>
        <p>Return true if all recipients match.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onceDocumentIsVisible' class='mt0'>
    onceDocumentIsVisible<span class='gray'></span>
  </h2>
  <p>Returns Promise instance that is resolved instantly if document is
visible (document.hidden === false), othewise it&apos;s resolved only once
<code>visibilitychange</code> event is fired.</p>

      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code><<code>void</code>></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='Promise' class='mt0'>
    Promise<span class='gray'></span>
  </h2>
  <p>Promise related utilities</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='throttle' class='mt0'>
    throttle<span class='gray'>(func, delay, options)</span>
  </h2>
  <p>Returns a rate limited function, useful to reduce the number of function
calls when listening to user input (keypress) or browser events.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>func</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>delay</strong>
            (default <code>300</code>)
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>options</strong>
            (default <code>{}</code>)
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code></code>
      :
      <div class='force-inline'>
        <p>The rate limited function that will call the
original function</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='appendThread' class='mt0'>
    appendThread<span class='gray'>(thread)</span>
  </h2>
  <p>Append a thread to the global threads container. Creates a time container
(i.e. for a day or some other time period) for this thread if it doesn&apos;t
exist already.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>thread</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code></code>
      :
      <div class='force-inline'>
        <p>Boolean true if a time container was created, false otherwise</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='notifyAboutSavedDraftWithId' class='mt0'>
    notifyAboutSavedDraftWithId<span class='gray'></span>
  </h2>
  <p>Indicates that draft with particular id has been saved recently and  user
should be notified about it.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='updateConversationContent' class='mt0'>
    updateConversationContent<span class='gray'>(node, record)</span>
  </h2>
  <p>This method is responsible for adding or updating the data that could
change in a node that&apos;s not moving in the same time.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code> <strong>node</strong>
          :
          <div class='force-inline'>
            <p>The Node to update.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>record</strong>
          :
          <div class='force-inline'>
            <p>An object that holds the conversation informations.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='updateThread' class='mt0'>
    updateThread<span class='gray'>(record, [options])</span>
  </h2>
  <p>Update the DOM element for a conversation.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>Record</code> <strong>record</strong>
          :
          <div class='force-inline'>
            <p>This contains the conversation informations.</p>

          </div>
        </li>
        <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>]</code> <strong>options</strong>
          :
          <div class='force-inline'>
            <p>Various options or hints to make the update more
efficient.</p>

          </div>
            <ul>
                <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code>]</code> options.conversationDraft
                  <p>True if this update comes from
a draft change for this thread. Will be false for &quot;isDraft&quot; conversation
nodes.</p>
</li>
                <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code>]</code> options.deleted
                  <p>True if this update comes from a message
deletion.</p>
</li>
                <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code>]</code> options.unread
                  <p>True if we have a new unread message in
this conversation.</p>
</li>
            </ul>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='appInstanceId' class='mt0'>
    appInstanceId<span class='gray'></span>
  </h2>
  <p>Unique identifier of app instance where client resides in.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='appInstanceId' class='mt0'>
    appInstanceId<span class='gray'></span>
  </h2>
  <p>Unique identifier of app instance where client resides in.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='APPLICATION_READY_CLASS_NAME' class='mt0'>
    APPLICATION_READY_CLASS_NAME<span class='gray'></span>
  </h2>
  <p>Class that is applied to body whenever application is ready for user.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='async' class='mt0'>
    async<span class='gray'>(generatorFunction)</span>
  </h2>
  <p>Wraps a generator function that yields Promises in a way that generator
flow is paused until yielded Promise is resolved, so that consumer gets
Promise result instead of Promise instance itself.
See <a href="https://www.promisejs.org/generators/">https://www.promisejs.org/generators/</a> as the reference.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>generatorFunction</strong>
          :
          <div class='force-inline'>
            <p>Generator function
that yields Promises.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">function</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='attachHistoryListener' class='mt0'>
    attachHistoryListener<span class='gray'></span>
  </h2>
  <p>Attaches the hashchange event handler.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='Attachment' class='mt0'>
    Attachment<span class='gray'>(blob, options)</span>
  </h2>
  <p>set Property of Attachment from given blob and options object.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>blob</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>options</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='AUTO_WAKE_LOCK_UNLOCK_TIMEOUT' class='mt0'>
    AUTO_WAKE_LOCK_UNLOCK_TIMEOUT<span class='gray'></span>
  </h2>
  <p>Number of milliseconds after which currently acquired wake lock will be
automatically released.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='back' class='mt0'>
    back<span class='gray'></span>
  </h2>
  <p>Calls <code>window.back</code> after running the <code>beforeLeave</code> step.</p>
<p>We&apos;ll either (1) stay in the same document, or (2) move back to an earlier
document.</p>
<p>In case 1), this will only change the hash, and then the onHashChange event
handler takes care of the end of the transition.
In case 2), the full URL will change, and the new window&apos;s init method will
take care of the end of the transition.</p>

      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Resolves when the action is done, if we stay in the same
document.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='init' class='mt0'>
    init<span class='gray'></span>
  </h2>
  <p>This is called when a view is started.</p>
<p>It tries to find the right view from the location, and then initiates a
navigation from this.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='isCurrentPanel' class='mt0'>
    isCurrentPanel<span class='gray'>(panelName, [args])</span>
  </h2>
  <p>Called with a first argument that is not an object, it returns whether the
current panel is this first argument.</p>
<p>Called with 2 arguments, the first one is not an object, the second one
must be an object. It returns whether the current panel is the first
argument, and for each property of the second argument, whether its value
is equal to the value for the current panel&apos;s arguments&apos; same property.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>panelName</strong>
          :
          <div class='force-inline'>
            <p>Checks if the current panel is this panelName.</p>

          </div>
        </li>
        <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>]</code> <strong>args</strong>
          :
          <div class='force-inline'>
            <p>Checks against the current panel enter
arguments.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code></code>
      :
      <div class='force-inline'>
        <p>Result of the comparison.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='isDefaultPanel' class='mt0'>
    isDefaultPanel<span class='gray'></span>
  </h2>
  <p>Checks if current location.hash corresponds to default panel. This is
sometimes called before we resolve the state, in that case resolve
directly using findViewNameFromHash. Otherwise we use the resolved state.</p>

      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code></code>
      :
      <div class='force-inline'>
        <p>True if current location.hash corresponds to default
panel.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='setReady' class='mt0'>
    setReady<span class='gray'></span>
  </h2>
  <p>Called by startup scripts to indicate when all lazy loaded files are
downloaded.</p>
<p>TODO: lazyload the necessary files directly in this file.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='toPanel' class='mt0'>
    toPanel<span class='gray'>(viewName, [args])</span>
  </h2>
  <p>Lifecycle methods are generally called in this order:</p>
<ul>
<li>previousPanel.beforeLeave</li>
<li>nextPanel.beforeEnter</li>
<li>nextPanel.afterEnter</li>
<li>previousPanel.afterLeave</li>
</ul>
<p>If we stay in the same document and enter a new panel, the panels are slid
between beforeEnter and afterLeave.</p>
<p>With the new architecture, the navigation can happen in one of 2 cases:</p>
<ol>
<li>either we stay in the same document,</li>
<li>or we move to another document.</li>
</ol>
<p>In case 1), we only change the hash, and then the onHashChange event
handler takes care of the end of the transition.
In case 2), we change the full URL, and the new window&apos;s init method will
take care of the end of the transition.</p>
<p>In all cases:</p>
<ul>
<li>beforeLeave can prevent changing the location and thus the
navigation. It is expected that beforeLeave does not change any state but
merely checks whether the transition can take place.</li>
<li>beforeEnter will be called before the view is displayed. Therefore it can
make visual changes but it can&apos;t prevent a view from being entered. All
rejections and exceptions will be swallowed and output to the console.</li>
<li>afterEnter does left-over actions</li>
<li>afterLeave needs to clean up the panel, reclaim memory. It&apos;s called only
when the user stays in the same document.</li>
</ul>
<p>toPanel itself returns a Promise that will be resolved if the transition
happened and rejected otherwise.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>viewName</strong>
          :
          <div class='force-inline'>
            <p>The view to load.</p>

          </div>
        </li>
        <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>]</code> <strong>args</strong>
          :
          <div class='force-inline'>
            <p>The arguments to pass to the view.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Resolves when the transition is over, if we stay in the
same document.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='serviceMixin' class='mt0'>
    serviceMixin<span class='gray'>(endpoint)</span>
  </h2>
  <p>This mixin allows to expose easily a service from an object.</p>
<p>This needs the following properties to work properly:</p>
<ul>
<li>SERVICE_NAME holds the service name.</li>
<li>METHODS holds the methods that will be exposed by the service.</li>
<li>STREAMS holds the methods that handle streams exposed by the service.</li>
</ul>
<p>EVENTS, METHODS and STREAMS are all optional.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>endpoint</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Static members</h4>
        <div class='collapsible' id='serviceMixin.broadcast'>
          <a href='#serviceMixin.broadcast'>
            <code>
              .broadcast<span class='gray'>(eventName, data)</span>
            </code>
            <div class='force-inline'>
              <p>Broadcast an event to all listeners.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='serviceMixin.broadcast' class='mt0'>
                broadcast<span class='gray'>(eventName, data)</span>
              </h2>
              <p>Broadcast an event to all listeners.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>eventName</strong>
                      :
                      <div class='force-inline'>
                        <p>The event name to send.</p>
            
                      </div>
                    </li>
                    <li><code>any</code> <strong>data</strong>
                      :
                      <div class='force-inline'>
                        <p>Data to send with the event.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
        <div class='collapsible' id='serviceMixin.initService'>
          <a href='#serviceMixin.initService'>
            <code>
              .initService<span class='gray'>(endpoint)</span>
            </code>
            <div class='force-inline'>
              <p>Initialize service to listen on the default context and given endpoint.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='serviceMixin.initService' class='mt0'>
                initService<span class='gray'>(endpoint)</span>
              </h2>
              <p>Initialize service to listen on the default context and given endpoint.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code>Iframe</code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">Worker</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/MessagePort">MessagePort</a></code> or <code>BroadcastChannel</code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window">Window</a></code> <strong>endpoint</strong>
                      :
                      <div class='force-inline'>
                        <p>The context/thread that service could listen for.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='catchStepError' class='mt0'>
    catchStepError<span class='gray'>([e])</span>
  </h2>
  <p>This function is used as a rejection handler, to swallow errors and log them.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>[<code>Exception</code>]</code> <strong>e</strong>
          :
          <div class='force-inline'>
            <p>The exception to display, if any.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='channel' class='mt0'>
    channel<span class='gray'></span>
  </h2>
  <p>Channel that is used to broadcast messages between message app instances.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='client' class='mt0'>
    client<span class='gray'></span>
  </h2>
  <p>Reference to active bridge client instance. For every app instance that is
run as inline activity we have only one bridge service (hosted in the main
window context) and only one bridge client (hosted in the same context).
Client should only communicate with the service that holds reference to
the corresponding activity request. Since we can potentially have more than
one inline activity instance we should use unique bridge service name for
every app instance to avoid message collision.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='client' class='mt0'>
    client<span class='gray'></span>
  </h2>
  <p>Reference to active bridge client instance.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='client' class='mt0'>
    client<span class='gray'></span>
  </h2>
  <p>Reference to active bridge client instance.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='client' class='mt0'>
    client<span class='gray'></span>
  </h2>
  <p>Reference to active bridge client instance.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='clone' class='mt0'>
    clone<span class='gray'></span>
  </h2>
  <p>clone</p>
<p>Create a clone Recipient record. This
is used for exposing a Recipient record
to external code, specifically in events.</p>

      <h4>Returns</h4>
      <code><code>Recipient</code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='set' class='mt0'>
    set<span class='gray'>(key, key, value, dict)</span>
  </h2>
  <p>set</p>
<p>Set the value of one or more Recipient instance properties</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>key</strong>
          :
          <div class='force-inline'>
            <p>Object of key=&gt;value pairs.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>key</strong>
          :
          <div class='force-inline'>
            <p>Key string.</p>

          </div>
        </li>
        <li><code>Any</code> <strong>value</strong>
          :
          <div class='force-inline'>
            <p>Value, any type.</p>

          </div>
        </li>
        <li> <strong>dict</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='cloneThread' class='mt0'>
    cloneThread<span class='gray'>(thread)</span>
  </h2>
  <p>Clones DOM thread object to plain JS object, so that it&apos;s possible to pass it
via postMessage. Should be removed once bug 1172794 is landed.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>DOMMozMobileMessageThread</code> <strong>thread</strong>
          :
          <div class='force-inline'>
            <p>DOM Message thread instance.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='Compose' class='mt0'>
    Compose<span class='gray'></span>
  </h2>
  <p>Handle UI specifics of message composition. Namely,
resetting (auto manages placeholder text), getting
message content, and message size</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='contact' class='mt0'>
    contact<span class='gray'></span>
  </h2>
  <p>params {
contact:
A contact object.</p>
<p>input:
Any input value associated with the contact,
possibly from a search or similar operation.</p>
<p>skip:
An array of phone numbers that should not be rendered</p>
<p>target:
Parent node to append the rendered node to</p>
<p>infoBlock:
Node that will be appended to the node selected by
infoBlockParentSelector</p>
<p>infoBlockParentSelector:
Parent element selector for appending infoBlock as child</p>
<p>}</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='ConversationClient' class='mt0'>
    ConversationClient<span class='gray'>(appInstanceId)</span>
  </h2>
  <p>ConversationClient is a wrapper around bridge client connected to the
bridge service hosted in a Shared Worker.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>appInstanceId</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Static members</h4>
        <div class='collapsible' id='ConversationClient.getAllConversations'>
          <a href='#ConversationClient.getAllConversations'>
            <code>
              .getAllConversations<span class='gray'>(onConversationRetrieved)</span>
            </code>
            <div class='force-inline'>
              <p>Retrieves all conversations and drafts.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='ConversationClient.getAllConversations' class='mt0'>
                getAllConversations<span class='gray'>(onConversationRetrieved)</span>
              </h2>
              <p>Retrieves all conversations and drafts.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>onConversationRetrieved</strong>
                      :
                      <div class='force-inline'>
                        <p>Callback that is called for
            every retrieved conversation.</p>
            
                      </div>
                    </li>
                </ul>
                  <h4>Returns</h4>
                  <code><code><a href="#Promise">Promise</a></code></code>
                  :
                  <div class='force-inline'>
                    <p>Promise is resolved once all conversations are
            retrieved and rejected if conversation stream is closed unexpectedly.</p>
            
                  </div>
            </section>
          </div>
        </div>
        <div class='collapsible' id='ConversationClient.init'>
          <a href='#ConversationClient.init'>
            <code>
              .init<span class='gray'>(appInstanceId)</span>
            </code>
            <div class='force-inline'>
              <p>Initialized conversation service client bridge.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='ConversationClient.init' class='mt0'>
                init<span class='gray'>(appInstanceId)</span>
              </h2>
              <p>Initialized conversation service client bridge.</p>
            
                <h4>Parameters</h4>
                <ul class='suppress-p-margin'>
                    <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>appInstanceId</strong>
                      :
                      <div class='force-inline'>
                        <p>Unique identifier of app instance where
            client resides in.</p>
            
                      </div>
                    </li>
                </ul>
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='ConversationSummary' class='mt0'>
    ConversationSummary<span class='gray'></span>
  </h2>
  <p>Type description for the ConversationSummary object that is return from the
Conversation service.</p>

    <h4>Properties</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code> <strong>id</strong>
              :
              <div class='force-inline'>
                <p>Unique identifier of the the conversation.</p>

              </div>
            </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>body</strong>
              :
              <div class='force-inline'>
                <p>Short content of the last message in the
conversation.</p>

              </div>
            </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code>> <strong>participants</strong>
              :
              <div class='force-inline'>
                <p>List of the conversation
participants.</p>

              </div>
            </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">Date</a></code> <strong>timestamp</strong>
              :
              <div class='force-inline'>
                <p>Conversation timestamp.</p>

              </div>
            </li>
        <li> <strong>status</strong>
              :
              <div class='force-inline'>
                <p>Conversation
status that indicates whether conversation has unread messages or/and failed
messages that user hasn&apos;t seen yet.</p>

              </div>
            </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>lastMessageType</strong>
              :
              <div class='force-inline'>
                <p>Type of the last message in the
conversation. Can be either &apos;sms&apos; or &apos;mms&apos;.</p>

              </div>
            </li>
        <li><code><a href="#Draft">Draft</a></code> <strong>draft</strong>
              :
              <div class='force-inline'>
                <p>If conversation is draft or has draft, then this
field contains appropriate draft information, otherwise it&apos;s null.</p>

              </div>
            </li>
    </li>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='createListWithMsgInfo' class='mt0'>
    createListWithMsgInfo<span class='gray'>(message)</span>
  </h2>
  <p>Incoming message: return array of sender number string;
Outgoing message: return array of object(number and report div block).</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>message</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='createReportDiv' class='mt0'>
    createReportDiv<span class='gray'>(reports)</span>
  </h2>
  <p>Generate report Div contains delivery report and read report for showing
report information within contact list</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>reports</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='debug' class='mt0'>
    debug<span class='gray'>(arg1, args)</span>
  </h2>
  
    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>arg1</strong>
          :
          <div class='force-inline'>
            <p>The first value to be displayed to the console.</p>

          </div>
        </li>
        <li>...Any <strong>args</strong>
          :
          <div class='force-inline'>
            <p>The other values to be displayed to the console, or the
parameters to the first string.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='debug' class='mt0'>
    debug<span class='gray'>(arg1, args)</span>
  </h2>
  
    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>arg1</strong>
          :
          <div class='force-inline'>
            <p>The first value to be displayed to the console.</p>

          </div>
        </li>
        <li>...Any <strong>args</strong>
          :
          <div class='force-inline'>
            <p>The other values to be displayed to the console, or the
parameters to the first string.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='defer' class='mt0'>
    defer<span class='gray'></span>
  </h2>
  <p>Returns object that contains promise and related resolve\reject methods
to avoid wrapping long or complex code into single Promise constructor.</p>

      <h4>Returns</h4>
      <code><code><a href="#Defer">Defer</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='Defer' class='mt0'>
    Defer<span class='gray'></span>
  </h2>
  <p>The Defer type is useful when creating promises.</p>

    <h4>Properties</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>resolve</strong>
              :
              <div class='force-inline'>
                <p>The Promise&apos;s resolve function.</p>

              </div>
            </li>
        <li> <strong>reject</strong>
              :
              <div class='force-inline'>
                <p>The Promise&apos;s reject function.</p>

              </div>
            </li>
        <li><code><a href="#Promise">Promise</a></code> <strong>promise</strong>
              :
              <div class='force-inline'>
                <p>The actual promise.</p>

              </div>
            </li>
    </li>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='deleteConversations' class='mt0'>
    deleteConversations<span class='gray'>(conversationIds)</span>
  </h2>
  <p>Deletes one or several conversations, including their messages.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code>> <strong>conversationIds</strong>
          :
          <div class='force-inline'>
            <p>ID of the conversations to be
deleted.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='deleteMessages' class='mt0'>
    deleteMessages<span class='gray'>(messageIds)</span>
  </h2>
  <p>Deletes one or several messages.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code>> <strong>messageIds</strong>
          :
          <div class='force-inline'>
            <p>ID of the messages to be deleted.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='findConversationFromAddress' class='mt0'>
    findConversationFromAddress<span class='gray'>(address)</span>
  </h2>
  <p>Finds a conversation from an address (that is: a phone number or an
email).</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>address</strong>
          :
          <div class='force-inline'>
            <p>This is either a phone number or an email, to
match an existing conversation from.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code></code>
      :
      <div class='force-inline'>
        <p>The id of the conversation, or null if not found.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getAllConversations' class='mt0'>
    getAllConversations<span class='gray'>(serviceStream, appInstanceId)</span>
  </h2>
  <p>Stream that returns everything needed to display conversations in the
inbox view.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>ServiceStream</code><<code><a href="#ConversationSummary">ConversationSummary</a></code>> <strong>serviceStream</strong>
          :
          <div class='force-inline'>
            <p>The stream to
use in the implementation: it will be passed automatically by the Bridge
library.</p>

          </div>
        </li>
        <li><code><a href="#appInstanceId">appInstanceId</a></code> <strong>appInstanceId</strong>
          :
          <div class='force-inline'>
            <p>Unique id of the app instance
requesting service.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getConversationSummary' class='mt0'>
    getConversationSummary<span class='gray'>(conversationId)</span>
  </h2>
  <p>Returns all information related to a single conversation, to display in
the conversation view.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>conversationId</strong>
          :
          <div class='force-inline'>
            <p>Conversation to retrieve.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#ConversationSummary">ConversationSummary</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getMessage' class='mt0'>
    getMessage<span class='gray'>(messageId)</span>
  </h2>
  <p>Fetches a message information.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>messageId</strong>
          :
          <div class='force-inline'>
            <p>The message ID to retrieve.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code>Message</code></code>
      :
      <div class='force-inline'>
        <p>All message information, including contact, delivery,
read reports, size, timestamps, etc.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getMessagesForConversation' class='mt0'>
    getMessagesForConversation<span class='gray'>(The, stream, conversationId)</span>
  </h2>
  <p>Stream that returns messages in a conversation, with all suitable
information to display in the conversation view.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>ServiceStream</code><<code>MessageSummary</code>> <strong>The</strong>
          :
          <div class='force-inline'>
            <p>stream to use in the
implementation: it will be passed automatically by the Bridge library.</p>

          </div>
        </li>
        <li> <strong>stream</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>conversationId</strong>
          :
          <div class='force-inline'>
            <p>Conversation to retrieve.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='init' class='mt0'>
    init<span class='gray'></span>
  </h2>
  <p>Initializes our service using the Service mixin&apos;s initService.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='markConversationsAs' class='mt0'>
    markConversationsAs<span class='gray'>(param, $0)</span>
  </h2>
  <p>Marks a conversation as read or unread.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>param</strong>
          :
          <div class='force-inline'>
            
          </div>
            <ul>
                <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code>> param.conversations
                  <p>Conversation IDs to be
marked.</p>
</li>
                <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code> param.asRead
                  <p>Specifies whether we mark as read of
unread.</p>
</li>
            </ul>
        </li>
        <li> <strong>$0</strong>
          :
          <div class='force-inline'>
            
          </div>
            <ul>
                <li> $0.conversations
                  </li>
                <li> $0.asRead
                  </li>
            </ul>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='detachHistoryListener' class='mt0'>
    detachHistoryListener<span class='gray'></span>
  </h2>
  <p>Removes the hashchange event handler.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='Draft' class='mt0'>
    Draft<span class='gray'>(draft, opts)</span>
  </h2>
  <p>Draft</p>
<p>A message-like object containing unsent
message content to be stored temporarily
in a Drafts collection.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>draft</strong>
          :
          <div class='force-inline'>
            <p>Draft or empty object.</p>

          </div>
        </li>
        <li> <strong>opts</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='endNavigation' class='mt0'>
    endNavigation<span class='gray'></span>
  </h2>
  <p>Ends the navigation so that new navigations can take place.
This cleans up the navigation states.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='ERRORS' class='mt0'>
    ERRORS<span class='gray'></span>
  </h2>
  <p>Maps error code to error description object:
prefix: used as prefix for error message text/title l10nId,
showRecipient: indicates whether recipients info should be included into
error message displayed to the user;
showDsdsStatus: indicates whether DSDS status should be included into
error message displayed to the user;
executeHandler: indicates whether confirmation handler passed to the
error dialog should be executed once user selects confirm action.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='EVENTS' class='mt0'>
    EVENTS<span class='gray'></span>
  </h2>
  <p>Event set that key is corresponding to mozMobileMessage events and value is
the name that broadcasts to client side.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='EVENTS' class='mt0'>
    EVENTS<span class='gray'></span>
  </h2>
  <p>List of event that can be broadcasted by shim.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='executeNavigationStep' class='mt0'>
    executeNavigationStep<span class='gray'>(stepName)</span>
  </h2>
  <p>Executes the lifecycle function for <code>stepName</code> on the right object.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>stepName</strong>
          :
          <div class='force-inline'>
            <p>The step to execute: one of &apos;beforeLeave&apos;,
&apos;beforeEnter&apos;, &apos;afterLeave&apos;, &apos;afterEnter&apos;.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Resolved when the step returns a value or a resolved
promise, rejected when the step either throws or returns a rejected promise.
Or a resolved promise if no step was executed (because it was already
executed or there was no function to execute).</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='exports' class='mt0'>
    exports<span class='gray'>(type, uri, size)</span>
  </h2>
  <p>Creates an Attachment object</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>type</strong>
          :
          <div class='force-inline'>
            <p>of attachment (image, video, etc).</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>uri</strong>
          :
          <div class='force-inline'>
            <p>Location or datauri of image to show.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>size</strong>
          :
          <div class='force-inline'>
            <p>Size of attachment in bytes.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Attachment">Attachment</a></code></code>
      :
      <div class='force-inline'>
        <p>new attachment object.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='findContainerView' class='mt0'>
    findContainerView<span class='gray'>(view)</span>
  </h2>
  <p>Finds the container view of a view.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>view</strong>
          :
          <div class='force-inline'>
            <p>A view or a subview.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code></code>
      :
      <div class='force-inline'>
        <p>the container view of the parameter view. It can be the
same object if the parameter is itself the container view.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='findViewFromLocation' class='mt0'>
    findViewFromLocation<span class='gray'>(location)</span>
  </h2>
  <p>Tries to find the correct view from the location.</p>
<p>First it tries to find the view using the location&apos;s hash.
If findViewNameFromHash returns something, we try to match an existing view
from this name, then we check whether the found view is indeed part of this
document using the full URL.</p>
<p>If findViewNameFromHash returns nothing, we try to find a view from the full
URL.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Location">Location</a></code> <strong>location</strong>
          :
          <div class='force-inline'>
            <p>The content of window.location.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code></code>
      :
      <div class='force-inline'>
        <p>The found view, or null.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='findViewFromName' class='mt0'>
    findViewFromName<span class='gray'>(name)</span>
  </h2>
  <p>Finds a view from its name.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>name</strong>
          :
          <div class='force-inline'>
            <p>Name of the view to find.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code></code>
      :
      <div class='force-inline'>
        <p>The found view, or null.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='findViewNameFromHash' class='mt0'>
    findViewNameFromHash<span class='gray'>(hash)</span>
  </h2>
  <p>Parses hash to find a view name.
It takes the part of the hash between &apos;/&apos; or the start of the string, and &apos;?&apos;
or the end of the string.</p>
<p>Examples:
#/conversation?id=5               =&gt; conversation
#/composer?recipient=+33615647897 =&gt; composer
#/composer                        =&gt; composer</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>hash</strong>
          :
          <div class='force-inline'>
            <p>The string to analyze.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code></code>
      :
      <div class='force-inline'>
        <p>The analyzed string. It is not guaranteed to be an existing
view name.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='found' class='mt0'>
    found<span class='gray'></span>
  </h2>
  <p>Validation Strategy</p>
<ol>
<li>Let <em>found</em> be a register of confirmed terms</li>
<li>Let <em>contact</em> be a contact record.</li>
<li>
<p>For each <em>term</em> [...input list], with the label <em>outer</em></p>
<ul>
<li>
<p>For each <em>field</em> of [givenName, familyName]</p>
<ul>
<li>
<p>For each <em>value</em> of <em>contact</em>[ <em>field</em> ]</p>
<ul>
<li>
<p>Let <em>found</em>[ <em>term</em> ] be the result of calling
<em>filterFn</em>( <em>value</em>, <em>term</em>).</p>
<ul>
<li>If <em>found</em>[ <em>term</em> ] is <strong>true</strong>, continue to
loop labelled <em>outer</em></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>If every value of <em>key</em> in <em>found</em> is <strong>true</strong> return <strong>true</strong>,
else return <strong>false</strong></li>
</ol>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='fromDraft' class='mt0'>
    fromDraft<span class='gray'>(draft)</span>
  </h2>
  <p>Render draft</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="#Draft">Draft</a></code> <strong>draft</strong>
          :
          <div class='force-inline'>
            <p>Draft to be loaded into the composer.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='prepend' class='mt0'>
    prepend<span class='gray'>(item, position)</span>
  </h2>
  <p>Writes node to composition element</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>mixed</code> <strong>item</strong>
          :
          <div class='force-inline'>
            <p>Html, DOMNode, or attachment to add
to composition element.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code> <strong>position</strong>
          :
          <div class='force-inline'>
            <p>True to append, false to prepend or
undefined/null for auto (at cursor).</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='requestAttachment' class='mt0'>
    requestAttachment<span class='gray'></span>
  </h2>
  <p>Initiates a &apos;pick&apos; MozActivity allowing the user to create an
attachment</p>

      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>A Promise for the underlying DOMRequest API.
Resolve will be triggered when activity returns
successfully with result blob size smaller than limit.
Reject will be triggered when activity returns error
or blob size exceeds limit.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='get' class='mt0'>
    get<span class='gray'>(key)</span>
  </h2>
  <p>Shim for mozSettings.createLock().get API.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>key</strong>
          :
          <div class='force-inline'>
            <p>Key name for Settings.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Promise that return the settings value from settings DB.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='set' class='mt0'>
    set<span class='gray'>(settings)</span>
  </h2>
  <p>Shim for mozSettings.createLock().set API.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>settings</strong>
          :
          <div class='force-inline'>
            <p>Settings key and value for settings. It can have
several key/value pairs inside.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Promise that return saved result.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getBaseName' class='mt0'>
    getBaseName<span class='gray'>(filepath, filePath)</span>
  </h2>
  <p>Gets actual base file name (name.extension) from its path.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>filepath</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>filePath</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code></code>
      :
      <div class='force-inline'>
        <p>actual base file name i.e name.extension</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getContentNode' class='mt0'>
    getContentNode<span class='gray'>(attachmentContainer)</span>
  </h2>
  <p>Returns the inner DOM node.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>attachmentContainer</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getMessages' class='mt0'>
    getMessages<span class='gray'>(stream, options)</span>
  </h2>
  <p>Stream wrapper for getMessages API for returning messages in chunk.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>ServiceStream</code> <strong>stream</strong>
          :
          <div class='force-inline'>
            <p>Channel for returning message.</p>

          </div>
        </li>
        <li>Any <strong>options</strong>
          :
          <div class='force-inline'>
            <p>Options for getMessages API.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getThreads' class='mt0'>
    getThreads<span class='gray'>(stream)</span>
  </h2>
  <p>Stream wrapper for getThreads API for returning threads in chunk.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>ServiceStream</code> <strong>stream</strong>
          :
          <div class='force-inline'>
            <p>Channel for returning thread.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='retrieveMMS' class='mt0'>
    retrieveMMS<span class='gray'>(id)</span>
  </h2>
  <p>Call platform retrieveMMS API to retrieve the MMS by ID.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>id</strong>
          :
          <div class='force-inline'>
            <p>MMS message id.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code><<code>void</code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error">Error</a></code>></code>
      :
      <div class='force-inline'>
        <p>return void if MMS is retrieved
successfully or error while failed.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='SystemMessageHandler' class='mt0'>
    SystemMessageHandler<span class='gray'></span>
  </h2>
  <p>Object that is responsible for handling &quot;sms-received&quot; and &quot;notification&quot;
system messages.</p>

      <h4>Static members</h4>
        <div class='collapsible' id='SystemMessageHandler.init'>
          <a href='#SystemMessageHandler.init'>
            <code>
              .init<span class='gray'></span>
            </code>
            <div class='force-inline'>
              <p>Initializes system message handlers, if app is run as activity, no
system message handlers will be registered.</p>

            </div>
          </a>
          <div class='collapser border px2 m2'>
            <section class='py2 clearfix'>
              <h2 id='SystemMessageHandler.init' class='mt0'>
                init<span class='gray'></span>
              </h2>
              <p>Initializes system message handlers, if app is run as activity, no
            system message handlers will be registered.</p>
            
            </section>
          </div>
        </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getOperatorByServiceId' class='mt0'>
    getOperatorByServiceId<span class='gray'>(index)</span>
  </h2>
  <p>Will return operator name depending on the iccId.
Will return the empty string in a single SIM scenario.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>index</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='getServiceIdByIccId' class='mt0'>
    getServiceIdByIccId<span class='gray'>(iccId)</span>
  </h2>
  <p>Shim for returning the service id that matches the icc id.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>iccId</strong>
          :
          <div class='force-inline'>
            <p>Id that could map to the target SIM.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code></code>
      :
      <div class='force-inline'>
        <p>matched service id or null if unmatched.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='switchMmsSimHandler' class='mt0'>
    switchMmsSimHandler<span class='gray'>(iccId)</span>
  </h2>
  <p>Switching the default mms/data service id by icc id.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>iccId</strong>
          :
          <div class='force-inline'>
            <p>Id that could map to the target SIM.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Promise that returned when sim switching is ready or
failed.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='hasPendingRequest' class='mt0'>
    hasPendingRequest<span class='gray'></span>
  </h2>
  <p>Indicates if there is pending activity request.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='hasSeveralSim' class='mt0'>
    hasSeveralSim<span class='gray'></span>
  </h2>
  <p>Returns true if the device has more than 1 SIM port and at least 2 SIMs are
inserted.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='isDualSimDevice' class='mt0'>
    isDualSimDevice<span class='gray'></span>
  </h2>
  <p>returns true if the device has more than 1 SIM port</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='init' class='mt0'>
    init<span class='gray'>(applicationInstanceId)</span>
  </h2>
  <p>Initializes connection to MessagingService hosted in a SharedWorker.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>applicationInstanceId</strong>
          :
          <div class='force-inline'>
            <p>Unique identifier of app instance
where client resides in.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='resendMessage' class='mt0'>
    resendMessage<span class='gray'>(message)</span>
  </h2>
  <p>Resends message with the given opts.
Takes a formatted message in case you happen to have one.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>message</strong>
          :
          <div class='force-inline'>
            <p>The message object containing all the information
depending on the type of the message which can be &apos;sms&apos; or &apos;mms&apos;.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='retrieveMMS' class='mt0'>
    retrieveMMS<span class='gray'>(id)</span>
  </h2>
  <p>Gets the MMS object having a given id.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code> <strong>id</strong>
          :
          <div class='force-inline'>
            <p>The id of the MMS we wish to get.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code><<code>MmsMessage</code>></code>
      :
      <div class='force-inline'>
        <p>A Promise object that handles the success
or error of the operation.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='sendMMS' class='mt0'>
    sendMMS<span class='gray'>(options)</span>
  </h2>
  <p>Sends an MMS based on the specified parameter object.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>options</strong>
          :
          <div class='force-inline'>
            <p>Options object is the options field with the
following properties:</p>
<ul>
<li>recipients (string or array of string): recipients for this message.</li>
<li>subject (optional string): subject for this message.</li>
<li>content (array of SMIL slides): this is the content for the message
(see ConversationView for more information).</li>
<li>serviceId (optional long or string): the SIM that should be used for
sending this message. If this is not the current default configuration
for sending MMS, then we&apos;ll first switch the configuration to this
serviceId, and only then send the message. That means that the
&quot;sending&quot; event will come quite late in this case.</li>
<li>onsuccess (optional func): called only once, even for several
recipients, when the message is successfully sent.</li>
<li>onerror (optional func): called only once if there is an error.</li>
</ul>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='sendSMS' class='mt0'>
    sendSMS<span class='gray'>(options)</span>
  </h2>
  <p>Sends an SMS based on the specified parameter object.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>options</strong>
          :
          <div class='force-inline'>
            <p>Options object that contains :-</p>
<ul>
<li>recipients (string or array of string): contains the list of
recipients for this message</li>
<li>content (string): the message&apos;s body</li>
<li>serviceId (optional long or string): the SIM serviceId we use to send
the message</li>
<li>onsuccess (optional function): will be called when one SMS has been
sent successfully, with the request&apos;s result as argument. Can be called
several times.</li>
<li>onerror (optional function): will be called when one SMS transmission
failed, with the error object as argument. Can be called several times.</li>
<li>
<p>oncomplete (optional function): will be called when all messages have
been sent. Its argument will have the following properties:</p>
<ul>
<li>hasError (boolean): whether we had at least one error</li>
<li>return (array): each item is an object with the following properties:
. success (boolean): whether this is a success or an error
. result (request&apos;s result): the request&apos;s result object
. recipient (string): the recipient used for this transmission.</li>
</ul>
</li>
</ul>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='init' class='mt0'>
    init<span class='gray'>(appInstanceId)</span>
  </h2>
  <p>Initializes connection to mozMobileConnectionsShim hosted in iframe.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>appInstanceId</strong>
          :
          <div class='force-inline'>
            <p>Unique identifier of app instance
where client resides in.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='switchMmsSimHandler' class='mt0'>
    switchMmsSimHandler<span class='gray'>(iccId)</span>
  </h2>
  <p>Switch the default MMS and data to SIM that matches the given iccId.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code> <strong>iccId</strong>
          :
          <div class='force-inline'>
            <p>Id that could map to the target SIM.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Promise of shim&apos;s method that returned when sim
switching is ready or failed.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='init' class='mt0'>
    init<span class='gray'></span>
  </h2>
  <p>Initializes our service using the Service mixin&apos;s initService and
requests mozMobileMessage shim as client.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='resendMessage' class='mt0'>
    resendMessage<span class='gray'>(message, appInstanceId)</span>
  </h2>
  <p>Resend a message by send API shim with existing message information.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>Message</code> <strong>message</strong>
          :
          <div class='force-inline'>
            <p>Target message that need to be resent.</p>

          </div>
        </li>
        <li><code><a href="#appInstanceId">appInstanceId</a></code> <strong>appInstanceId</strong>
          :
          <div class='force-inline'>
            <p>Unique id of the app instance
requesting service.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>DOMRequest promise with success result or error.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='retrieveMMS' class='mt0'>
    retrieveMMS<span class='gray'>(id, appInstanceId)</span>
  </h2>
  <p>Retrieve a MMS by retrieveMMS API shim by message ID.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> <strong>id</strong>
          :
          <div class='force-inline'>
            <p>mms message id for retrieval.</p>

          </div>
        </li>
        <li><code><a href="#appInstanceId">appInstanceId</a></code> <strong>appInstanceId</strong>
          :
          <div class='force-inline'>
            <p>Unique id of the app instance
requesting service.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>DOMRequest promise with success result or error.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='sendMMS' class='mt0'>
    sendMMS<span class='gray'>(recipients, subject, content, serviceId, appInstanceId, $0)</span>
  </h2>
  <p>Send mms by using sendMMS API shim.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>> <strong>recipients</strong>
          :
          <div class='force-inline'>
            <p>Recipients for this message.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>subject</strong>
          :
          <div class='force-inline'>
            <p>Subject for this message.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>> <strong>content</strong>
          :
          <div class='force-inline'>
            <p>This is the content for the message (
see ConversationView for more information).</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>serviceId</strong>
          :
          <div class='force-inline'>
            <p>The SIM that should be used for
sending this message. If this is not the current default configuration
for sending MMS, then we&apos;ll first switch the configuration to this
serviceId, and only then send the message. That means that the
&quot;sending&quot; event will come quite late in this case.</p>

          </div>
        </li>
        <li><code><a href="#appInstanceId">appInstanceId</a></code> <strong>appInstanceId</strong>
          :
          <div class='force-inline'>
            <p>Unique id of the app instance
requesting service.</p>

          </div>
        </li>
        <li> <strong>$0</strong>
          :
          <div class='force-inline'>
            
          </div>
            <ul>
                <li> $0.recipients
                  </li>
                <li> $0.content
                  </li>
                <li> $0.subject
                  </li>
                <li> $0.serviceId
                  </li>
            </ul>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>DOMRequest promise with success result or error.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='sendSMS' class='mt0'>
    sendSMS<span class='gray'>(recipients, content, serviceId, appInstanceId, $0)</span>
  </h2>
  <p>Send sms by using send API shim.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>> <strong>recipients</strong>
          :
          <div class='force-inline'>
            <p>Contains the list of recipients for
this message.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>content</strong>
          :
          <div class='force-inline'>
            <p>The message&apos;s body.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>serviceId</strong>
          :
          <div class='force-inline'>
            <p>The SIM serviceId we use to send the
message.</p>

          </div>
        </li>
        <li><code><a href="#appInstanceId">appInstanceId</a></code> <strong>appInstanceId</strong>
          :
          <div class='force-inline'>
            <p>Unique id of the app instance
requesting service.</p>

          </div>
        </li>
        <li> <strong>$0</strong>
          :
          <div class='force-inline'>
            
          </div>
            <ul>
                <li> $0.recipients
                  </li>
                <li> $0.content
                  </li>
                <li> $0.serviceId
                  </li>
            </ul>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Promise with array of the request result.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='INSTANCE_ID' class='mt0'>
    INSTANCE_ID<span class='gray'></span>
  </h2>
  <p>Unique identifier of the app instance.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='isMatch' class='mt0'>
    isMatch<span class='gray'>(contact, criteria, filterFn)</span>
  </h2>
  <p>isMatch</p>
<p>Validate a contact record against a list of terms by specified fields</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>contact</strong>
          :
          <div class='force-inline'>
            <p>a contact record object.</p>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>criteria</strong>
          :
          <div class='force-inline'>
            <p>fields and terms to validate a contact.</p>
<pre><code>   - fields (fields of a contact record).
   - terms (terms to validate against contact record field values).
</code></pre>

          </div>
        </li>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function">Function</a></code> <strong>filterFn</strong>
          :
          <div class='force-inline'>
            <p>function accepts 2 arguments for
comparison.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='isUsingOldArchitecture' class='mt0'>
    isUsingOldArchitecture<span class='gray'></span>
  </h2>
  <p>We&apos;re using the old architecture if we&apos;re not in a split document.</p>

      <h4>Returns</h4>
      <code><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code></code>
      :
      <div class='force-inline'>
        <p>true if we&apos;re using the old architecture.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='LINK_TYPES' class='mt0'>
    LINK_TYPES<span class='gray'>(phone, link)</span>
  </h2>
  <p>For each category of links:
The key is the link type
order matters - defined first means higher priority if two matches equal</p>
<p>regexp: The regular expression to match potential links
matchFilter: (optional) A function that is passed the matched part, and
the linkSpec.
Should return the linkSpec, or false if not to be matched
transform: A function that converts the match data to a html link string
Is passed the matched part and the linkSpec.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>phone</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>link</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='localizeAttachmentIFrame' class='mt0'>
    localizeAttachmentIFrame<span class='gray'>(attachmentContainer)</span>
  </h2>
  <p>Localize an attachment iframe</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>attachmentContainer</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='localizeAttachmentIFrames' class='mt0'>
    localizeAttachmentIFrames<span class='gray'></span>
  </h2>
  <p>Look for attachment iframes and localize them - l20n.js doesn&apos;t do this
XXX: remove once bug 1020130 is fixed</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='localizeDateTime' class='mt0'>
    localizeDateTime<span class='gray'>(isTimeFormatChanged)</span>
  </h2>
  <p>Look for time elements with format and re-translate the date message.
More complex because the argument to the l10n string is itself a formatted
date using l10n.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code> <strong>isTimeFormatChanged</strong>
          :
          <div class='force-inline'>
            <p>Indicates that time format has been
changed and we need to update only elements with time aware formats.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='METHODS' class='mt0'>
    METHODS<span class='gray'></span>
  </h2>
  <p>Array of method names that need to be exposed for API shim.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='METHODS' class='mt0'>
    METHODS<span class='gray'></span>
  </h2>
  <p>Array of method names that need to be exposed for API shim.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='METHODS' class='mt0'>
    METHODS<span class='gray'></span>
  </h2>
  <p>List of methods exposed by shim.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='METHODS' class='mt0'>
    METHODS<span class='gray'></span>
  </h2>
  <p>Array of method names that need to be exposed for API shim.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='mobileMessageClients' class='mt0'>
    mobileMessageClients<span class='gray'></span>
  </h2>
  <p>List of MobileMessageClient mapped to specific application id.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='NGA_VIEWS' class='mt0'>
    NGA_VIEWS<span class='gray'></span>
  </h2>
  <p>This contains an array of view characteristics, necessary to handle
navigation requests.
Each item has the following properties:</p>
<ul>
<li>name: this is the name of the view. This will be used also in the URL
hash if the same HTML file holds several views.</li>
<li>url: this is the URL used to match the current location and find the
current view.</li>
<li>behavior: this is the actual JavaScript object that manages this view.</li>
<li>previous (optional): this is the name of the previous view; this is
necessary to decide if we do a forward/backward animation.</li>
<li>partOf (optional): this is used when a view is part of another view&apos;s
HTML document. In that case one view is &quot;master&quot; and the other are only
part of the master view.</li>
</ul>
<p>NGA_VIEWS holds the configuration for NGA split views.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='OA_VIEWS' class='mt0'>
    OA_VIEWS<span class='gray'></span>
  </h2>
  <p>OA_VIEWS holds the configuration for the old non-split architecture.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onHashChange' class='mt0'>
    onHashChange<span class='gray'></span>
  </h2>
  <p>Reacts to hash changes.</p>
<p>This is the heart of the navigation logic and handles running the various
navigation steps.
It also handles any unwanted errors. (TODO: needs to tune this a little
more).</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='onNavigationError' class='mt0'>
    onNavigationError<span class='gray'>([e])</span>
  </h2>
  <p>This function is used to catch errors at the end of navigation promise
chains. We&apos;re ending the navigation if this happens, so that we can start a
new one afterwards.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error">Error</a></code>]</code> <strong>e</strong>
          :
          <div class='force-inline'>
            <p>The exception to display, if any.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='params' class='mt0'>
    params<span class='gray'></span>
  </h2>
  <p>Different situations depending on the state</p>
<ul>
<li>&apos;Add Subject&apos; if there&apos;s none, &apos;Delete subject&apos; if already added</li>
<li>&apos;Delete messages&apos; for existing conversations</li>
</ul>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='previousAnimationDefer' class='mt0'>
    previousAnimationDefer<span class='gray'></span>
  </h2>
  <p>Used in <code>waitForPanelAnimation</code> to help solving race conditions.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='readyDefer' class='mt0'>
    readyDefer<span class='gray'></span>
  </h2>
  
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='RENDERERS' class='mt0'>
    RENDERERS<span class='gray'></span>
  </h2>
  <p>A <div> container suits most of the cases where we want to display an
MMS attachment (= icon + file name + file size). However, drafts are a
specific case because they are inside an editable area.</p>
<p>A <div contenteditable="false"> container would be fine for drafts but
Gecko does not support it at the moment, see bug 685445:
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=685445">https://bugzilla.mozilla.org/show_bug.cgi?id=685445</a></p>
<p>Instead of a bunch of JavaScript to manage where the caret is and what
to delete on backspace, the contentEditable region treats the iframe as
a simple block. Outside of the Compose area, a <div> container is still
fine -- and it&apos;s <em>way</em> faster.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='renderTo' class='mt0'>
    renderTo<span class='gray'>(baseMarkup, data, attachmentContainer)</span>
  </h2>
  <p>Renders baseMarkup into container node (in this case iframe).</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>baseMarkup</strong>
          :
          <div class='force-inline'>
            <p>Base attachment HTML markup. It should be safely
escaped in advance!</p>

          </div>
        </li>
        <li> <strong>data</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
        <li> <strong>attachmentContainer</strong>
          :
          <div class='force-inline'>
            <p>Attachment container node.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code><<code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling">Node</a></code>></code>
      :
      <div class='force-inline'>
        <p>Content container node is the container node
for the attachment base HTML markup that allows consumer code to
perform post processing DOM operations.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='resolve' class='mt0'>
    resolve<span class='gray'></span>
  </h2>
  <p>Bailout Strategy</p>
<ol>
<li>
<p>A <em>missing</em> filter.filterValue will results in an
error when passed to mozContacts.find, bailing out
early avoids the additional overhead of making a
request that we know will fail.</p>
</li>
<li>
<p>Missing navigator.mozContacts API or empty but
present filter.filterValue make the app useless,
so prevent unpredictable state by making the
result a no-op.</p>
</li>
</ol>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='sanitizeServiceId' class='mt0'>
    sanitizeServiceId<span class='gray'>(serviceId)</span>
  </h2>
  <p>0 is a valid value so we need to take care to not consider it as a falsy
value. We want to return null for anything that&apos;s not a number or a
string containing a number.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li> <strong>serviceId</strong>
          :
          <div class='force-inline'>
            
          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='SERVICE_NAME' class='mt0'>
    SERVICE_NAME<span class='gray'></span>
  </h2>
  <p>Name of the service that is responsible for managing conversation.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='SERVICE_NAME' class='mt0'>
    SERVICE_NAME<span class='gray'></span>
  </h2>
  <p>Name of the service for mozMobileMessage API shim.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='SERVICE_NAME' class='mt0'>
    SERVICE_NAME<span class='gray'></span>
  </h2>
  <p>Name of the service that is responsible for managing activities.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='SERVICE_NAME' class='mt0'>
    SERVICE_NAME<span class='gray'></span>
  </h2>
  <p>Name of the service for mozMobileConnections API shim.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='SERVICE_NAME' class='mt0'>
    SERVICE_NAME<span class='gray'></span>
  </h2>
  <p>Name of the service that is responsible for messaging functionality.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='SERVICE_NAME' class='mt0'>
    SERVICE_NAME<span class='gray'></span>
  </h2>
  <p>Name of the service that is responsible for managing activities.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='SERVICE_NAME' class='mt0'>
    SERVICE_NAME<span class='gray'></span>
  </h2>
  <p>Name of the service that is responsible for messaging functionality.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='SERVICE_NAME' class='mt0'>
    SERVICE_NAME<span class='gray'></span>
  </h2>
  <p>Name of the service for mozSettings API shim.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='setFutureState' class='mt0'>
    setFutureState<span class='gray'></span>
  </h2>
  <p>Sets the currentState variable to its new value.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='setLocation' class='mt0'>
    setLocation<span class='gray'>(url)</span>
  </h2>
  <p>Navigate to this URL.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code> <strong>url</strong>
          :
          <div class='force-inline'>
            <p>URL to load.</p>

          </div>
        </li>
    </ul>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='setReady' class='mt0'>
    setReady<span class='gray'></span>
  </h2>
  <p>Sets application readiness, can be called only once</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='whenReady' class='mt0'>
    whenReady<span class='gray'></span>
  </h2>
  <p>Returns promise that will be resolved once application is ready for
interaction.</p>

      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      
      <div class='force-inline'>
        
      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='some' class='mt0'>
    some<span class='gray'></span>
  </h2>
  <p>When non-contact recipient is tapped by user, Recipients component
removes recipient pill, fires &quot;remove&quot; event and only then populates
recipients input with the content to edit.</p>
<p>In case we have only one recipient, then in &quot;remove&quot; handler we&apos;ll have
both empty recipients list and input (since input is not populated yet).
At the same time in Conversation view we listen for the modification of
recipients input. So we have two consequent events where we want to know
how many and what recipients we have to possibly disable send button and
change message type if we have email recipient. That leads to two
consequent message type change banners.</p>
<p>To preserve original behavior and avoid double banner issue we just don&apos;t
try to detect email in recipients input.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='startNavigation' class='mt0'>
    startNavigation<span class='gray'>(opts)</span>
  </h2>
  <p>Sets up the state to handle the navigation.
Generally we&apos;re waiting for any ongoing transition to end before starting a
new one. However if the ongoing transition was started with opts.partial ==
true, we merely augment the ongoing transition with the new information,
especially arguments.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code> <strong>opts</strong>
          :
          <div class='force-inline'>
            <p>options</p>

          </div>
            <ul>
                <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>]</code> opts.newPanel
                  <p>The panel we&apos;ll switch to. This can be
omitted in case we only want to execute beforeLeave.</p>
</li>
                <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>]</code> opts.args
                  <p>The arguments we&apos;ll use for the next panel.</p>
</li>
                <li><code>[<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code>]</code> opts.partial
                  <p>If present and true, this new navigation
request is a partial one missing information (eg arguments) and we&apos;ll call
startNavigation once again without this property once we&apos;ll know the missing
bits.</p>
</li>
            </ul>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Resolved when we could start the navigation (when a
previous ongoing one is finished).</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='STREAMS' class='mt0'>
    STREAMS<span class='gray'></span>
  </h2>
  <p>Array of stream names that need to return data (messages/threads) in chunk.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='switchPanel' class='mt0'>
    switchPanel<span class='gray'></span>
  </h2>
  <p>Hides current panel, shows new panel.
It will use an animation if we change panels in the same document.</p>

      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Resolves when the animation is over, if there is an
animation. Otherwise returns a resolved promise.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='SYSTEM_MESSAGE_NAME' class='mt0'>
    SYSTEM_MESSAGE_NAME<span class='gray'></span>
  </h2>
  <p>Name of the system message that is leveraged by activities.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='terms' class='mt0'>
    terms<span class='gray'></span>
  </h2>
  <p>Lookup Strategy</p>
<ol>
<li>
<p>Create a list of terms from the filterValue string</p>
</li>
<li>
<p>If only 1 term, set filterValue to that term.</p>
</li>
<li>
<p>If more than 1 term, find the length predominate term.
a. let initial be an empty string
(Do not use default first item in terms, or it will not
be pushed into the lowercase list)
b. For each term of terms
i. Push lowercased term into a list of lowercased terms
ii. If the current term.length is greater then initial.length,
return the term, otherwise return the initial.</p>
</li>
<li>
<p>If filterValue.length is &lt; 3, set the filterLimit to 10</p>
</li>
<li>
<p>Remove the length predominate term from the list of validation terms</p>
</li>
<li>
<p>Add back the original search value, this is needed for matching
multi-word queries</p>
</li>
<li>
<p>Make a mozContact.find request with the length predominate term
as the filter.filterValue.</p>
</li>
<li>
<p>In the mozContacts.find request success handler, filter the
results by evaluating each contact record against
the list of validation terms.</p>
</li>
</ol>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='TIMEOUT' class='mt0'>
    TIMEOUT<span class='gray'></span>
  </h2>
  <p>Disable default client timeout from bridge by setting the timeout to false.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='TIMEOUT' class='mt0'>
    TIMEOUT<span class='gray'></span>
  </h2>
  <p>Disable default client timeout from bridge by setting the timeout to false.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='TIMEOUT' class='mt0'>
    TIMEOUT<span class='gray'></span>
  </h2>
  <p>Disable default client timeout from bridge by setting the timeout to false.</p>

</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='waitForPanelAnimation' class='mt0'>
    waitForPanelAnimation<span class='gray'>(panelElement)</span>
  </h2>
  <p>Wait for the end of an animation on <code>panelElement</code>.</p>

    <h4>Parameters</h4>
    <ul class='suppress-p-margin'>
        <li><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element">Element</a></code> <strong>panelElement</strong>
          :
          <div class='force-inline'>
            <p>The element to watch.</p>

          </div>
        </li>
    </ul>
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Resolves when the animation ends.</p>

      </div>
</section>
</div><div class='py1'><section class='py2 clearfix'>
  <h2 id='waitForReady' class='mt0'>
    waitForReady<span class='gray'></span>
  </h2>
  
      <h4>Returns</h4>
      <code><code><a href="#Promise">Promise</a></code></code>
      :
      <div class='force-inline'>
        <p>Resolved when the app is ready, rejected if the app is
ready at call time.</p>

      </div>
</section>
</div>
        </div>
      </div>
    </div>
  </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
